!function(a,b,c){"use strict";var d="ht";if(!a[d]){var e=a.document,f=null,g=a[d]={},h=a[d+"config"],i=g.Default=h&&h.Default||{},j=g.Style=h&&h.Style||{},k=g.Color=h&&h.Color||{},l=g.IsGetter=h&&h.IsGetter||{},m=Math,n=m.round,o=m.floor,p=m.ceil,q=m.sqrt,r=m.max,s=m.min,t=m.abs,u=m.cos,v=m.acos,w=m.sin,x=m.asin,y=m.PI,z=2*y,A=y/2,B=m.tan,C=m.atan,D=m.atan2,E=m.random,F=m.pow,G=function(a){return a*a},H=Number.MAX_VALUE,I=Number.MIN_VALUE,J=a.navigator?a.navigator.userAgent.toLowerCase():"",K=function(a){return a.test(J)},L=K(/msie/)||K(/trident/),M=K(/msie 10/),N=K(/firefox/),O=K(/mac/),P=K(/ucbrowser/),Q=i.isTouchable===c?e?"ontouchend"in e:!1:i.isTouchable,R="front",S="back",T="left",U="right",V="top",W="bottom",X="center",Y="eye",Z="none",$="px",_="absolute",ab="rgba(255,255,255,0)",bb="style",cb="attr",db="field",eb="string",fb="boolean",gb="color",hb="int",ib="number",jb="ew-resize",kb="ns-resize",lb="pointer",mb="mousedown",nb="mousemove",ob="mouseup",pb="mouseout",qb="touchstart",rb="touchmove",sb="touchend",tb="keydown",ub="keyup",vb=Q?[qb,rb,sb]:[tb,ub,mb,nb,ob,pb,N?"DOMMouseScroll":"mousewheel","contextmenu"],wb=null,xb=null,yb=function(){if(xb){var a=(new Date).getTime(),b=a-xb.time;b>rd-50?(i.showToolTip(xb.e,xb.info),xb=null):xb.timeout=setTimeout(yb,rd-b)}};!Q&&a.addEventListener&&a.addEventListener(pb,function(){xb&&(clearTimeout(xb.timeout),xb=null)},!1);var zb=!1,Ab={},Bb={},Cb=function(){},Db=function(){throw"Oops!"},Eb={x:0,y:0,width:0,height:0},Fb=f,Gb=f,Hb=function(a){Fb&&!a._loadingView_&&(Gb||(Gb={}),Gb[a._loadingView_=Od()]=a)},Ib=function(a){if(Fb||(Fb={}),!Fb[a]){Fb[a]=!0;var b=new Image;b.onload=function(){Jb(a,b)},b.onerror=function(){Jb(a,f)},b.src=a}},Jb=function(a,b){if(Bb[a]=b,delete Fb[a],Vb(Fb)&&(Fb=f,Gb)){for(var c in Gb){var d=Gb[c];d.invalidateAll&&d.invalidateAll(),d.redraw&&d.redraw(),d.iv(),delete d._loadingView_}Gb=f}if(b&&Gb)for(var c in Gb){var d=Gb[c];d.invalidateAll&&d.invalidateAll(),d.redraw&&d.redraw(),d.iv()}},Kb=function(a,b){return Q?{x:a-5,y:b-5,width:11,height:11}:{x:a-1,y:b-1,width:3,height:3}},Lb=function(a){return typeof a===eb||a instanceof String},Mb=function(a){return typeof a===ib},Nb=function(a){return typeof a===fb},Ob=function(a){return a&&"object"==typeof a},Pb=function(a){return a instanceof Array},Qb=function(a){return"function"==typeof a},Rb=function(a,b){a.push.apply(a,b)},Sb=function(a){return a?Ob(a)?a:{}:!1},Tb=function(a,b,d){var e,f=Ob(a)?a:a.prototype;for(e in b)d&&f[e]!==c||(f[e]=b[e]);return a},Ub=function(a,b,c){a.superClass.constructor.apply(b,c)},Vb=function(a){for(var b in a)return!1;return!0},Wb=function(a,b){return a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height},Xb=function(a,b,c,d,e,g,h,i,j){var k=(h-e)*(b-g)-(i-g)*(a-e),l=(i-g)*(c-a)-(h-e)*(d-b);if(0!==l){var m=k/l,n=a+m*(c-a),o=b+m*(d-b);return j&&(n<s(a,c)||n>r(a,c)||n<s(e,h)||n>r(e,h)||o<s(b,d)||o>r(b,d)||o<s(g,i)||o>r(g,i))?f:[n,o]}return f},Yb=function(a,b,d){if(a&&d){if(!b)return a[sd(d)]();if(b===bb)return a.getStyle(d);if(b===cb)return a.getAttr(d);if(b===db)return a[d]}return c},Zb=function(a,b,c,d){if(a&&c)if(b){if(b===bb)a.setStyle(c,d);else if(b===cb)a.setAttr(c,d);else if(b===db){var e=a[c];a[c]=d,a.fp("f:"+c,e,d)}}else a[td(c)](d)},$b=function(a,b,c,d,e,f,g){var h=Se(b,e),i=Te(b,e);Ve(a,b,c-h/2,d-i/2,h,i,e,f,g)},_b=function(){var a={},b=e?e.createElement("canvas").getContext("2d"):f;return function(c,d){b.font=c?c:Ad;var e=a[b.font];return e||(e=2*b.measureText("e").width+4,a[b.font]=e),{width:b.measureText(d).width+4,height:e}}}(),ac=function(a,b,d,e,f){a.font=e?e:Ad,a.fillStyle=f?f:yd,a.textAlign=X,a.textBaseline="middle";var g,h;d?d.width===c?(g=d.x,h=d.y):(g=d.x+d.width/2,h=d.y+d.height/2):(g=0,h=0),a.fillText(b,n(g),n(h))},bc=function(a,b,c,d,e){b&&(a.fillStyle=b,a.beginPath(),a.rect(c,d,1,e),a.fill())},cc=function(a,b,c,d){var e=1-a;return e*e*b+2*a*e*c+a*a*d},dc=function(a,b,c,d,e){var f=1-a;return f*f*f*b+3*f*f*a*c+3*f*a*a*d+a*a*a*e},ec=function(a){var b,c,d,e,f=0;return a.forEach(function(a){if(b=a.length,b>0)for(c=a[0],e=1;b>e;e++)d=a[e],f+=ge(c,d),c=d}),f},fc=function(a,b,c){var d="__"+a,e=function(b){c["handle_"+a](b)};c[d]||(c[d]=e,b.addEventListener(a,e,!1))},gc=function(a,b,c){var d="__"+a,e=c[d];e&&(b.removeEventListener(a,e,!1),delete c[d])},hc=function(a,b){var c="_"+b;a[sd(b)]=function(){return this[c]},a[td(b)]=function(a){var d=this[c];this[c]=a,this.fp(b,d,a)}},ic=function(a,b){var c=new a;for(var d in b){var e=td(d),f=b[d];c[e]?c[e](f):c[d]=f}return c},jc=function(a){var b=e.createElement("div");return b.style.position=_,b.style.outline=Z,b.style.msTouchAction=Z,b.tabIndex=-1,b.onkeydown=Ld,Q&&b.style.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",f),a&&(b.style.overflow="hidden"),b},kc=function(a){var b=e.createElement("canvas");return b.style.position=_,b.style.outline=Z,b.style.msTouchAction=Z,b.style.pointerEvents=Z,a&&a.appendChild(b),b},lc=function(a){var b=a.getContext("2d");return b.save(),b.lineCap=i.lineCap,b.lineJoin=i.lineJoin,b},mc=function(a){if(e.activeElement!==a)if(Q)a.focus();else{var b=ne();a.focus(),b.target.scrollLeft=b.left,b.target.scrollTop=b.top}},nc=function(a,b,d,e,f){2===arguments.length&&(d=b.y,e=b.width,f=b.height,b=b.x);var g=a.getView?a.getView():a,h=g.style;b!==c&&(h.left=b+$),d!==c&&(h.top=d+$),e!==c&&(h.width=e+$),f!==c&&(h.height=f+$),a.endEditing&&a.endEditing(),a.redraw&&a.redraw(),a.invalidate&&a.invalidate(),a.onLayouted&&a.onLayouted(b,d,e,f),a.fireViewEvent&&a.fireViewEvent("layout")},oc=function(a){var b=a.touches[0];return b?b:a.changedTouches[0]},pc=f,qc=function(a){pc.handleWindowTouchMove(a)},rc=function(b){pc.handleWindowTouchEnd(b),a.removeEventListener(rb,qc,!1),a.removeEventListener(sb,rc,!1),pc=f},sc=function(a){pc.handleWindowMouseMove(a)},tc=function(b){pc.handleWindowMouseUp(b),a.removeEventListener(nb,sc,!1),a.removeEventListener(ob,tc,!1),pc=f},uc=function(a){return 1===be(a)},vc=function(a){return ee(a)&&65===a.keyCode},wc=function(a){return 46===a.keyCode||8===a.keyCode},xc=function(a){return function(b){return b.keyCode===a}},yc=xc(65),zc=xc(83),Ac=xc(68),Bc=xc(87),Cc=xc(37),Dc=xc(38),Ec=xc(39),Fc=xc(40),Gc=xc(32),Hc=xc(13),Ic=f,Jc=function(a,b){Ic||(Ic=kc()),$d(Ic,a,b,1);var c=lc(Ic);return c.clearRect(0,0,a,b),c},Kc=function(){var a,b={};return function(c){var d,e=b[c];return e||(a||(a=kc(),$d(a,1,1,1)),d=a.getContext("2d"),d.clearRect(0,0,1,1),d.fillStyle=c,d.beginPath(),d.rect(0,0,1,1),d.fill(),e=d.getImageData(0,0,1,1).data,e=b[c]=[e[0],e[1],e[2],e[3]]),e}}(),Lc=function(a){if(!Lb(a))return a;var b=Kc(a);return b.CA||(b.CA=[b[0]/255,b[1]/255,b[2]/255,b[3]/255]),b.CA},Mc=function(a,b,c,d){var f=e.createElement("canvas");f.width=c,f.height=d;var g=f.getContext("2d");g.drawImage(a,0,0,c,d);try{for(var h=g.getImageData(0,0,c,d),i=h.data,j=0,k=i.length;k>j;j+=4){var l=i[j+0],m=i[j+1],n=i[j+2];i[j+0]=b[0]*l,i[j+1]=b[1]*m,i[j+2]=b[2]*n}g.putImageData(h,0,0),a.ninePatchImage&&(f.ninePatchImage=new Ne(f))}catch(o){return a}return f},Nc=function(a,b,c){a.translate(n(b),n(c))},Oc=function(a,b,c,d,e,f){var g,h,i,j=Kc(b),k=d,l=j[0],m=j[1],n=j[2];if(c){var o=Kc(c);g=o[0]-l,h=o[1]-m,i=o[2]-n}else g=255-l,h=255-m,i=255-n;for(f||(f=d>10?1:.5,f=1>e?s(f/e,2):f);(d-=f)>0;){var q=1-d/k,r=l+g*q,t=m+h*q,u=n+i*q;r=s(p(r),255),t=s(p(t),255),u=s(p(u),255),a.strokeStyle="rgb("+r+","+t+","+u+")",a.lineWidth=d,a.stroke()}},Pc=function(a,b){var c,d,e,f=Kc(a);return 0>b?(b=(100+b)/100,c=p(f[0]*b),d=p(f[1]*b),e=p(f[2]*b)):(b/=100,c=f[0],d=f[1],e=f[2],c+=(255-c)*b,d+=(255-d)*b,e+=(255-e)*b,c=s(p(c),255),d=s(p(d),255),e=s(p(e),255)),"rgb("+c+","+d+","+e+")"},Qc=function(a,b,c){if(a.beginPath(),c)for(var d,e,f,g,h=0,i=0,j=c.size();j>i;i++)d=c.get(i),1===d?(e=b.get(h++),a.moveTo(e.x,e.y)):2===d?(e=b.get(h++),a.lineTo(e.x,e.y)):3===d?(e=b.get(h++),f=b.get(h++),a.quadraticCurveTo(e.x,e.y,f.x,f.y)):4===d?(e=b.get(h++),f=b.get(h++),g=b.get(h++),a.bezierCurveTo(e.x,e.y,f.x,f.y,g.x,g.y)):5===d&&a.closePath();else{var k,l,m,n=b.size();if(n>0)for(k=b.get(0),a.moveTo(k.x,k.y),l=1;n>l;l++)m=b.get(l),a.lineTo(m.x,m.y)}},Rc=function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,q,r,s,v;if(t(e)>2*y&&(e=2*y),m=p(t(e)/(y/4)),i=e/m,j=-i,k=-d,m>0){n=b+u(d)*f,o=c+w(-d)*g,h?a.lineTo(n,o):a.moveTo(n,o);for(var x=0;m>x;x++)k+=j,l=k-j/2,q=b+u(k)*f,r=c+w(k)*g,s=b+u(l)*(f/u(j/2)),v=c+w(l)*(g/u(j/2)),a.quadraticCurveTo(s,v,q,r)}},Sc=function(a,b,c,d,e,f,g,h,i){6===arguments.length&&(g=f,h=f,i=f);var j=b+d,k=c+e,l=e>d?2*d:2*e;f=l>f?f:l,g=l>g?g:l,h=l>h?h:l,i=l>i?i:l;var m=.29*i,n=.58*i;a.moveTo(j,k-i),a.quadraticCurveTo(j,k-n,j-m,k-m),a.quadraticCurveTo(j-n,k,j-i,k),m=.29*h,n=.58*h,a.lineTo(b+h,k),a.quadraticCurveTo(b+n,k,b+m,k-m),a.quadraticCurveTo(b,k-n,b,k-h),m=.29*f,n=.58*f,a.lineTo(b,c+f),a.quadraticCurveTo(b,c+n,b+m,c+m),a.quadraticCurveTo(b+n,c,b+f,c),m=.29*g,n=.58*g,a.lineTo(j-g,c),a.quadraticCurveTo(j-n,c,j-m,c+m),a.quadraticCurveTo(j,c+n,j,c+g),a.lineTo(j,k-i)},Tc=function(a,b,c,d,e,f,g){c=n(c),d=n(d),g||(g=1),a.fillStyle=b,a.beginPath(),a.rect(c,d,g,f),a.rect(c,d,e,g),a.rect(c,d+f-g,e,g),a.rect(c+e-g,d,g,f),a.fill()},Uc=function(a,b,c,d){var e=d.x,f=d.y,g=d.width,h=d.height;if(!(!b||!c||0>=g||0>=h)){var i,j=Vd(b),k=Wd(b),l=c>0;1===c||-1===c?(a.fillStyle=l?j:k,a.beginPath(),a.rect(e,f,1,h),a.rect(e,f,g,1),a.fill(),a.fillStyle=l?k:j,a.beginPath(),a.rect(e,f+h-1,g,1),a.rect(e+g-1,f,1,h),a.fill()):(c=s(t(c),s(g/2,h/2)),i=a.createLinearGradient(e,f,e+c,f),i.addColorStop(0,l?j:k),i.addColorStop(1,b),a.fillStyle=i,a.beginPath(),a.moveTo(e,f),a.lineTo(e+c,f+c),a.lineTo(e+c,f+h-c),a.lineTo(e,f+h),a.lineTo(e,f),a.fill(),i=a.createLinearGradient(e,f,e,f+c),i.addColorStop(0,l?j:k),i.addColorStop(1,b),a.fillStyle=i,a.beginPath(),a.moveTo(e,f),a.lineTo(e+c,f+c),a.lineTo(e+g-c,f+c),a.lineTo(e+g,f),a.lineTo(e,f),a.fill(),i=a.createLinearGradient(e,f+h,e,f+h-c),i.addColorStop(0,l?k:j),i.addColorStop(1,b),a.fillStyle=i,a.beginPath(),a.moveTo(e,f+h),a.lineTo(e+c,f+h-c),a.lineTo(e+g-c,f+h-c),a.lineTo(e+g,f+h),a.lineTo(e,f+h),a.fill(),i=a.createLinearGradient(e+g,f,e+g-c,f),i.addColorStop(0,l?k:j),i.addColorStop(1,b),a.fillStyle=i,a.beginPath(),a.moveTo(e+g,f),a.lineTo(e+g-c,f+c),a.lineTo(e+g-c,f+h-c),a.lineTo(e+g,f+h),a.lineTo(e+g,f),a.fill())}},Vc=function(a,b){if(b){var c=b.rect,d=b.color,e=b.rotation,f=b.labelWidth,g=b.background;if(e){a.save();var h=c.x+c.width/2,i=c.y+c.height/2;Nc(a,h,i),a.rotate(e),Nc(a,-h,-i)}if(g&&(a.fillStyle=g,a.beginPath(),a.rect(c.x,c.y,c.width,c.height),a.fill()),f){var j=c.width,k=a.createLinearGradient(c.x,c.y,c.x+j,c.y);k.addColorStop(0,d),k.addColorStop(.9,d),k.addColorStop(1,ab),d=k,c.width=f}ac(a,b.label,c,b.font,d),f&&(c.width=j),e&&a.restore()}},Wc=function(a,b){if(b){var c=b.rect,d=c.x,e=c.y,f=c.width,g=c.height,h=b.background,i=b.borderWidth,j=b.borderColor,k=b.labelWidth;if(b.expanded){var l=s(8,f/4),m=e+g-8;if(a.fillStyle=h,a.beginPath(),a.moveTo(d,e),a.lineTo(d,m),a.lineTo(d+f/2,m),a.lineTo(d+f/2,e+g),a.lineTo(d+f/2+l,m),a.lineTo(d+f,m),a.lineTo(d+f,e),a.closePath(),a.fill(),i&&(a.lineWidth=i,a.strokeStyle=j?j:Vd(h),a.beginPath(),a.moveTo(d+f,e),a.lineTo(d,e),a.lineTo(d,m),a.lineTo(d+f/2,m),a.lineTo(d+f/2,e+g),a.stroke(),a.strokeStyle=j?j:Wd(h),a.beginPath(),a.moveTo(d+f,e),a.lineTo(d+f,m),a.lineTo(d+f/2+l,m),a.lineTo(d+f/2,e+g),a.stroke()),c.height-=8,h=b.color,k){var n=f,o=a.createLinearGradient(d,e,d+n,e);o.addColorStop(0,h),o.addColorStop(.9,h),o.addColorStop(1,ab),h=o,c.width=k}ac(a,b.note,c,b.font,h),k&&(c.width=n),c.height+=8}else{var p=f/2;i&&(a.lineWidth=i,a.strokeStyle=j?j:Vd(h),a.beginPath(),a.arc(d+p,e+p,p,1.6*y,A,!0),a.moveTo(d+p,e+g),a.lineTo(d+p/5,e+p),a.stroke(),a.strokeStyle=j?j:Wd(h),a.beginPath(),a.arc(d+p,e+p,p,A,1.6*y,!0),a.moveTo(d+p,e+g),a.lineTo(d+f-p/5,e+p),a.stroke()),a.fillStyle=h,a.beginPath(),a.arc(d+p,e+p,p,0,z,!0),a.moveTo(d+p,e+g),a.lineTo(d+f-p/5,e+p),a.lineTo(d+p/5,e+p),a.closePath(),a.fill(),a.fillStyle=b.color,a.beginPath(),a.arc(d+p,e+p,p/3,0,z,!0),a.fill()}}},Xc=function(a,b,c,d,e,f,g){var h=a.createLinearGradient(d,e,f,g);return h.addColorStop(0,c),h.addColorStop(1,b),h},Yc=function(a,b,c,d,e,f,g){var h=a.createLinearGradient(d,e,f,g);return h.addColorStop(0,b),h.addColorStop(.5,c),h.addColorStop(1,b),h},Zc=function(a,b,c,d,e,f,g){var h=a.createLinearGradient(d,e,f,g);return h.addColorStop(0,b),h.addColorStop(1/3,c),h.addColorStop(2/3,b),h.addColorStop(1,c),h},$c=function(a,b,c,d,e,f,g,h,i){var j=a.createRadialGradient(d+f*h,e+g*i,s(f,g)/24,d+f/2,e+g/2,r(f,g)/2);return j.addColorStop(0,c),j.addColorStop(1,b),j},_c={rect:function(a,b,c,d,e){a.rect(b,c,d,e)},circle:function(a,b,c,d,e){a.arc(b+d/2,c+e/2,s(d,e)/2,0,z,!0)},oval:function(a,b,c,d,e){Rc(a,b+d/2,c+e/2,0,z,d/2,e/2,!1)},roundRect:function(a,b,c,d,e){Sc(a,b,c,d,e,s(s(d,e)/4,10))},star:function(a,b,c,d,e){var f=2*d,g=2*e,h=b+d/2,i=c+e/2;a.moveTo(h-f/4,i-g/12),a.lineTo(b+.306*d,c+.579*e),a.lineTo(h-f/6,i+g/4),a.lineTo(b+d/2,c+.733*e),a.lineTo(h+f/6,i+g/4),a.lineTo(b+.693*d,c+.579*e),a.lineTo(h+f/4,i-g/12),a.lineTo(b+.611*d,c+.332*e),a.lineTo(h+0,i-g/4),a.lineTo(b+.388*d,c+.332*e),a.closePath()},triangle:function(a,b,c,d,e){a.moveTo(b+d/2,c),a.lineTo(b+d,c+e),a.lineTo(b,c+e),a.closePath()},hexagon:function(a,b,c,d,e){a.moveTo(b,c+e/2),a.lineTo(b+d/4,c+e),a.lineTo(b+3*d/4,+c+e),a.lineTo(b+d,c+e/2),a.lineTo(b+3*d/4,c),a.lineTo(b+d/4,c),a.closePath()},pentagon:function(a,b,c,d,e){var f=2*d,g=2*e,h=b+d/2,i=c+e/2;a.moveTo(h-f/4,i-g/12),a.lineTo(h-f/6,i+g/4),a.lineTo(h+f/6,i+g/4),a.lineTo(h+f/4,i-g/12),a.lineTo(h+0,i-g/4),a.closePath()},diamond:function(a,b,c,d,e){a.moveTo(b+d/2,c),a.lineTo(b,c+e/2),a.lineTo(b+d/2,c+e),a.lineTo(b+d,c+e/2),a.closePath()},rightTriangle:function(a,b,c,d,e){a.moveTo(b,c),a.lineTo(b+d,c+e),a.lineTo(b,c+e),a.closePath()},parallelogram:function(a,b,c,d,e){var f=d/4;a.moveTo(b+f,c),a.lineTo(b+d,c),a.lineTo(b+d-f,c+e),a.lineTo(b,c+e),a.closePath()},trapezoid:function(a,b,c,d,e){var f=d/4;a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.lineTo(b+d,c+e),a.lineTo(b,c+e),a.closePath()},"linear.southwest":function(a,b,c,d,e,f,g){return Xc(a,b,c,d,e+g,d+f,e)},"linear.southeast":function(a,b,c,d,e,f,g){return Xc(a,b,c,d+f,e+g,d,e)},"linear.northwest":function(a,b,c,d,e,f,g){return Xc(a,b,c,d,e,d+f,e+g)},"linear.northeast":function(a,b,c,d,e,f,g){return Xc(a,b,c,d+f,e,d,e+g)},"linear.north":function(a,b,c,d,e,f,g){return Xc(a,b,c,d,e,d,e+g)},"linear.south":function(a,b,c,d,e,f,g){return Xc(a,b,c,d,e+g,d,e)},"linear.west":function(a,b,c,d,e,f){return Xc(a,b,c,d,e,d+f,e)},"linear.east":function(a,b,c,d,e,f){return Xc(a,b,c,d+f,e,d,e)},"radial.center":function(a,b,c,d,e,f,g){return $c(a,b,c,d,e,f,g,.5,.5)},"radial.southwest":function(a,b,c,d,e,f,g){return $c(a,b,c,d,e,f,g,.25,.75)},"radial.southeast":function(a,b,c,d,e,f,g){return $c(a,b,c,d,e,f,g,.75,.75)},"radial.northwest":function(a,b,c,d,e,f,g){return $c(a,b,c,d,e,f,g,.25,.25)},"radial.northeast":function(a,b,c,d,e,f,g){return $c(a,b,c,d,e,f,g,.75,.25)},"radial.north":function(a,b,c,d,e,f,g){return $c(a,b,c,d,e,f,g,.5,.25)},"radial.south":function(a,b,c,d,e,f,g){return $c(a,b,c,d,e,f,g,.5,.75)},"radial.west":function(a,b,c,d,e,f,g){return $c(a,b,c,d,e,f,g,.25,.5)},"radial.east":function(a,b,c,d,e,f,g){return $c(a,b,c,d,e,f,g,.75,.5)},"spread.horizontal":function(a,b,c,d,e,f){return Yc(a,b,c,d,e,d+f,e)},"spread.vertical":function(a,b,c,d,e,f,g){return Yc(a,b,c,d,e,d,e+g)},"spread.diagonal":function(a,b,c,d,e,f,g){return Yc(a,b,c,d+f,e,d,e+g)},"spread.antidiagonal":function(a,b,c,d,e,f,g){return Yc(a,b,c,d,e,d+f,e+g)},"spread.north":function(a,b,c,d,e,f,g){return Zc(a,b,c,d,e-g/4,d,e+g+g/4)},"spread.south":function(a,b,c,d,e,f,g){return Zc(a,c,b,d,e-g/4,d,e+g+g/4)},"spread.west":function(a,b,c,d,e,f){return Zc(a,b,c,d-f/4,e,d+f+f/4,e)},"spread.east":function(a,b,c,d,e,f){return Zc(a,c,b,d-f/4,e,d+f+f/4,e)}},ad=function(a){this.s=w(a),this.c=u(a)};ad.prototype.tf=function(a,b){return 1===arguments.length&&(b=a.y,a=a.x),{x:this.c*a-this.s*b,y:this.s*a+this.c*b}};var bd=function(a){var b=a.touches[0],c=a.touches[1],d=b.clientX,e=b.clientY,f=c.clientX,g=c.clientY;return q((d-f)*(d-f)+(e-g)*(e-g))},cd=function(a,b,c){for(var d=0;d<c.size();d++){var e=c.get(d);a.co(e)&&b.add(e)}for(d=0;d<c.size();d++)e=c.get(d),cd(a,b,e._children)},dd=function(a,b,c){for(var d=0;d<c.size();d++){var e=c.get(c.size()-1-d);a.co(e)&&b.add(e)}for(d=0;d<c.size();d++)e=c.get(d),dd(a,b,e._children)},ed=function(a,b,c){for(var d=!1,e=0;e<c.size();e++){var f=c.get(e);a.co(f)?d&&b.add(f):d=1}for(e=0;e<c.size();e++)f=c.get(e),ed(a,b,f._children)},fd=function(a,b,c){for(var d=!1,e=0;e<c.size();e++){var f=c.get(c.size()-1-e);a.co(f)?d&&b.add(f):d=!0}for(e=0;e<c.size();e++)f=c.get(e),fd(a,b,f._children)},gd=function(){var a={1:function(a,b){return{x:a.x-b.width/2,y:a.y-b.height/2}},2:function(a,b){return{x:a.x+b.width/2,y:a.y-b.height/2}},3:function(a,b){return{x:a.x+a.width/2,y:a.y-b.height/2}},4:function(a,b){return{x:a.x+a.width-b.width/2,y:a.y-b.height/2}},5:function(a,b){return{x:a.x+a.width+b.width/2,y:a.y-b.height/2}},6:function(a){return{x:a.x,y:a.y}},7:function(a){return{x:a.x+a.width/2,y:a.y}},8:function(a){return{x:a.x+a.width,y:a.y}},9:function(a,b){return{x:a.x-b.width/2,y:a.y+b.height/2}},10:function(a,b){return{x:a.x+b.width/2,y:a.y+b.height/2}},11:function(a,b){return{x:a.x+a.width/2,y:a.y+b.height/2}},12:function(a,b){return{x:a.x-b.width/2+a.width,y:a.y+b.height/2}},13:function(a,b){return{x:a.x+a.width+b.width/2,y:a.y+b.height/2}},14:function(a,b){return{x:a.x-b.width/2,y:a.y+a.height/2}},15:function(a){return{x:a.x,y:a.y+a.height/2}},16:function(a,b){return{x:a.x+b.width/2,y:a.y+a.height/2}},17:function(a){return{x:a.x+a.width/2,y:a.y+a.height/2}},18:function(a,b){return{x:a.x+a.width-b.width/2,y:a.y+a.height/2}},19:function(a){return{x:a.x+a.width,y:a.y+a.height/2}},20:function(a,b){return{x:a.x+a.width+b.width/2,y:a.y+a.height/2}},21:function(a,b){return{x:a.x-b.width/2,y:a.y+a.height-b.height/2}},22:function(a,b){return{x:a.x+b.width/2,y:a.y+a.height-b.height/2}},23:function(a,b){return{x:a.x+a.width/2,y:a.y+a.height-b.height/2}},24:function(a,b){return{x:a.x+a.width-b.width/2,y:a.y+a.height-b.height/2}},25:function(a,b){return{x:a.x+a.width+b.width/2,y:a.y+a.height-b.height/2}},26:function(a){return{x:a.x,y:a.y+a.height}},27:function(a){return{x:a.x+a.width/2,y:a.y+a.height}},28:function(a){return{x:a.x+a.width,y:a.y+a.height}},29:function(a,b){return{x:a.x-b.width/2,y:a.y+a.height+b.height/2}},30:function(a,b){return{x:a.x+b.width/2,y:a.y+a.height+b.height/2}},31:function(a,b){return{x:a.x+a.width/2,y:a.y+a.height+b.height/2}},32:function(a,b){return{x:a.x+a.width-b.width/2,y:a.y+a.height+b.height/2}},33:function(a,b){return{x:a.x+a.width+b.width/2,y:a.y+a.height+b.height/2}},34:function(a,b){return{x:a.x,y:a.y-b.height/2}},35:function(a,b){return{x:a.x+a.width,y:a.y-b.height/2}},36:function(a,b){return{x:a.x,y:a.y+a.height+b.height/2}},37:function(a,b){return{x:a.x+a.width,y:a.y+a.height+b.height/2}}};return function(b,c,d){return a[b](c,d?d:Eb)}}(),hd={ms_ac:function(a,b){for(var c=b.ms_ac,d=0;d<c.length;d++)hc(a,c[d])},ms_listener:function(a){a.addListeners=function(){for(var a=0;a<vb.length;a++)this["handle_"+vb[a]]&&fc(vb[a],this.getView(),this)},a.removeListeners=function(){for(var a=0;a<vb.length;a++)this["handle_"+vb[a]]&&gc(vb[a],this.getView(),this)}},ms_fire:function(a){a.mp=function(a,b,c){this.addPropertyChangeListener(a,b,c)},a.ump=function(a,b){this.removePropertyChangeListener(a,b)},a.fp=function(a,b,c){return this.firePropertyChange(a,b,c)},a.addPropertyChangeListener=function(a,b,c){this._notifier||(this._notifier=new Ye),this._notifier.add(a,b,c)},a.removePropertyChangeListener=function(a,b){this._notifier.remove(a,b)},a.firePropertyChange=function(a,b,c){if(b===c)return!1;var d={property:a,oldValue:b,newValue:c,data:this};return this._notifier&&this._notifier.fire(d),this.onPropertyChanged&&this.onPropertyChanged(d),!0}},ms_bnb:function(a){a.getBodyColor=function(a){return a.s("body.color")},a.getBorderColor=function(a){return a.s("border.color")}},ms_interaction:function(a){a.mi=function(a,b,c){this.addInteractorListener(a,b,c)},a.umi=function(a,b){this.removeInteractorListener(a,b)},a.fi=function(a){this.fireInteractorEvent(a)},a.addInteractorListener=function(a,b,c){this._interactorNotifier||(this._interactorNotifier=new Ye),this._interactorNotifier.add(a,b,c)},a.removeInteractorListener=function(a,b){this._interactorNotifier.remove(a,b)},a.fireInteractorEvent=function(a){this._interactorNotifier&&this._interactorNotifier.fire(a)},a.setInteractors=function(a){var b=this,c=b._interactors;c&&c.each(function(a){a.tearDown()}),Pb(a)&&(a=new We(a)),b._interactors=a,a&&a.each(function(a){a.setUp()}),b.fp("interactors",c,a),b.invalidateSelection()},a.getInteractors=function(){return this._interactors}},ms_painter:function(a){a._topPainters=f,a._bottomPainters=f,a.addTopPainter=function(a){var b=this;b._topPainters||(b._topPainters=new We),b._topPainters.contains(a)||(b._topPainters.add(a),b.redraw&&b.redraw())},a.removeTopPainter=function(a){var b=this;b._topPainters&&(b._topPainters.remove(a),b.redraw&&b.redraw())},a.addBottomPainter=function(a){var b=this;b._bottomPainters||(b._bottomPainters=new We),b._bottomPainters.contains(a)||(b._bottomPainters.add(a),b.redraw&&b.redraw())},a.removeBottomPainter=function(a){var b=this;b._bottomPainters&&(b._bottomPainters.remove(a),b.redraw&&b.redraw())},a.drawBottomPainters=function(a){var b=this;b._bottomPainters&&b._bottomPainters.each(function(c){c.draw?c.draw(a):c.call(b,a)})},a.drawTopPainters=function(a){var b=this;b._topPainters&&b._topPainters.each(function(c){c.draw?c.draw(a):c.call(b,a)})}},ms_sm:function(a){a.sm=function(){return this.getSelectionModel()},a.getSelectionModel=function(){return this._selectionModel?this._selectionModel:this._dataModel.sm()},a.isSelectionModelShared=function(){return!this._selectionModel},a.setSelectionModelShared=function(a){var b=!this._selectionModel,c=this.handleSelectionChange,d=this._dataModel;b!==a&&(this.invalidateSelection&&this.invalidateSelection(),a?(d.sm().ms(c,this),this._selectionModel.ums(c,this),this._selectionModel.dispose(),this._selectionModel=f):(d.sm().ums(c,this),this._selectionModel=new _e(d),this._selectionModel.ms(c,this)),this.onSelectionModelSharedChanged(),this.fp("selectionModelShared",b,a))},a.onSelectionModelSharedChanged=function(){this.redraw(),this.invalidateSelection&&this.invalidateSelection()},a.removeSelection=function(){this.sm().toSelection().each(this._dataModel.remove,this._dataModel)},a.selectAll=function(){this.sm().ss(this._dataModel.toDatas(this.isVisible,this))},a.isSelected=function(a){return this.sm().co(a)},a.isSelectable=function(a){return this.sm().isSelectable(a)}},ms_tx:function(a){a._sumWidth=0,a._translateX=0,a.isScrollable=function(){return this.getWidth()<this._sumWidth},a.getLogicalPoint=function(a){return qe(a,this._view,this.tx())},a.tx=function(a){return a===c?this.getTranslateX():(this.setTranslateX(a),void 0)},a.getTranslateX=function(){return this._translateX},a.setTranslateX=function(a){var b=this.getWidth()-this._sumWidth;b>a&&(a=b),a>0&&(a=0),a=n(a);var c=this._translateX;this._translateX=a,this.fp("translateX",c,a)}},ms_txy:function(a){a._translateX=0,a._translateY=0,a.tx=function(a){return a===c?this.getTranslateX():(this.setTranslateX(a),void 0)},a.ty=function(a){return a===c?this.getTranslateY():(this.setTranslateY(a),void 0)},a.onTranslateEnded=function(){},a.setTranslate=function(a,b,c){var d=this;if(c=Sb(c)){d._translateAnim&&d._translateAnim.stop(!0);var e=d.tx(),f=d.ty();c.action=function(c){d.setTranslate(e+(a-e)*c,f+(b-f)*c)},c.innerFunc=function(){delete d._translating,delete d._translateAnim,d.onTranslateEnded()},d._translating=1,d._translateAnim=Ud(c)}else this.tx(a),this.ty(b)},a.getTranslateX=function(){return this._translateX},a.setTranslateX=function(a){a=this.adjustTranslateX(a);var b=this._translateX;this._translateX=a,this.fp("translateX",b,a)},a.getTranslateY=function(){return this._translateY},a.setTranslateY=function(a){a=this.adjustTranslateY(a);var b=this._translateY;this._translateY=a,this.fp("translateY",b,a)},a.adjustTranslateX=function(a){return n(a)},a.adjustTranslateY=function(a){return n(a)},a.translate=function(a,b,c){this.setTranslate(this.tx()+a,this.ty()+b,c)},a.getLogicalPoint=function(a){return qe(a,this._view,this.tx(),this.ty())}},ms_dm:function(a){a.dm=function(a){return a?(this.setDataModel(a),void 0):this.getDataModel()},a.getDataModel=function(){return this._dataModel}},ms_lp:function(a){a.lp=function(a){return this.getLogicalPoint(a)}},ms_v:function(a){a.getView=function(){return this._view},a.getWidth=function(){return this._view.clientWidth},a.getHeight=function(){return this._view.clientHeight},a.setFocus=function(){mc(this._view),this.endEditing&&this.endEditing(),this.fireViewEvent("focus")},a.iv=function(a){this.invalidate(a)},a.invalidate=function(a){var b=this;b._invalidateForSafe||(b._invalidateForSafe=1,Pd(b.redraw?b.redraw:b.invalidate,b,f,3e3),a=100),b._invalidate||(b._invalidate=1,Pd(b.validate,b,f,a),b.fireViewEvent("invalidate"))},a.validate=function(){var a=this;a._invalidate&&(delete a._invalidate,0===a._view.offsetWidth&&0===a._view.offsetHeight&&a._reinvalidateCount!==f?(a._reinvalidateCount===c&&(a._reinvalidateCount=i.reinvalidateCount),a._reinvalidateCount>0?a._reinvalidateCount--:a._reinvalidateCount=f,a.iv()):(a.fireViewEvent("beforeValidate"),a.validateImpl(),a.onValidated&&a.onValidated(),a.fireViewEvent("validate"),Hb(a)))},a.layout=function(a,b,c,d){1===arguments.length?nc(this,a):nc(this,a,b,c,d)},a.addViewListener=function(a,b,c){this._viewNotifier||(this._viewNotifier=new Ye),this._viewNotifier.add(a,b,c)},a.removeViewListener=function(a,b){this._viewNotifier.remove(a,b)},a.fireViewEvent=function(a){this._viewNotifier&&(Lb(a)&&(a={kind:a}),this._viewNotifier.fire(a))}},ms_tip:function(a){a.enableToolTip=function(){var a=this;Q||a._handleToolTip||(a._handleToolTip=function(b){var c=a.getToolTip(b);c?i.toolTipContinual&&i.isToolTipShowing()?(i.showToolTip(b,c),xb&&(clearTimeout(xb.timeout),xb=null)):(i.hideToolTip(),xb||(xb={timeout:setTimeout(yb,rd)}),xb.e=b,xb.info=c,xb.time=(new Date).getTime()):(i.hideToolTip(),xb&&(clearTimeout(xb.timeout),xb=null))},a.getView().addEventListener(nb,a._handleToolTip,!1))},a.disableToolTip=function(){var a=this;a._handleToolTip&&(a.getView().removeEventListener(nb,a._handleToolTip,!1),delete a._handleToolTip)},a.getToolTip=function(a){var b=this.getDataAt(a);return b?b.getToolTip():null}},ms_zoom:function(a){a._zoom=1,a._viewRect=Eb,a.zoomIn=function(a,b){this.setZoom(this._zoom*Gd,a,b)},a.zoomOut=function(a,b){this.setZoom(this._zoom/Gd,a,b)},a.zoomReset=function(a,b){this.setZoom(1,a,b)},a.scrollZoomIn=function(a){this.setZoom(this._zoom*Hd,f,a)},a.scrollZoomOut=function(a){this.setZoom(this._zoom/Hd,f,a)},a.pinchZoomIn=function(a){this.setZoom(this._zoom*Id,f,a)},a.pinchZoomOut=function(a){this.setZoom(this._zoom/Id,f,a)},a.isValidZoomValue=function(a){return a>=Kd&&Jd>=a},a.getZoom=function(){return this._zoom},a.setZoom=function(a,b,c){var d=this;if(b=Sb(b)){d._zoomAnim&&d._zoomAnim.stop(!0);var e=d._zoom;b.action=function(b){d.setZoomImpl(e+(a-e)*b,c)},b.innerFunc=function(){delete d._zooming,delete d._zoomAnim,d.onZoomEnded()},d._zooming=1,d._zoomAnim=Ud(b)}else d.setZoomImpl(a,c)},a.setZoomImpl=function(a,b){if(this.isValidZoomValue(a)&&a!==this._zoom){this.validate();var c=this._viewRect,d=this._zoom;0!==c.width&&0!==c.height&&(b=b?b:{x:c.x+c.width/2,y:c.y+c.height/2},this.tx((b.x-c.x)*d-b.x*a),this.ty((b.y-c.y)*d-b.y*a)),this._zoom=a,this.fp("zoom",d,a)}}}};Tb(k,{gray:"#ECF0F1",lightGray:"#E2E2E2",darkGray:"#868686",shape:"#3498DB",border:"#2C3E50",highlight:"#1ABC9C",transparent:"rgba(0,0,0,0.3)",label:"#000",highlightLabel:"#FFF",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var id=k.gray,jd=k.lightGray,kd=k.darkGray,ld=k.shape,md=k.border,nd=k.highlight,od=k.transparent,pd=k.label,qd=k.highlightLabel;Tb(i,{isTouchable:Q,devicePixelRatio:a.devicePixelRatio?a.devicePixelRatio:1,callDelay:10,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,toolTipDelay:1e3,toolTipContinual:!1,lineCap:"round",lineJoin:"round",shapeGradient:"linear.northeast",animInterval:10,animFrames:12,animEasing:function(a){return a*a},labelColor:pd,labelSelectColor:qd,labelFont:(Q?"15":"12")+"px arial, sans-serif",scrollBarColor:od,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:Q?24:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,getVersion:function(){return"1.9"},getInternal:function(){return{version:i.getVersion(),currentId:i.getId(),isolating:zb,isTouchable:Q,loadingImages:Fb,loadingViews:Gb,images:Bb,classes:Ab}},getter:function(a){return(/ble$/.test(a)||/ed$/.test(a)||l[a]?"is":"get")+a.charAt(0).toUpperCase()+a.slice(1)},setter:function(a){return"set"+a.charAt(0).toUpperCase()+a.slice(1)},preventDefault:function(a){var b=a.target.tagName;("DIV"===b||"CANVAS"===b)&&(a.preventDefault(),a.preventManipulation&&a.preventManipulation())},getWindowInfo:function(){var b=e.documentElement,c=b&&(b.scrollLeft||b.scrollTop)?b:e.body;return{target:c,left:c.scrollLeft,top:c.scrollTop,width:a.innerWidth||c.clientWidth,height:a.innerHeight||c.clientHeight}},getArcInfo:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r,s=new We,v=new We;if(t(d)>2*y&&(d=2*y),k=p(t(d)/(y/4)),g=d/k,h=-g,i=-c,k>0){l=a+u(c)*e,m=b+w(-c)*f,s.add({x:l,y:m}),v.add(1);for(var x=0;k>x;x++)i+=h,j=i-h/2,n=a+u(i)*e,o=b+w(i)*f,q=a+u(j)*(e/u(h/2)),r=b+w(j)*(f/u(h/2)),s.add({x:q,y:r}),s.add({x:n,y:o}),v.add(3)}return{points:s,segments:v}},isDragging:function(){return!!pc},isLeftButton:function(a){return Q?!0:0===a.button},getTouchCount:function(a){return Q?a.touches.length:1},isDoubleClick:function(){var a=new Date,b=f,d=new Date,e=f;return function(f){if(Q){var g=f.type,h=g+"_isDoubleClick";if(f[h]===c){var i=new Date,j=fe(f);"touchstart"===g?(f[h]=b&&ge(b,j)<20&&i.getTime()-a.getTime()<500,a=i,b=j):(f[h]=e&&ge(e,j)<20&&i.getTime()-d.getTime()<500,d=i,e=j)}return f[h]}return 2===f.detail}}(),isShiftDown:function(a){return a.shiftKey},isCtrlDown:function(a){return O?a.metaKey:a.ctrlKey},getClientPoint:function(a){return Q&&(a=oc(a)),{x:a.clientX,y:a.clientY}},setImage:function(a,b,c,d){var f,g=arguments.length;return 4===g?(f=e?e.createElement("img"):{},f.src=d,b&&(f.width=b),c&&(f.height=c)):2===g?Lb(b)?(f=e?e.createElement("img"):{},f.src=b):f=b:1===g&&(f=e?e.createElement("img"):{},f.src=a),Bb[a]=f,f},setNinePatchImage:function(a,b){var c,d=arguments.length;return 2===d?Lb(b)?(c=e?e.createElement("img"):{},c.src=b,e&&(c.ninePatchImage=new Ne(c))):e&&b instanceof Image&&(c=b,c.ninePatchImage=new Ne(c)):1===d&&(c=e?e.createElement("img"):{},c.src=a,e&&(c.ninePatchImage=new Ne(c))),Bb[a]=c,c},getImage:function(a,b){if(a&&a.tagName)var d=a;else d=Bb[a],a&&d===c&&Ib(a);if(b&&d&&d.tagName){d.colors||(d.colors={});var e=d.colors[b];return e||(e=Mc(d,Lc(b),d.width,d.height),d.colors[b]=e),e}return d},getId:function(){var a=1;return function(){return++a}}(),callLater:function(a,b,c,d){return setTimeout(function(){a.apply(b,c)},d||i.callDelay)},cancelLater:function(a){clearTimeout(a)},clone:function(a){if(!a)return f;if(Pb(a))return a.slice(0);if(Ob(a)){var b,c={};for(b in a)c[b]=a[b];return c}return a},sortFunc:function(a,b){if(a===b)return 0;if(a==f&&b!=f)return 1;if(a!=f&&b==f)return-1;if(a==f&&b==f)return 0;var d,e=typeof a,g=typeof b;return e===eb&&g===eb&&(d=a.localeCompare(b)),e===ib&&g===ib&&(d=a-b),d===c&&(d=(""+a).localeCompare(""+b)),d>0?1:0>d?-1:0},getClassMap:function(){return Ab},getClass:function(b){if(Lb(b)){var c,d=Ab[b];if(!d){c=b.split("."),d=a;for(var e=0;e<c.length;e++)d=d[c[e]];Ab[b]=d}return d}return b},def:function(a,b,c){var d,e,f,g=function(){};if(g.prototype=b.prototype,d=new g,Lb(a)){if(Ab[a])throw"'"+a+"' alreay defined";f=Td(a),d.getClassName=function(){return a
}}else f=a;if(d.constructor=f,d.getClass=function(){return f},d.getSuperClass=function(){return b},c)for(e in c)hd[e]&&hd.hasOwnProperty(e)?hd[e](d,c):d[e]=c[e];f.prototype=d,f.superClass=b.prototype},startAnim:function(){var a=function(a){a.timer=Pd(a.tick,null,null,a.interval)};return function(b){return b=Sd(b),b.frame=0,b.frames=b.frames||i.animFrames,b.interval=b.interval||i.animInterval,b.easing=b.easing||i.animEasing,b.tick=function(){b.frame++,b.action(b.easing(b.frame/b.frames)),b.frame<b.frames?b.timer=Pd(b.tick,null,null,b.interval):b.stop()},b.stop=function(a){b.frame<b.frames&&a&&(b.frame=b.frames,b.action(b.easing(1))),b.innerFunc&&b.innerFunc(),b.finishFunc&&b.finishFunc(),b.timer&&(Qd(b.timer),delete b.timer)},b.delay?Pd(a,f,[b],b.delay):a(b),b}}(),setCanvas:function(a,b,c,d){d||(d=ud),null!=b&&(a.width=b*d,a.style.width=b+$),null!=c&&(a.height=c*d,a.style.height=c+$)},translateAndScale:function(a,b,c,d){Nc(a,b*ud,c*ud),d*=ud,1!==d&&a.scale(d,d)},brighter:function(a,b){return Pc(a,b?b:40)},darker:function(a,b){return Pc(a,b?b:-40)},drawShape:function(a,b,c){a.beginPath(),_c[b](a,c.x,c.y,c.width,c.height)},fillShape:function(a,b,c,d,e){var f=_c[c];a.fillStyle=f?f(a,b,d?d:"white",e.x,e.y,e.width,e.height):b},drawText:function(a,b,c,d,e,g,h,i,j){if(b!=f){var k=_b(c,b),l={y:g+i/2};l.x=j&&j!==T?j===U?e+h-k.width/2:e+h/2:e+k.width/2,ac(a,b,l,c,d)}},drawDashedLine:function(a,b,c,d,e,f){var g=e-c,h=f-d,i=q(g*g+h*h),j=i,k=0,l=!0,m=0;if(0!==i)for(g/=i,h/=i,a.moveTo(c,d);j>k;)k+=b[m],k>=j&&(k=j),l?a.lineTo(c+k*g,d+k*h):a.moveTo(c+k*g,d+k*h),l=!l,m=(m+1)%b.length},getDistance:function(a,b){var d=a.length;return b?3===d?q(G(a[0]-b[0])+G(a[1]-b[1])+G(a[2]-b[2])):2===d?q(G(a[0]-b[0])+G(a[1]-b[1])):a.z===c?q(G(b.x-a.x)+G(b.y-a.y)):q(G(b.x-a.x)+G(b.y-a.y)+G(b.z-a.z)):3===d?q(G(a[0])+G(a[1])+G(a[2])):2===d?q(G(a[0])+G(a[1])):void 0},unionPoint:function(a,b){if(!a)return f;if(2===arguments.length)return a&&b?{x:s(a.x,b.x),y:s(a.y,b.y),width:t(a.x-b.x),height:t(a.y-b.y)}:f;var d=a;if(d._as&&(d=d._as),d.length===c)return f;var e=d.length;if(0>=e)return f;for(var g=1,h=d[0],i={x:h.x,y:h.y,width:0,height:0};e>g;g++){h=d[g];var j=s(i.x,h.x),k=r(i.x+i.width,h.x),l=s(i.y,h.y),m=r(i.y+i.height,h.y);i.x=j,i.y=l,i.width=k-j,i.height=m-l}return i},unionRect:function(a,b){if(a&&!b)return Sd(a);if(!a&&b)return Sd(b);if(a&&b){var c={x:s(a.x,b.x),y:s(a.y,b.y)};return c.width=r(a.x+a.width,b.x+b.width)-c.x,c.height=r(a.y+a.height,b.y+b.height)-c.y,c}return f},containsPoint:function(a,b){return!(!a||b.x<a.x||b.y<a.y||b.x>a.x+a.width||b.y>a.y+a.height)},containsRect:function(a,b){if(!a||!b)return!1;var c=b.x,d=b.y,e=b.width,f=b.height,g=a.width,h=a.height;if(0>(g|h|e|f))return!1;var i=a.x,j=a.y;if(i>c||j>d)return!1;if(g+=i,e+=c,c>=e){if(g>=i||e>g)return!1}else if(g>=i&&e>g)return!1;if(h+=j,f+=d,d>=f){if(h>=j||f>h)return!1}else if(h>=j&&f>h)return!1;return!0},intersectsRect:function(a,b){if(!a||!b)return!1;var c=b.width,d=b.height,e=a.width,f=a.height;if(0>=e||0>=f||0>=c||0>=d)return!1;var g=b.x,h=b.y,i=a.x,j=a.y;return e+=i,f+=j,c+=g,d+=h,e>g&&f>h&&c>i&&d>j},intersection:function(a,b){if(!a||!b)return f;var c=b.x,d=b.y,e=a.x,g=a.y,h=c,i=d,j=e,k=g;return h+=b.width,i+=b.height,j+=a.width,k+=a.height,e>c&&(c=e),g>d&&(d=g),h>j&&(h=j),i>k&&(i=k),h-=c,i-=d,0>=h||0>=i?f:{x:c,y:d,width:h,height:i}},grow:function(a,b){a.x-=b,a.y-=b,a.width=a.width+2*b,a.height=a.height+2*b},moveDatas:function(a,b,c,d){var e=null==d;if(0!==b||0!==c||!e&&0!==d){var f,g,h,i,j=new We;a.each(function(a){if(a instanceof wf){var k=!0;if(h)for(f=0;f<h.size();f++)g=h.get(f),g.isHostOn(a)?(h.removeAt(f),f--,j.remove(g)):k&&(a.isHostOn(g)||a.isLoopedHostOn(g))&&(k=!1);if(i)for(f=0;f<i.size();f++)g=i.get(f),kf(g,a)?(i.removeAt(f),f--,j.remove(g)):k&&kf(a,g)&&(k=!1);k&&(j.add(a),(a._host||a._attaches)&&(h||(h=new We),h.add(a)),(a instanceof Cf||a._parent instanceof Cf)&&(i||(i=new We),i.add(a)))}else if(a instanceof Bf&&"points"===a.s("edge.type")){var l=a.s("edge.points");l&&!l.isEmpty()&&(l.each(function(a){a.x+=b,a.y+=c,e||(a.z?a.z+=d:a.z=d)}),a.fp("edge.points",!1,!0))}}),j.each(function(a){e?a.translate(b,c):a.translate3d(b,c,d)})}},getLogicalPoint:function(a,b,c,d,e,f){var g=b.getBoundingClientRect();return a=Q?oc(a):a,{x:(a.clientX-g.left+b.scrollLeft-(c||0))/(e||1),y:(a.clientY-g.top+b.scrollTop-(d||0))/(f||1)}},getToolTipDiv:function(){if(!wb){wb=jc();var a=wb.style;a.color=i.toolTipLabelColor,a.background=i.toolTipBackground,a.font=i.toolTipLabelFont,a.padding="3px 3px",a.border="1px solid "+i.toolTipBorderColor,a.borderRadius="2px",a.boxShadow="0px 0px 2px "+i.toolTipShadowColor,a.setProperty&&a.setProperty("-webkit-box-shadow","0px 0px 2px "+i.toolTipShadowColor,null)}return wb},isToolTipShowing:function(){return wb&&wb.parentNode?!0:!1},hideToolTip:function(){var a=i.getToolTipDiv();a.parentNode&&a.parentNode.removeChild(a)},showToolTip:function(a,b,c,d){if(!a||!b)return i.hideToolTip(),void 0;var f=a.target?a.clientX:a.x,g=a.target?a.clientY:a.y,h=i.getToolTipDiv();h.innerHTML=b,h.style.left=f+(null==c?12:c)+"px",h.style.top=g+(null==d?12:d)+"px",h.parentNode||e.body.appendChild(h)},rotatePoint:function(a,b,c){return new ad(a).tf(b,c)},startDragging:function(b,c){b!==pc&&(pc?Q?pc.handleWindowTouchEnd(c):pc.handleWindowMouseUp(c):Q?(a.addEventListener(rb,qc,!1),a.addEventListener(sb,rc,!1)):(a.addEventListener(nb,sc,!1),a.addEventListener(ob,tc,!1)),pc=b)},getImageMap:function(){return Bb},isIsolating:function(){return zb},setIsolating:function(a){zb=a},getRotationRect:function(a,b){if(b){var c=new ad(b),d=a.width,e=a.height,f=he([c.tf(-d/2,-e/2),c.tf(d/2,-e/2),c.tf(d/2,e/2),c.tf(-d/2,e/2)]);return f.x+=a.x+d/2,f.y+=a.y+e/2,f}return a},toBoundaries:function(a,b,c){var d=[];return te(a,b,c).forEach(function(a){var b=[];a.forEach(function(a){b.push(a.x,a.y)}),d.push(b)}),d},toPointsArray:function(a,b,c){if(a instanceof We&&(a=a._as),b instanceof We&&(b=b._as),b){c||(c=32);for(var d,e,f,g,h,i,j=[],k=null,l=0,m=0,n=b.length;n>m;m++)if(d=b[m],1===d)j.push(k=[]),k.push(a[l++]);else if(2===d)k.push(a[l++]);else if(3===d)for(e=k[k.length-1],f=a[l++],g=a[l++],i=1;c>=i;i++)k.push({x:cc(i/c,e.x,f.x,g.x),y:cc(i/c,e.y,f.y,g.y)});else if(4===d)for(e=k[k.length-1],f=a[l++],g=a[l++],h=a[l++],i=1;c>=i;i++)k.push({x:dc(i/c,e.x,f.x,g.x,h.x),y:dc(i/c,e.y,f.y,g.y,h.y)});else 5===d&&k.push(k[0]);return j}return a?[a]:[]}},!0),Tb(l,{adjustChildrenToTop:1,autoHideScrollbar:1,autoUpdate:1,firstPersonMode:1,ortho:1,specular:1},!0);var rd=i.toolTipDelay,sd=i.getter,td=i.setter,ud=i.devicePixelRatio,vd=i.autoMakeVisible,wd=i.autoHideScrollBar,xd=i.shapeGradient,yd=i.labelColor,zd=i.labelSelectColor,Ad=i.labelFont,Bd=i.scrollBarColor,Cd=i.scrollBarSize,Dd=i.scrollBarTimeout,Ed=i.scrollBarMinLength,Fd=i.scrollBarInteractiveSize,Gd=i.zoomIncrement,Hd=i.scrollZoomIncrement,Id=i.pinchZoomIncrement,Jd=i.zoomMax,Kd=i.zoomMin,Ld=i.preventDefault,Md=i.setImage,Nd=i.getImage,Od=i.getId,Pd=i.callLater,Qd=i.cancelLater,Rd=i.sortFunc,Sd=i.clone,Td=i.getClass,Ud=i.startAnim,Vd=i.brighter,Wd=i.darker,Xd=i.drawShape,Yd=i.fillShape,Zd=i.drawText,$d=i.setCanvas,_d=i.translateAndScale,ae=i.isLeftButton,be=i.getTouchCount,ce=i.isDoubleClick,de=i.isShiftDown,ee=i.isCtrlDown,fe=i.getClientPoint,ge=i.getDistance,he=i.unionPoint,ie=i.unionRect,je=i.containsPoint,ke=i.containsRect,le=i.intersectsRect,me=i.intersection,ne=i.getWindowInfo,oe=i.grow,pe=i.moveDatas,qe=i.getLogicalPoint,re=i.rotatePoint,se=i.startDragging,te=i.toPointsArray,ue=i.getRotationRect,ve=i.def,we=function(a,b,c){ve(d+"."+a,b,c)};if(Tb(i,{toolTipLabelColor:zd,toolTipLabelFont:Ad,toolTipBorderColor:zd,toolTipBackground:md,toolTipShadowColor:od},!0),a.addEventListener){var xe={};i.getKeyCodeMap=function(){return xe},a.addEventListener(ub,function(a){delete xe[a.keyCode]},!1),a.addEventListener(tb,function(a){xe[a.keyCode]=!0},!1)}var ye=1e-6,ze="undefined"!=typeof Uint16Array?Uint16Array:Array,Ae="undefined"!=typeof Float32Array?Float32Array:Array,Be=function(a,b,c){var d=[a[0]-b[0],a[1]-b[1],a[2]-b[2]];if(c){var e=ge(d);e>0&&(d[0]/=e,d[1]/=e,d[2]/=e)}return d},Ce=function(a){return[-a[0],-a[1],-a[2]]},De=function(a,b){return 3===a.length?a[0]*b[0]+a[1]*b[1]+a[2]*b[2]:a[0]*b[0]+a[1]*b[1]},Ee=function(){var a=new Ae(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},Fe=Ee(),Ge=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},He=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},Ie=function(a,b){var c=a[0],d=a[1],e=a[2];return a[0]=b[0]*c+b[4]*d+b[8]*e+b[12],a[1]=b[1]*c+b[5]*d+b[9]*e+b[13],a[2]=b[2]*c+b[6]*d+b[10]*e+b[14],a},Je=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];return a[0]=b[0]*c+b[4]*d+b[8]*e+b[12]*f,a[1]=b[1]*c+b[5]*d+b[9]*e+b[13]*f,a[2]=b[2]*c+b[6]*d+b[10]*e+b[14]*f,a[3]=b[3]*c+b[7]*d+b[11]*e+b[15]*f,a},Ke=function(a,b){if(b){var c=w(b),d=u(b),e=a[4],f=a[5],g=a[6],h=a[7],i=a[8],j=a[9],k=a[10],l=a[11];a[4]=e*d+i*c,a[5]=f*d+j*c,a[6]=g*d+k*c,a[7]=h*d+l*c,a[8]=i*d-e*c,a[9]=j*d-f*c,a[10]=k*d-g*c,a[11]=l*d-h*c}},Le=function(a,b){if(b){var c=w(b),d=u(b),e=a[0],f=a[1],g=a[2],h=a[3],i=a[8],j=a[9],k=a[10],l=a[11];a[0]=e*d-i*c,a[1]=f*d-j*c,a[2]=g*d-k*c,a[3]=h*d-l*c,a[8]=e*c+i*d,a[9]=f*c+j*d,a[10]=g*c+k*d,a[11]=h*c+l*d}},Me=function(a,b){if(b){var c=w(b),d=u(b),e=a[0],f=a[1],g=a[2],h=a[3],i=a[4],j=a[5],k=a[6],l=a[7];a[0]=e*d+i*c,a[1]=f*d+j*c,a[2]=g*d+k*c,a[3]=h*d+l*c,a[4]=i*d-e*c,a[5]=j*d-f*c,a[6]=k*d-g*c,a[7]=l*d-h*c}},Ne=function(a){this.image=a;var b=this;a.width&&a.height?(b.width=a.width,b.height=a.height,b._init()):a.onload=function(){b.width=a.width,b.height=a.height,b._init(),a.onload=null}};Ne.prototype._init=function(){this.hc=this._getChunk(this.width,1),this.vc=this._getChunk(1,this.height)},Ne.prototype._getChunk=function(a,b){var c,d,f,g,h,i,j,k,l=e.createElement("canvas"),m=1,n=[],o=0;for(l.width=a,l.height=b,c=l.getContext("2d"),c.drawImage(this.image,0,0,a,b,0,0,a,b),d=c.getImageData(0,0,a,b).data,g=!!d[7],i=8,j=d.length-4;j>i;i+=4)h=!!d[i+3],g!==h&&(f=i/4,g&&(o+=f-m),n.push({stretch:g,start:m,end:f}),m=f,g=h);for(f=j/4,g&&(o+=f-m),n.push({stretch:g,start:m,end:f}),i=0;i<n.length;i++)k=n[i],k.stretch&&(k.stretch=(k.end-k.start)/o);return{chunks:n,totalStretch:o}},Ne.prototype.draw=function(a,b,c,d,e){if(this.width&&this.width){var f,g,h,i,j,k,l=0,m=0,n=this.hc.chunks,o=this.vc.chunks,p=n.length,q=o.length,r=d-(this.width-this.hc.totalStretch-2),s=e-(this.height-this.vc.totalStretch-2),t=this.image,u=1,v=1,w=b,x=c;for(d<this.width&&(n=[{stretch:1,start:1,end:this.width-1}],r=d,p=1),e<this.height&&(o=[{stretch:1,start:1,end:this.height-1}],s=e,q=1),l=0;p>l;l++){for(f=n[l],h=f.end-f.start,j=f.stretch?f.stretch*r:h,v=1,x=c,m=0;q>m;m++)g=o[m],i=g.end-g.start,k=g.stretch?g.stretch*s:i,a.drawImage(t,u,v,h,i,w,x,j,k),v+=i,x+=k;u+=h,w+=j}}};var Oe=function(a,b,c){this.g=a,this.onLength=b,this.offLength=c,this.isLine=!0,this.overflow=0,this.dashLength=b+c,this.pen={x:0,y:0}},Pe=function(a,b){return b&&b.length>0?new Oe(a,b[0],b.length>1?b[1]:b[0]):a};ve(Oe,b,{_curveaccuracy:6,moveTo:function(a,b){this.pen.x=a,this.pen.y=b,this.g.moveTo(a,b),this.start||(this.start={x:a,y:b})},lineTo:function(a,b){var c=this.pen,d=a-c.x,e=b-c.y,f=D(e,d),g=u(f),h=w(f),i=this.lineLength(c.x,c.y,a,b),j=this.offLength,k=this.onLength,l=this.dashLength;if(this.overflow){if(this.overflow>i)return this.isLine?this._lineTo(a,b):this.moveTo(a,b),this.overflow-=i,void 0;if(this.isLine?this._lineTo(c.x+g*this.overflow,c.y+h*this.overflow):this.moveTo(c.x+g*this.overflow,c.y+h*this.overflow),i-=this.overflow,this.overflow=0,this.isLine=!this.isLine,!i)return}var m=o(i/l);if(m){for(var n=g*k,p=h*k,q=g*j,r=h*j,s=0;m>s;s++)this.isLine?(this._lineTo(c.x+n,c.y+p),this.moveTo(c.x+q,c.y+r)):(this.moveTo(c.x+q,c.y+r),this._lineTo(c.x+n,c.y+p));i-=l*m}this.isLine?i>k?(this._lineTo(c.x+g*k,c.y+h*k),this.moveTo(a,b),this.overflow=j-(i-k),this.isLine=!1):(this._lineTo(a,b),i===k?(this.overflow=0,this.isLine=!this.isLine):(this.overflow=k-i,this.moveTo(a,b))):i>j?(this.moveTo(c.x+g*j,c.y+h*j),this._lineTo(a,b),this.overflow=k-(i-j),this.isLine=!0):(this.moveTo(a,b),i===j?(this.overflow=0,this.isLine=!this.isLine):this.overflow=j-i)},quadraticCurveTo:function(a,b,c,d){var e,f=this.pen.x,g=this.pen.y,h=this.curveLength(f,g,a,b,c,d),i=0,j=0,k=this.offLength,l=this.onLength;if(this.overflow){if(this.overflow>h)return this.isLine?this._curveTo(a,b,c,d):this.moveTo(c,d),this.overflow-=h,void 0;if(i=this.overflow/h,e=this.curveSliceUpTo(f,g,a,b,c,d,i),this.isLine?this._curveTo(e[2],e[3],e[4],e[5]):this.moveTo(e[4],e[5]),this.overflow=0,this.isLine=!this.isLine,!h)return}var m=h-h*i,n=o(m/this.dashLength),p=l/h,q=k/h;if(n)for(var r=0;n>r;r++)this.isLine?(j=i+p,e=this.curveSlice(f,g,a,b,c,d,i,j),this._curveTo(e[2],e[3],e[4],e[5]),i=j,j=i+q,e=this.curveSlice(f,g,a,b,c,d,i,j),this.moveTo(e[4],e[5])):(j=i+q,e=this.curveSlice(f,g,a,b,c,d,i,j),this.moveTo(e[4],e[5]),i=j,j=i+p,e=this.curveSlice(f,g,a,b,c,d,i,j),this._curveTo(e[2],e[3],e[4],e[5])),i=j;m=h-h*i,this.isLine?m>l?(j=i+p,e=this.curveSlice(f,g,a,b,c,d,i,j),this._curveTo(e[2],e[3],e[4],e[5]),this.moveTo(c,d),this.overflow=k-(m-l),this.isLine=!1):(e=this.curveSliceFrom(f,g,a,b,c,d,i),this._curveTo(e[2],e[3],e[4],e[5]),h===l?(this.overflow=0,this.isLine=!this.isLine):(this.overflow=l-m,this.moveTo(c,d))):m>k?(j=i+q,e=this.curveSlice(f,g,a,b,c,d,i,j),this.moveTo(e[4],e[5]),e=this.curveSliceFrom(f,g,a,b,c,d,j),this._curveTo(e[2],e[3],e[4],e[5]),this.overflow=l-(m-k),this.isLine=!0):(this.moveTo(c,d),m===k?(this.overflow=0,this.isLine=!this.isLine):this.overflow=k-m)},bezierCurveTo:function(){var a=arguments;this.pen={x:a[4],y:a[5]},this.g.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])},arc:function(){var a=arguments;Rc(this,a[0],a[1],a[3],a[4],a[2],a[2],!1)},rect:function(a,b,c,d){this.pen={x:a,y:b},this.moveTo(a,b),this.lineTo(a,b+d),this.lineTo(a+c,b+d),this.lineTo(a+c,b),this.lineTo(a,b)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},lineLength:function(a,b,c,d){var e=c-a,f=d-b;return q(e*e+f*f)},curveLength:function(a,b,c,d,e,f,g){for(var h,i,j,k,l,m,n,o=0,p=a,q=b,r=g>0?g:this._curveaccuracy,s=1;r>=s;s++)j=s/r,k=1-j,l=k*k,m=2*j*k,n=j*j,h=l*a+m*c+n*e,i=l*b+m*d+n*f,o+=this.lineLength(p,q,h,i),p=h,q=i;return o},curveSlice:function(a,b,c,d,e,f,g,h){if(0===g)return this.curveSliceUpTo(a,b,c,d,e,f,h);if(1===h)return this.curveSliceFrom(a,b,c,d,e,f,g);var i=this.curveSliceUpTo(a,b,c,d,e,f,h);return i.push(g/h),this.curveSliceFrom.apply(this,i)},curveSliceUpTo:function(a,b,c,d,e,f,g){if(1!==g){var h=c+(e-c)*g,i=d+(f-d)*g;c=a+(c-a)*g,d=b+(d-b)*g,e=c+(h-c)*g,f=d+(i-d)*g}return[a,b,c,d,e,f]},curveSliceFrom:function(a,b,c,d,e,f,g){if(1!==g){var h=a+(c-a)*g,i=b+(d-b)*g;c+=(e-c)*g,d+=(f-d)*g,a=h+(c-h)*g,b=i+(d-i)*g}return[a,b,c,d,e,f]},_lineTo:function(a,b){(a!==this.pen.x||b!==this.pen.y)&&(this.pen.x=a,this.pen.y=b,this.g.lineTo(a,b))},_curveTo:function(a,b,c,d){(a!==c||b!==d||c!==this.pen.x||d!==this.pen.y)&&(this.pen.x=c,this.pen.y=d,this.g.quadraticCurveTo(a,b,c,d))}});var Qe=k.chart,Re=i.compStack=[],Se=function(a,b){var c=a.width;return c.func&&(c=Ue(b,f,c.func,c.value)),c},Te=function(a,b){var c=a.height;return c.func&&(c=Ue(b,f,c.func,c.value)),c},Ue=function(a,b,d,e){var f;return f=Qb(d)?d(a,b):a?/^style@/.test(d)?a.s(d.slice(6)):/^attr@/.test(d)?a.a(d.slice(5)):/^field@/.test(d)?a[d.slice(6)]:a[d]?a[d](b):e:e,f===c?e:f},Ve=i.drawImage=function(){var a,b,c,d,e,g=function(a,d,e){var f=a[d];return f&&f.func?(f=Ue(b,c,f.func,f.value),e&&(f=e(f))):e&&(f=a[d]=e(f)),f},h=function(a,b){var c=g(a,b);if(e&&c){var d=Lc(e);return c=Kc(c),"rgba("+o(c[0]*d[0])+","+o(c[1]*d[1])+","+o(c[2]*d[2])+","+c[3]+")"}return c},i=function(a){if(Pb(a)){for(var b=new We,c=a.length,d=0;c>d;d+=2)b.add({x:a[d],y:a[d+1]});a=b}return a},j=function(a,b){var c=g(a,"rect");if(Pb(c)){var d=c.length,e=g(a,"relative"),f=b.width,h=b.height;if(4===d)c={x:c[0],y:c[1],width:c[2],height:c[3]},e&&(c.x*=f,c.y*=h,c.width*=f,c.height*=h);else if(3===d){var i=c[0];c={width:c[1],height:c[2]},e&&(c.width*=f,c.height*=h),i=gd(i,b,c),c.x=i.x-c.width/2,c.y=i.y-c.height/2}var j=g(a,"offsetX");j&&(c.x+=j),j=g(a,"offsetY"),j&&(c.y+=j)}return c},k=function(a){return Pb(a)?new We(a):a},l=function(b,c){if(b){var d=c.x+c.width/2,e=c.y+c.height/2;a.save(),Nc(a,d,e),a.rotate(b),Nc(a,-d,-e)}},m=function(b){b&&a.restore()},n=function(b,c,e){var f=g(b,"points",i),j=g(b,"rotation"),n="shape"===c,o=null;if(!e&&n&&(e=b.unionRect,e||(e=he(f),b.points.func||(b.unionRect=e)),o=e),e){n?o||(o=b.unionRect,o||(o=he(f),b.points.func||(b.unionRect=o))):o=e;var p=Wb(o,e);if(p)l(j,o);else{var q=o.width,r=o.height,s=e.width,t=e.height,u=s/q,v=t/r;a.save(),Nc(a,e.x+s/2,e.y+t/2),a.scale(u,v),j&&a.rotate(j),Nc(a,-o.x-q/2,-o.y-r/2)}var w=Pe(a,g(b,"pattern")),x=h(b,"background"),y=h(b,"borderColor"),z=g(b,"borderWidth"),A=g(b,"segments",k),B=g(b,"gradient"),C=h(b,"gradientColor"),D=g(b,"border3d"),E=g(b,"border3dColor"),F=g(b,"border3dAccuracy");n?(x?(Yd(a,x,B,C,o),Qc(a,f,A),a.fill(),w!==a&&Qc(w,f,A)):Qc(w,f,A),z&&(a.strokeStyle=y,a.lineWidth=z,a.stroke(),D&&Oc(a,y,E,z,d,F))):(x?(Yd(a,x,B,C,o),Xd(a,c,o),a.fill(),a!==w&&Xd(w,c,o)):Xd(w,c,o),z&&(a.lineWidth=z,a.strokeStyle=y,a.stroke(),D&&Oc(a,y,E,z,d,F)),Uc(a,x,g(b,"depth"),o)),p?m(j):a.restore()}},p=function(d,f){var h=e,i=e||g(d,"color"),j=Nd(g(d,"name"),i);j&&(Ve(a,j,f.x,f.y,f.width,f.height,b,c,i),e=h)},q=function(b,c){var d=g(b,"text");d&&Zd(a,d,g(b,"font"),h(b,"color"),c.x,c.y,c.width,c.height,g(b,"align"))},t=function(c,d){var e=g(c,"values"),h=0;if(e&&(e.forEach(function(a){h+=a}),h>0)){for(var i=g(c,"colors")||Qe,j=g(c,"startAngle")||0,k=g(c,"hollow"),l=g(c,"label"),m=g(c,"labelFont"),n=g(c,"labelColor"),o=l?new We:f,p=d.x,q=d.y,r=d.width,t=d.height,v=p+r/2,x=q+t/2,y=s(r,t)/2,A=0,B=0;B<e.length;B++){var C=e[B],D=z*C/h,E=j+D;if(a.fillStyle=i[A++],A===i.length&&(A=0),a.beginPath(),k){var F=v+u(j)*y/2,G=x+w(j)*y/2,H=v+u(E)*y,I=x+w(E)*y;a.moveTo(F,G),a.arc(v,x,y/2,j,E,!1),a.lineTo(H,I),a.arc(v,x,y,E,j,!0)}else a.moveTo(v,x),a.arc(v,x,y,E,j,!0);o&&(D=(j+E)/2,o.add({text:Qb(l)?l(C,B,h,b):C,x:v+.75*u(D)*y,y:x+.75*w(D)*y})),a.closePath(),a.fill(),j=E}o&&o.each(function(b){Zd(a,b.text,m,n,b.x,b.y,0,0,X)})}},v=function(c,d){var e=g(c,"series");if(e&&e.length>0){var h=e.length,i=g(c,"label"),j=g(c,"labelFont"),k=g(c,"labelColor"),l=i?new We:f,m=g(c,"minValue")||0,n=g(c,"maxValue");if(n==f&&(n=0,e.forEach(function(a){a.values.forEach(function(a){n=r(n,a)})})),m===n)return;for(var o=d.height/(n-m),p=d.y+n*o,q=g(e[0],"values").length,s=d.width/(3*q+1),t=2*s/h,u=0,v=0;h>v;v++)for(var w=e[v],x=g(w,"color"),y=g(w,"colors"),z=g(w,"values"),A=0;q>A;A++){y?a.fillStyle=y[A]:x?a.fillStyle=x:(a.fillStyle=Qe[u++],u===Qe.length&&(u=0)),a.beginPath();var B=z[A],C=B*o,D=d.x+(1+3*A)*s+v*t;if(a.rect(D,p-C,t,C),a.closePath(),a.fill(),l){var E=Qb(i)?i(B,A,w,b):B,F=_b(j,E).height;l.add({x:D,y:p-C-F,width:t,height:F,text:E})}}l&&l.each(function(b){Zd(a,b.text,j,k,b.x,b.y,b.width,b.height,X)})}},x=function(c,d){var e=g(c,"series");if(e&&e.length>0){var h=e.length,i=g(e[0],"values").length,j=d.width/(3*i+1),k=0,l=g(c,"maxValue"),m=g(c,"label"),n=g(c,"labelFont"),o=g(c,"labelColor"),p=m?new We:f;if(l==f){l=0;for(var q=0;i>q;q++){for(var s=0,t=0;h>t;t++)s+=g(e[t],"values")[q];l=r(l,s)}}if(l>0){for(var q=0;i>q;q++)for(var u=d.y+d.height,t=0;h>t;t++){var v=e[t],w=g(v,"color"),x=g(v,"values")[q],y=x/l*d.height;w?a.fillStyle=w:(a.fillStyle=Qe[k++],k===Qe.length&&(k=0)),u-=y;var z={x:d.x+(1+3*q)*j,y:u,width:2*j,height:y};a.beginPath(),a.rect(z.x,z.y,z.width,z.height),a.closePath(),a.fill(),p&&(z.text=Qb(m)?m(x,q,v,b):x,p.add(z))}p&&p.each(function(b){Zd(a,b.text,n,o,b.x,b.y,b.width,b.height,X)})}}},y=function(c,d){var e=g(c,"series");if(e&&e.length>0){for(var h=e.length,i=g(e[0],"values").length,j=d.width/(3*i+1),k=0,l=g(c,"label"),m=g(c,"labelFont"),n=g(c,"labelColor"),o=l?new We:f,p=0;i>p;p++){for(var q=0,r=0;h>r;r++)q+=g(e[r],"values")[p];if(q>0){var s=d.y+d.height;for(r=0;h>r;r++){var t=e[r],u=g(t,"color"),v=g(t,"values")[p],w=v/q*d.height;u?a.fillStyle=u:(a.fillStyle=Qe[k++],k===Qe.length&&(k=0)),s-=w;var x={x:d.x+(1+3*p)*j,y:s,width:2*j,height:w};a.beginPath(),a.rect(x.x,x.y,x.width,x.height),a.closePath(),a.fill(),o&&(x.text=Qb(l)?l(v,p,t,b):v,o.add(x))}}}o&&o.each(function(b){Zd(a,b.text,m,n,b.x,b.y,b.width,b.height,X)})}},A=function(c,e){var h=g(c,"series");if(h&&h.length>0){var i=h.length,j=g(c,"minValue")||0,k=g(c,"maxValue");if(k==f&&(k=0,h.forEach(function(a){a.values.forEach(function(a){k=r(k,a)})})),j===k)return;for(var l=e.height/(k-j),m=e.y+k*l,n=g(h[0],"values").length,o=e.width/(3*n+1),p=0,q=g(c,"lineWidth")||2,s=g(c,"line3d"),t=g(c,"linePoint"),u=g(c,"label"),v=g(c,"labelFont"),w=g(c,"labelColor"),x=0;i>x;x++){var y=h[x],A=g(y,"color"),B=g(y,"values");A?a.strokeStyle=A:(A=a.strokeStyle=Qe[p++],p===Qe.length&&(p=0)),a.beginPath();for(var C=0;n>C;C++){var D=e.x+(2+3*C)*o,E=m-B[C]*l;0===C?a.moveTo(D,E):a.lineTo(D,E)}if(a.lineWidth=q,a.stroke(),s&&Oc(a,A,null,q,d),t||u){var F,G=q/2+2;for(C=0;n>C;C++){var H=B[C];if(D=e.x+(2+3*C)*o,E=m-H*l,Qb(t)?t(a,D,E,A,C,y,b):t&&(a.fillStyle=A,a.beginPath(),a.arc(D,E,G,0,z,!0),a.fill()),Qb(u)?F=u(H,C,y,b):u&&(F=H),F){var I=_b(v,F).height,J=a.shadowBlur;if(J){var K=a.shadowOffsetX,L=a.shadowOffsetY,M=a.shadowColor;a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0,a.shadowColor=f}Zd(a,F,v,w,D,E-I-G+2,0,I,X),J&&(a.shadowOffsetX=K,a.shadowOffsetY=L,a.shadowColor=M,a.shadowBlur=J)}}}}}},B={image:p,text:q,pieChart:t,columnChart:v,stackedColumnChart:x,percentageColumnChart:y,lineChart:A};return function(h,i,k,o,p,q,r,s,t){if(a=h,b=r,c=s,d=c?c._zoom?c._zoom:1:1,e=t,i&&p&&q){if(i.tagName)return i.ninePatchImage?i.ninePatchImage.draw(a,k,o,p,q):a.drawImage(i,k,o,p,q),void 0;e||(e=i.color,e&&e.func&&(e=Ue(b,c,e.func,e.value)));var u=Se(i,b),v=Te(i,b),w={x:0,y:0,width:u,height:v},x=i.clip;a.save(),Nc(a,k,o),(u!==p||v!==q)&&a.scale(p/u,q/v),x&&(Qb(x)?x(a,u,v,b,c,i):(a.beginPath(),a.rect(0,0,u,v),a.clip())),i.comps.forEach(function(b){if(g(b,"visible")!==!1){Re.splice(0,0,b);var c=g(b,"alpha");if(c!=f){var d=a.globalAlpha;a.globalAlpha*=c}var e=g(b,"shadow");if(e){var h=a.shadowOffsetX,i=a.shadowOffsetY,k=a.shadowBlur,o=a.shadowColor,p=g(b,"shadowOffsetX"),q=g(b,"shadowOffsetY"),r=g(b,"shadowBlur"),s=g(b,"shadowColor");a.shadowOffsetX=p==f?3:p,a.shadowOffsetY=q==f?3:q,a.shadowBlur=r==f?6:r,a.shadowColor=s==f?od:s}var t=g(b,"type"),u=j(b,w);if(_c[t]||"shape"===t)n(b,t,u);else if(B[t]&&u){var v=g(b,"rotation");l(v,u),B[t](b,u),m(v)}e&&(a.shadowOffsetX=h,a.shadowOffsetY=i,a.shadowBlur=k,a.shadowColor=o),c!=f&&(a.globalAlpha=d),Re.splice(0,1)}}),a.restore()}}}();i.getCurrentComp=function(){return Re[0]},i.getParentComp=function(){return Re[1]};var We=g.List=function(){this._as=[];var a,b,c=arguments.length;if(1===c){var d=arguments[0];if(d instanceof We&&(d=d._as),Pb(d))for(b=d.length,a=0;b>a;a++)this._as.push(d[a]);else d!=f&&this._as.push(d)}else if(c>1)for(a=0;c>a;a++)this._as.push(arguments[a])};we("List",b,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(a,b){return b===c?this._as.push(a):this._as.splice(b,0,a)},addAll:function(a){a instanceof We&&(a=a._as),Pb(a)?Rb(this._as,a):this._as.push(a)},get:function(a){return this._as[a]},slice:function(a,b){return new We(this._as.slice(a,b))},remove:function(a){var b=this._as.indexOf(a);return b>=0&&b<this._as.length&&this.removeAt(b),b},removeAt:function(a){return this._as.splice(a,1)[0]},set:function(a,b){return this._as[a]=b},clear:function(){return this._as.splice(0,this._as.length)},contains:function(a){return this._as.indexOf(a)>=0},indexOf:function(a){return this._as.indexOf(a)},each:function(a,b){for(var c=0,d=this._as.length;d>c;c++){var e=this._as[c];b?a.call(b,e):a(e)}},reverseEach:function(a,b){for(var c=this._as.length-1;c>=0;c--){var d=this._as[c];b?a.call(b,d):a(d)}},toArray:function(a,b){if(a){for(var c,d=[],e=0,f=this._as.length;f>e;e++)c=this._as[e],b?a.call(b,c)&&d.push(c):a(c)&&d.push(c);return d}return this._as.concat()},toList:function(a,b){if(a){for(var c,d=new We,e=0,f=this._as.length;f>e;e++)c=this._as[e],b?a.call(b,c)&&d.add(c):a(c)&&d.add(c);return d}return new We(this)},sort:function(a){return this._as.sort(a?a:Rd),this},toString:function(){return this._as.toString()}});var Xe=new We;Tb(Xe,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:Cb,each:Cb,reverseEach:Cb,toArray:function(){return[]},toList:function(){return new We},add:Db,addAll:Db,set:Db,remove:Db,removeAt:Db,clear:Db});var Ye=g.Notifier=function(){};we("Notifier",b,{contains:function(a,b){if(this._ls)for(var c,d=0,e=this._ls.size();e>d;d++)if(c=this._ls.get(d),a===c.l&&b===c.s)return!0;return!1},add:function(a,b,c){var d={l:a,s:b,a:c};this._ls||(this._ls=new We),this._f?(this._as||(this._as=new We),this._as.add(d)):d.a?this._ls.add(d,0):this._ls.add(d)},remove:function(a,b){this._ls&&(this._f?(this._rs||(this._rs=new We),this._rs.add({l:a,s:b})):this._remove(a,b))},_remove:function(a,b){for(var c,d=0,e=this._ls.size();e>d;d++)if(c=this._ls.get(d),c.l===a&&c.s===b)return this._ls.removeAt(d),void 0},fire:function(a){var b=this._ls;if(b){this._f=1;for(var c,d=0,e=b.size();e>d;d++)c=b.get(d),c.s?c.l.call(c.s,a):c.l(a);if(delete this._f,this._rs){for(e=this._rs.size(),d=0;e>d;d++)c=this._rs.get(d),this._remove(c.l,c.s);delete this._rs}if(this._as){for(e=this._as.size(),d=0;e>d;d++)c=this._as.get(d),c.a?b.add(c,0):b.add(c);delete this._as}}}});var Ze=g.Data=function(){this._id=Od()};we("Data",b,{ms_dm:1,ms_ac:["name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop"],_icon:f,_parent:f,_children:Xe,_childMap:f,_styleMap:f,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return f},get3dUIClass:function(){return f},s:function(a,b){if(2===arguments.length)this.setStyle(a,b);else{if(!Ob(a))return this.getStyle(a);for(var c in a)this.setStyle(c,a[c])}return this},a:function(a,b){if(2===arguments.length)this.setAttr(a,b);else{if(!Ob(a))return this.getAttr(a);for(var c in a)this.setAttr(c,a[c])}return this},fp:function(a,b,c){return this.firePropertyChange(a,b,c)},firePropertyChange:function(a,b,c){if(b===c)return!1;var d={property:a,oldValue:b,newValue:c,data:this};return this._dataModel&&this._dataModel.handleDataPropertyChange(d),this.onPropertyChanged(d),!0},onPropertyChanged:function(){},_setDataModel:function(a){if(a&&this._dataModel)throw"'"+this+"' belongs to another data model";this._dataModel=a},getId:function(){return this._id},setId:function(a){this._id=a},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(a,b){return this._children.toList(a,b)},eachChild:function(a,b){this._children.each(a,b)},addChild:function(a,b){a!==this&&(this._children===Xe&&(this._children=new We,this._childMap={}),b===c&&(b=this._children.size()),this._childMap[a._id]||this.isDescendantOf(a)||(a._parent&&a._parent.removeChild(a),(0>b||b>this._children.size())&&(b=this._children.size()),this._children.add(a,b),this._childMap[a._id]=a,a.setParent(this),this.onChildAdded(a,b),this.fp("children",f,a)))},onChildAdded:function(){},removeChild:function(a){if(this._childMap&&this._childMap[a._id]){var b=this._children.remove(a);delete this._childMap[a._id],this.fp("children",a,f),a.setParent(f),this.onChildRemoved(a,b)}},onChildRemoved:function(){},getChildAt:function(a){return this._children.get(a)},clearChildren:function(){if(!this._children.isEmpty())for(var a=0,b=this._children.toArray(),c=b.length;c>a;a++)this.removeChild(b[a])},getParent:function(){return this._parent},setParent:function(a){if(!(this._updatingParent||this._parent===a||this===a||a&&a.isDescendantOf(this))){var b=this._parent;this._parent=a,this._updatingParent=1,b&&b.removeChild(this),a&&a.addChild(this),delete this._updatingParent,this.fp("parent",b,a),this.onParentChanged(b,a)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(a){return a?this.isDescendantOf(a)||a.isDescendantOf(this):!1},isParentOf:function(a){return a&&this._childMap?!!this._childMap[a._id]:!1},isDescendantOf:function(a){if(!a||a.isEmpty())return!1;for(var b=this._parent;b;){if(a===b)return!0;b=b._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(a,b){b===c&&(b=1);var d=this._styleMap?this._styleMap[a]:c;return d===c&&b?j[a]:d},setStyle:function(a,b){this._styleMap||(this._styleMap={});var c=this._styleMap[a];this._styleMap[a]=b,this.fp("s:"+a,c,b)&&this.onStyleChanged(a,c,b)},onStyleChanged:function(){},getAttr:function(a){return this._attrObject?this._attrObject[a]:c},setAttr:function(a,b){this._attrObject||(this._attrObject={});var c=this._attrObject[a];this._attrObject[a]=b,this.fp("a:"+a,c,b)&&this.onAttrChanged(a,c,b)},onAttrChanged:function(){},invalidate:function(){this.fp("*",!1,!0)},toString:function(){return this.toLabel()},toLabel:function(){return this._displayName!=f?this._displayName:this._name},addStyleIcon:function(a,b){var c=this.s("icons");c||this.s("icons",c={}),c[a]=b,this.fp("icons",f,c)},removeStyleIcon:function(a){var b=this.s("icons");if(b){var c=b[a];delete b[a],this.fp("icons",f,b)}return c}});var $e=g.DataModel=function(){this._datas=new We,this._dataMap={},this._roots=new We,this._rootMap={},this._dataModelNotifier=new Ye,this._dataNotifier=new Ye,this._selectionModel=new _e(this)};we("DataModel",b,{sm:function(){return this.getSelectionModel()},mm:function(a,b,c){this.addDataModelChangeListener(a,b,c)},umm:function(a,b){this.removeDataModelChangeListener(a,b)},md:function(a,b,c){this.addDataPropertyChangeListener(a,b,c)},umd:function(a,b){this.removeDataPropertyChangeListener(a,b)},mh:function(a,b,c){this.addHierarchyChangeListener(a,b,c)},umh:function(a,b){this.removeHierarchyChangeListener(a,b)},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(a){return this._dataMap[a]},toDatas:function(a,b){return this._datas.toList(a,b)},each:function(a,b){this._datas.each(a,b)},add:function(a,b){var c=a._id;if(this._dataMap[c])throw"'"+c+"' already exists";this._dataMap[c]=a,this._datas.add(a),a._parent||(this._rootMap[c]=a,b>=0?this._roots.add(a,b):this._roots.add(a)),a._setDataModel(this),this.onAdded(a),this._dataModelNotifier.fire({kind:"add",data:a})},onAdded:function(){},remove:function(a){if(a._dataModel===this){this.prepareRemove(a),a.toChildren().each(this.remove,this),a._parent&&a._parent.removeChild(a);var b=a._id;this._datas.remove(a),delete this._dataMap[b],this._rootMap[b]&&(delete this._rootMap[b],this._roots.remove(a)),a._setDataModel(f),this.onRemoved(a),this._dataModelNotifier.fire({kind:"remove",data:a})}},onRemoved:function(){},prepareRemove:function(){},clear:function(){this._datas.size()>0&&(this._datas.each(function(a){a._setDataModel(f)},this),this._datas.clear(),this._dataMap={},this._roots.clear(),this._rootMap={},this._dataModelNotifier.fire({kind:"clear"}))},contains:function(a){return a&&a._dataModel===this},handleDataPropertyChange:function(a){var b=a.data;if("parent"===a.property){var c=b._id,d=this._rootMap,e=this._roots;b._parent?d[c]&&(delete d[c],e.remove(b)):d[c]||(d[c]=b,e.add(b))}this.onDataPropertyChanged(b,a),this._dataNotifier.fire(a)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(a,b,c){this._dataModelNotifier.add(a,b,c)},removeDataModelChangeListener:function(a,b){this._dataModelNotifier.remove(a,b)
},addDataPropertyChangeListener:function(a,b,c){this._dataNotifier.add(a,b,c)},removeDataPropertyChangeListener:function(a,b){this._dataNotifier.remove(a,b)},fireHierarchyChange:function(a,b,c){this._hierarchyNotifier&&this._hierarchyNotifier.fire({data:a,oldIndex:b,newIndex:c})},addHierarchyChangeListener:function(a,b,c){this._hierarchyNotifier||(this._hierarchyNotifier=new Ye),this._hierarchyNotifier.add(a,b,c)},removeHierarchyChangeListener:function(a,b){this._hierarchyNotifier.remove(a,b)},getSiblings:function(a){var b=a._parent;return b?b._children:this._roots},eachByDepthFirst:function(a,b,c){if(b)this._depthFirst(a,b,c);else for(var d=0,e=this._roots.size();e>d;d++)if(this._depthFirst(a,this._roots.get(d),c)===!1)return},_depthFirst:function(a,b,c){for(var d=b.size(),e=0;d>e;e++)if(this._depthFirst(a,b.getChildAt(e),c)===!1)return!1;if(c){if(a.call(c,b)===!1)return!1}else if(a(b)===!1)return!1;return!0},eachByBreadthFirst:function(a,b,c){var d=new We;for(b?d.add(b):this._roots.each(d.add,d);d.size()>0;)if(b=d.removeAt(0),b.eachChild(d.add,d),c){if(a.call(c,b)===!1)return!1}else if(a(b)===!1)return!1;return!0},moveTo:function(a,b){if(!this.contains(a))throw a+" dosen't belong to this model";var c=this.getSiblings(a),d=c.indexOf(a);d===b||0>d||b>=0&&b<=c.size()&&(c.remove(a),b>c.size()&&b--,c.add(a,b),this.fireHierarchyChange(a,d,b))},moveUp:function(a){this.moveTo(a,this.getSiblings(a).indexOf(a)-1)},moveDown:function(a){this.moveTo(a,this.getSiblings(a).indexOf(a)+1)},moveToTop:function(a){this.moveTo(a,0)},moveToBottom:function(a){this.moveTo(a,this.getSiblings(a).size())},moveSelectionUp:function(a){a||(a=this.sm());var b=new We;ed(a,b,this._roots),b.each(this.moveUp,this)},moveSelectionDown:function(a){a||(a=this.sm());var b=new We;fd(a,b,this._roots),b.each(this.moveDown,this)},moveSelectionToTop:function(a){a||(a=this.sm());var b=new We;dd(a,b,this._roots),b.each(this.moveToTop,this)},moveSelectionToBottom:function(a){a||(a=this.sm());var b=new We;cd(a,b,this._roots),b.each(this.moveToBottom,this)}});var _e=g.SelectionModel=function(a){this._selectionMode="multiple",this._map={},this._list=new We,this._selectionNotifier=new Ye,this._setDataModel(a)};we("SelectionModel",b,{ms_fire:1,ms_dm:1,ms:function(a,b,c){this.addSelectionChangeListener(a,b,c)},ums:function(a,b){this.removeSelectionChangeListener(a,b)},ld:function(){return this.getLastData()},sg:function(){return"single"===this._selectionMode},co:function(a){return this._map[a._id]!=f},ss:function(a){this.setSelection(a)},as:function(a){this.appendSelection(a)},rs:function(a){this.removeSelection(a)},cs:function(){this.clearSelection()},getSelectionMode:function(){return this._selectionMode},setSelectionMode:function(a){if(this._selectionMode!==a&&(a===Z||"single"===a||"multiple"===a)){this.cs();var b=this._selectionMode;this._selectionMode=a,this.fp("selectionMode",b,a)}},_setDataModel:function(a){var b=this._dataModel;b!==a&&(b&&(this.cs(),b.umm(this.handleDataModelChange,this)),this._dataModel=a,a.mm(this.handleDataModelChange,this,!0),this.fp("dataModel",b,a))},dispose:function(){this.cs(),this._dataModel.umm(this.handleDataModelChange,this)},handleDataModelChange:function(a){if("remove"===a.kind){var b=a.data;this.co(b)&&(this._list.remove(b),delete this._map[b._id],this.fireSelectionChange("remove",new We(b)))}else"clear"===a.kind&&this.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(a){if(this._filterFunc!==a){this.cs();var b=this._filterFunc;this._filterFunc=a,this.fp("filterFunc",b,this._filterFunc)}},fireSelectionChange:function(a,b,c,d){c&&(this._list.each(function(a){d[a._id]?c.remove(a):c.add(a)}),b=c.toList()),this._selectionNotifier.fire({kind:a,datas:new We(b)})},addSelectionChangeListener:function(a,b,c){this._selectionNotifier.add(a,b,c)},removeSelectionChangeListener:function(a,b){this._selectionNotifier.remove(a,b)},_filterList:function(a,b){for(var c,d=0,e=new We(a);d<e.size();d++)c=e.get(d),(this._filterFunc&&!this._filterFunc(c)||b&&this.co(c)||!b&&!this.co(c)||!this._dataModel.contains(c))&&(e.removeAt(d),d--);return e},appendSelection:function(a){if(this._selectionMode!==Z){var b,c,d=this._list,e=this._filterList(a,!0);e.isEmpty()||(this.sg()&&(b=new We(d),c=this._map,d.clear(),this._map={},e=new We(e.get(e.size()-1))),e.each(function(a){d.add(a),this[a._id]=a},this._map),this.fireSelectionChange("append",e,b,c))}},removeSelection:function(a){var b=this._filterList(a),c=0,d=b.size();if(0!==d){for(;d>c;c++){var e=b.get(c);this._list.remove(e),delete this._map[e._id]}this.fireSelectionChange("remove",b)}},toSelection:function(a,b){return this._list.toList(a,b)},getSelection:function(){return this._list},each:function(a,b){this._list.each(a,b)},setSelection:function(a){var b=this._list;if(this._selectionMode!==Z&&(!b.isEmpty()||a)){var c=new We(b),d=this._map;b.clear(),this._map={};var e=this._filterList(a,!0);this.sg()&&e.size()>1&&(e=new We(e.get(e.size()-1))),e.each(function(a){b.add(a),this[a._id]=a},this._map),this.fireSelectionChange("set",f,c,d)}},clearSelection:function(){if(this._list.size()>0){var a=this._list.toList();this._list.clear(),this._map={},this.fireSelectionChange("clear",a)}},selectAll:function(){if(this._selectionMode!==Z){var a,b,c=this._dataModel.toDatas();if(this._filterFunc)for(a=0;a<c.size();a++)b=c.get(a),this._filterFunc(b)||(c.removeAt(a),a--);var d=this._list,e=new We(d),g=this._map;d.clear(),this._map={},this.sg()&&c.size()>1&&(c=new We(c.get(c.size()-1)));var h=c.size();for(a=0;h>a;a++)b=c.get(a),d.add(b),this._map[b._id]=b;this.fireSelectionChange("all",f,e,g)}},size:function(){return this._list.size()},isEmpty:function(){return this._list.isEmpty()},contains:function(a){return this._map[a._id]!=f},getLastData:function(){var a=this._list;return a.size()>0?a.get(a.size()-1):f},getFirstData:function(){return this._list.size()>0?this._list.get(0):f},isSelectable:function(a){return a&&this._selectionMode!==Z?this._filterFunc?this._filterFunc(a):!0:!1}}),Tb(i,{edgeGroupAgentFunc:f,graphViewAutoScrollZone:15,graphViewResettable:!0,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewSelectBorderColor:md,graphViewSelectBackground:od,graphViewEditPointSize:Q?17:7,graphViewEditPointBorderColor:md,graphViewEditPointBackground:jd,overviewBackground:id,overviewMaskBackground:od,overviewContentBorderColor:md,overviewContentBackground:"#FFF"},!0),Tb(j,{"select.color":nd,"select.width":1,"select.padding":2,icons:c,ingroup:!0,"body.color":c,"border.color":c,"border.width":2,"border.padding":2,label:c,"label.font":c,"label.color":yd,"label.background":c,"label.position":31,"label.offset.x":0,"label.offset.y":2,"label.rotation":c,"label.max":c,label2:c,"label2.font":c,"label2.color":yd,"label2.background":c,"label2.position":34,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":c,"label2.max":c,note:c,"note.expanded":!0,"note.font":c,"note.color":zd,"note.background":nd,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":c,"note.toggleable":!0,"note.border.width":1,"note.border.color":c,note2:c,"note2.expanded":!1,"note2.font":c,"note2.color":zd,"note2.background":nd,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":c,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":c,"group.title.font":c,"group.title.color":zd,"group.title.background":md,"group.title.align":T,"group.background":id,"group.depth":1,"group.padding":6,"group.position":17,"group.toggleable":!0,shape:c,"shape.background":ld,"shape.border.width":0,"shape.border.color":ld,"shape.border.3d":!1,"shape.border.3d.color":c,"shape.border.3d.accuracy":c,"shape.border.cap":"round","shape.border.join":"round","shape.gradient":f,"shape.gradient.color":"#FFF","shape.depth":0,"shape.pattern":c,"edge.type":c,"edge.points":c,"edge.color":ld,"edge.width":2,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.pattern":c,"edge.center":!1,"edge.3d":!1,"edge.3d.color":c,"edge.3d.accuracy":c,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":c,"grid.column.percents":c,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":jd,"grid.depth":1,"grid.cell.depth":-1},!0),Tb($e,{_autoAdjustIndex:!0,isAutoAdjustIndex:function(){return this._autoAdjustIndex},setAutoAdjustIndex:function(a){this._autoAdjustIndex=a},fireIndexChange:function(a,b,c){this._indexNotifier&&this._indexNotifier.fire({data:a,oldIndex:b,newIndex:c})},addIndexChangeListener:function(a,b,c){this._indexNotifier||(this._indexNotifier=new Ye),this._indexNotifier.add(a,b,c)},removeIndexChangeListener:function(a,b){this._indexNotifier.remove(a,b)},prepareRemove:function(a){a instanceof Bf&&(a.setSource(f),a.setTarget(f)),a._edges&&a._edges.toList().each(this.remove,this),a._attaches&&a._attaches.toList().each(function(a){a.setHost(f)}),a._host&&a.setHost(f)},onAdded:function(a){this.isAutoAdjustIndex()&&this.adjustIndex(a)},onDataPropertyChanged:function(a,b){df[b.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(a)},isAdjustable:function(a){return a instanceof wf||a instanceof Bf},isAdjustedToBottom:function(a){return a instanceof Cf?a.isExpanded()&&nf(a):!1},adjustIndex:function(a){this.isAdjustedToBottom(a)?(this.sendToBottom(a),a.eachChild(this.adjustIndex,this)):this.sendToTop(a)},sendToTop:function(a){if(this.contains(a)&&this.isAdjustable(a)){var b=this._datas;if(a!==b.get(this.size()-1)){var c=b.indexOf(a);b.removeAt(c),b.add(a),this.fireIndexChange(a,c,this.size()-1)}if(a instanceof Bf){var d=a._sourceAgent;d&&!this.isAdjustedToBottom(d)&&this.sendToTop(d),d=a._targetAgent,d&&!this.isAdjustedToBottom(d)&&this.sendToTop(d)}a._attaches&&a._attaches.each(function(b){b.isRelatedTo(a)||a instanceof wf&&b.isLoopedHostOn(a)||this.sendToTop(b)},this),a.ISubGraph||a instanceof Cf&&!a.isExpanded()||a._adjustChildrenToTop&&a.eachChild(function(a){a instanceof Bf||this.sendToTop(a)},this)}},sendToBottom:function(a,b){if(a!==b&&this.contains(a)&&this.isAdjustable(a)&&(!b||this.contains(b))){var c=this._datas.remove(a),d=b?this._datas.indexOf(b):0;if(this._datas.add(a,d),c!==d){this.fireIndexChange(a,c,d);var e=a._parent;!e||e.ISubGraph||e instanceof Bf||this.sendToBottom(a._parent,a)}}}}),Tb(hd,{ms_edit:function(a){a.endEdit=function(a){var b=this._index;this._node&&this._direction?this.fi({kind:"endEditRect",event:a,data:this._node,direction:this._direction}):this._shape&&b>=0?this.fi({kind:"endEditPoint",event:a,data:this._shape,index:b}):this._edge&&b>=0?this.fi({kind:"endEditPoint",event:a,data:this._edge,index:b}):this._rotationNode&&this.fi({kind:"endEditRotation",event:a,data:this._rotationNode})},a.betweenEdit=function(a){this.autoScroll(a);var b=this.gv.lp(a),c=this._index;if(this._node&&this._direction)this.resizeNode(b),this.fi({kind:"betweenEditRect",event:a,data:this._node,direction:this._direction});else if(this._shape&&c>=0)this._shape.setPoint(c,b),this.fi({kind:"betweenEditPoint",event:a,data:this._shape,index:c});else if(this._edge&&c>=0){var d=this._edge.s("edge.points");d.set(c,b),this._edge.fp("edge.points",f,d),this.fi({kind:"betweenEditPoint",event:a,data:this._edge,index:c})}else if(this._rotationNode){var e=this._rotationNode.getPosition(),g=A+D(b.y-e.y,b.x-e.x);t(g)<.04&&(g=0),this._rotationNode.setRotation(g),this.fi({kind:"betweenEditRotation",event:a,data:this._rotationNode})}},a.resizeNode=function(a){var b=this._rect,c=b.x,d=b.y,e=b.width,f=b.height,g=this._direction;"northwest"===g?b=he(a,{x:c+e,y:d+f}):"north"===g?b=he({x:c,y:a.y},{x:c+e,y:d+f}):"northeast"===g?b=he({x:c,y:a.y},{x:a.x,y:d+f}):"west"===g?b=he({x:a.x,y:d},{x:c+e,y:d+f}):"east"===g?b=he({x:c,y:d},{x:a.x,y:d+f}):"southwest"===g?b=he({x:a.x,y:d},{x:c+e,y:a.y}):"south"===g?b=he({x:c,y:d},{x:c+e,y:a.y}):"southeast"===g&&(b=he({x:c,y:d},a)),this._node.setRect(b)},a.checkResize=function(a,b,c,d,e){var f=this.gv.getEditPointSize()+2;return je({x:b-f/2,y:c-f/2,width:f,height:f},a)?(this._direction!==d&&(this.setCursor(e),this._direction=d),!0):!1},a.checkEdit=function(a,b,c){var d=this.gv,e=b?d.getDataUI(b):f,g=e?e.editInfo:f;if(g){var h,i,j,k=d.getEditPointSize()+2,l=d.lp(a);if(b instanceof wf){if(g.rotationEditable&&b instanceof wf&&(i=g.rotationPoint,je({x:i.x-k/2,y:i.y-k/2,width:k,height:k},l)))return this._rotationNode=b,c&&this.fi({kind:"beginEditRotation",event:a,data:b}),this.setCursor("crosshair"),!0;if(g.pointEditable&&b instanceof Ef)for(j=b.getPoints(),h=j.size()-1;h>=0;h--)if(i=j.get(h),je({x:i.x-k/2,y:i.y-k/2,width:k,height:k},l))return this._index=h,this._shape=b,c&&this.fi({kind:"beginEditPoint",event:a,data:b,index:h}),this.setCursor("crosshair"),!0;if(g.rectEditable){var m=b.getRect(),n=m.x,o=m.y,p=m.width,q=m.height;if(this.checkResize(l,n,o,"northwest","nwse-resize")||this.checkResize(l,n+p/2,o,"north",kb)||this.checkResize(l,n+p,o,"northeast","nesw-resize")||this.checkResize(l,n,o+q/2,"west",jb)||this.checkResize(l,n+p,o+q/2,"east",jb)||this.checkResize(l,n,o+q,"southwest","nesw-resize")||this.checkResize(l,n+p/2,o+q,"south",kb)||this.checkResize(l,n+p,o+q,"southeast","nwse-resize"))return this._node=b,this._rect=b.getRect(),c&&this.fi({kind:"beginEditRect",event:a,data:b,direction:this._direction}),!0}}if(g.pointEditable&&b instanceof Bf&&"points"===b.s("edge.type")&&(j=b.s("edge.points")))for(h=j.size()-1;h>=0;h--)if(i=j.get(h),je({x:i.x-k/2,y:i.y-k/2,width:k,height:k},l))return this._index=h,this._edge=b,c&&this.fi({kind:"beginEditPoint",event:a,data:b,index:h}),this.setCursor("crosshair"),!0}return!1}},ms_gv:function(a){a._currentSubGraph=f,a.upSubGraph=function(){this.setCurrentSubGraph(lf(this._currentSubGraph))},a.isVisible=function(a){var b=this;if(lf(a)!==b._currentSubGraph)return!1;if(a instanceof Bf){var c=a._sourceAgent,d=a._targetAgent;if(!c||!d)return!1;if(!b.isVisible(c)||!b.isVisible(d))return!1;if(a.isEdgeGroupHidden())return!1}else for(var e=a._parent;e&&!e.ISubGraph;){if(e instanceof Cf&&(!e.isExpanded()||!b.isVisible(e)))return!1;e=e._parent}return b._visibleFunc?b._visibleFunc(a):!0},a.handleDataPropertyChange=function(a){this.invalidateData(a.data)},a.handleSelectionChange=function(a){var b=this;a.datas.each(function(a){b.invalidateData(a),a._parent instanceof Cf&&a.s("ingroup")&&b.invalidateData(a._parent)}),b.onSelectionChanged(a)},a.onSelectionChanged=function(a){var b=this,c=b.sm();if(1===c.size()&&("set"===a.kind||"append"===a.kind)){var d=c.ld();b.isAutoMakeVisible()&&b.makeVisible(d),b.adjustIndex&&b._dataModel.isAutoAdjustIndex()&&b.adjustIndex(d)}},a.makeVisible=function(a){if(a){var b=this,c=b.getDataUI?b.getDataUI(a):b.getData3dUI(a);if(c){var d=a,e=lf(a);for(e!==b._currentSubGraph&&this.setCurrentSubGraph(e);(d=d._parent)&&d!==e;)d instanceof Cf&&d.setExpanded(!0);b._makeVisibleData=a,b.iv()}}},a.getLabel=function(a){var b=a.getStyle("label");return b===c?a.getName():b},a.getLabelBackground=function(a){return a.getStyle("label.background")},a.getLabelColor=function(a){return a.getStyle("label.color")},a.getLabel2=function(a){return a.getStyle("label2")},a.getLabel2Background=function(a){return a.getStyle("label2.background")},a.getLabel2Color=function(a){return a.getStyle("label2.color")},a.getNote=function(a){return a.getStyle("note")},a.getNoteBackground=function(a){return a.getStyle("note.background")},a.getNote2=function(a){return a.getStyle("note2")},a.getNote2Background=function(a){return a.getStyle("note2.background")},a.handleClick=function(a,b,c){b?(this.fi({kind:"clickData",event:a,data:b,part:c}),this.onDataClicked(b,a)):this.fi({kind:"clickBackground",event:a})},a.handleDoubleClick=function(a,b,c){var d=this;ae(a)&&(b?(d.fi({kind:"doubleClickData",event:a,data:b,part:c}),d.onDataDoubleClicked(b,a,c),d.checkDoubleClickOnNote(a,b,c)||d.checkDoubleClickOnRotation&&d.checkDoubleClickOnRotation(a,b,c)||(b instanceof Bf?d.onEdgeDoubleClicked(a,b,c):b.ISubGraph?d.onSubGraphDoubleClicked(a,b,c):b instanceof Cf&&d.onGroupDoubleClicked(a,b,c))):(d.fi({kind:"doubleClickBackground",event:a}),d.onBackgroundDoubleClicked(a)))},a.onSubGraphDoubleClicked=function(a,b){this.setCurrentSubGraph(b)},a.onEdgeDoubleClicked=function(a,b){b.ISubGraph&&!ee(a)?this.setCurrentSubGraph(b):b.s("edge.toggleable")&&b.toggle()},a.onGroupDoubleClicked=function(a,b){b.s("group.toggleable")&&b.toggle()},a.onBackgroundDoubleClicked=function(){this.upSubGraph()},a.onDataClicked=function(){},a.onDataDoubleClicked=function(){},a.onAutoLayoutEnded=function(){},a.onMoveEnded=function(){},a.onPanEnded=function(){},a.onPinchEnded=function(){},a.onZoomEnded=function(){}},ms_icons:function(a){a.getRotation=function(a){return a==f?0:a},a.updateIcons=function(){var a=this,b=a.s("icons");if(b){var c=a.iconsInfo={icons:b,rects:{}};for(var d in b){var e=b[d],g=e.names,h=g.length,i=e.position||2,j=e.offsetX||0,k=e.offsetY||0,l=e.direction||"east",m=e.gap!=f?e.gap:1,n=a.getRotation(e.rotation,e.keepOrien),o=e.width,p=e.height,q=f,r=c.rects[d]=new Array(h),s=a._data;r.rotation=n;for(var t=0;h>t;t++){var u,v,w=g[t],x=Nd(w),y=o||Se(x,s),z=p||Te(x,s);if(q?"east"===l?j+=y/2:"west"===l?j-=y/2:"north"===l?k-=z/2:k+=z/2:q={width:y,height:z},a.getPartMat){var A=-y/2,B=-z/2;v={width:y,height:z,mat:a.getPartMat(e.autorotate,i,q,e.face||R,e.offset3d,e.rotation3d,e.rotationMode,j,k,n),vs:new Ae([A,-B,0,A,-B-z,0,A+y,-B-z,0,A+y,-B,0])}}else u=a.getPosition(i,j,k,q),v={x:u.x-y/2,y:u.y-z/2,width:y,height:z},a.addRect(v,n);r[t]=v,"east"===l?j+=y/2+m:"west"===l?j-=y/2+m:"north"===l?k-=z/2+m:k+=z/2+m}}}}},ms_force:function(a){a._interval=50,a._stepCount=10,a._motionLimit=.01,a._edgeRepulsion=.6,a._nodeRepulsion=.7,a._damper=1,a._maxMotion=0,a._motionRatio=0,a.init=function(a){var b=this;a instanceof $e?b.dm=a:b.gv=a,b._nodeMap={},b._nodes=new We,b._edges=new We},a.start=function(){var a=this,b=a.gv;if(!a._timer){var c=a.cdm=b?b.dm():a.dm;c.mm(a.handleDataModelChange,a),c.md(a.handleDataPropertyChange,a),b&&b.mp(a.handleGV,a),c.each(function(b){if(a.isVisible(b)&&a.isMovable(b)&&b instanceof wf)if(a instanceof Rj){var c=b.p3();b.p3([c[0]+E(),c[1]+E(),c[2]+E()])}else c=b.getPosition(),b.setPosition(c.x+E(),c.y+E())}),a._timer=setInterval(function(){a.relax()},a._interval),a._damper=1}},a.stop=function(){var a=this;a._timer&&(a.cdm.umm(a.handleDataModelChange,a),a.cdm.umd(a.handleDataPropertyChange,a),a.gv&&a.gv.ump(a.handleGV,a),clearInterval(a._timer),delete a._timer,delete a.cdm)},a.handleGV=function(a){var b=this;if("dataModel"===a.property){var c=a.oldValue,d=a.newValue;c&&(c.umm(b.handleDataModelChange,b),c.umd(b.handleDataPropertyChange,b)),this.cdm=d,d.mm(b.handleDataModelChange,b),d.md(b.handleDataPropertyChange,b)}},a.relax=function(){var a=this;if(!(a._damper<.1&&a._maxMotion<a._motionLimit)){this.cdm.each(function(b){a.isVisible(b)&&(b instanceof Bf?a.addEdge(b):b instanceof wf&&a.addNode(b))});for(var b,c,d=0,e=a._edges,f=a._nodes,g=f.size();d<a._stepCount;d++){for(e.each(a.relaxEdge,a),b=0;g>b;b++)for(c=0;g>c;c++)a.relaxNode(f.get(b),f.get(c));a.moveNode()}a._isAdjusting=1,f.each(function(a){a.fix||(a.p?a.v.p3(a.p):a.v.setPosition(a.x,a.y))}),delete a._isAdjusting,a._nodeMap={},f.clear(),e.clear()}},a.isRunning=function(){return!!this._timer},a.isVisible=function(a){return this.gv?this.gv.isVisible(a):!0},a.isMovable=function(a){if(a instanceof Cf)return!1;var b=this;return b.gv?b.gv.isMovable(a)&&!b.gv.isSelected(a):!(b.cdm||b.dm).sm().co(a)},a.getNodeRepulsion=function(){return this._nodeRepulsion},a.setNodeRepulsion=function(a){this._nodeRepulsion=a,this._damper=1},a.getEdgeRepulsion=function(){return this._edgeRepulsion},a.setEdgeRepulsion=function(a){this._edgeRepulsion=a,this._damper=1},a.getStepCount=function(){return this._stepCount},a.setStepCount=function(a){this._stepCount=a,this._damper=1},a.getInterval=function(){return this._interval},a.setInterval=function(a){var b=this;b._interval!==a&&(b._interval=a,b._timer&&(clearInterval(b._timer),b._timer=setInterval(function(){b.relax()},a)))},a.handleDataPropertyChange=function(a){!this._isAdjusting&&this.isVisible(a.data)&&(this._damper=1)},a.handleDataModelChange=function(){this._damper=1},a.damp=function(){var a=this._maxMotion,b=this._damper;this._motionRatio<=.001&&((.2>a||a>1&&.9>b)&&b>.01?this._damper-=.01:.4>a&&b>.003?this._damper-=.003:b>1e-4&&(this._damper-=1e-4)),a<this._motionLimit&&(this._damper=0)}}});var af={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1},bf={3:1,7:1,11:1,17:1,23:1,27:1,31:1},cf={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},df={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},ef={position:1,width:1,height:1,expanded:1,rotation:1},ff={"edge.type":1,"edge.group":1},gf={rotation:1,rotationX:1,rotationZ:1},hf={position:1,width:1,height:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},jf={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1},kf=function(a,b){if(!a||!(b instanceof Cf)||b.isEmpty())return!1;for(a=a._parent;a instanceof Cf;){if(a===b)return!0;a=a._parent}return!1},lf=function(a){if(!a)return f;if(a instanceof Bf){var b=a._sourceAgent,c=a._targetAgent;if(!b||!c)return f;var d=lf(b),e=lf(c);return d===e?d:f}for(var g=a._parent;g instanceof Bf&&!g.ISubGraph;)g=g._parent;return g?g.ISubGraph?g:lf(g):f},mf=function(a,b,c,d){var e=b.getStyle(c)*d;e&&oe(a,e),e=b.getStyle(c+".left")*d,e&&(a.x-=e,a.width+=e),e=b.getStyle(c+".right")*d,e&&(a.width+=e),e=b.getStyle(c+".top")*d,e&&(a.y-=e,a.height+=e),e=b.getStyle(c+".bottom")*d,e&&(a.height+=e),a.width<0&&(a.width=-a.width,a.x-=a.width),a.height<0&&(a.height=-a.height,a.y-=a.height)},nf=function(a){for(var b,c=0,d=a.size();d>c;c++)if(b=a.getChildAt(c),b instanceof wf&&nf(b))return!0;return a.hasAgentEdges()},of=function(a){if(!a)return f;for(var b=a._parent;b instanceof Cf;){if(!(b._parent instanceof Cf))return b.isExpanded()?a:b;b.isExpanded()||(a=b),b=b._parent}return a},pf=function(a,b){if(!a||!b)return f;var c,d,e,g=lf(a),h=lf(b);if(g!==h){for(;h&&g!==h;)h=lf(h);if(g===h)return a;c=new We,c.add(a,0);for(var i=a._parent;i instanceof wf&&!b.isDescendantOf(i);)c.add(i,0),i=i._parent;for(e=c.size(),d=0;e>d;d++){var j=c.get(d);if(j instanceof Cf&&!j.isExpanded())return j;if(j.ISubGraph)return j}return a}return a},qf=function(a){if(a.isLooped())return a._source;var b=of(a._source),c=of(a._target);return b===c?a._source:pf(b,c)},rf=function(a){if(a.isLooped())return a._target;var b=of(a._source),c=of(a._target);return b===c?a._target:pf(c,b)},sf=function(a,b){if(!a||!b)return f;var c,d,e,g,h,i;if(a===b){if(g=a.getLoopedEdges(),!g)return f;g=new We(g)}else{if(h=a.getAgentEdges(),i=b.getAgentEdges(),!h||!i)return f;for(d=h.size(),c=0;d>c;c++)e=h.get(c),i.contains(e)&&(g||(g=new We),g.add(e))}if(g)for(c=0;c<g.size();c++)e=g.get(c),e.getStyle("edge.type")&&(e._setEdgeGroup(f),g.removeAt(c),c--);return g},tf=function(a,b){var c=sf(a,b);if(c&&!c.isEmpty()){if(1===c.size())return c.get(0)._setEdgeGroup(f),void 0;var d=new We,e=new We;c.each(function(a){var b=a.getStyle("edge.group");d.contains(b)||d.add(b)}),d.sort(),d.each(function(a){e.add(new g.EdgeGroup(c.toList(function(b){return a===b.getStyle("edge.group")}),e))}),e.each(function(a){a.each(function(b){b._setEdgeGroup(a)})})}},uf=g.graph={},vf=function(a,b,c){ve(d+".graph."+a,b,c)};Md("node_image",{width:30,height:30,comps:[{type:"rect",rect:[4,5,22,16],gradient:xd,gradientColor:jd,background:ld},{type:"rect",rect:[2,3,26,20],borderWidth:1,borderColor:ld},{type:"rect",rect:[11,23,8,4],background:ld},{type:"rect",rect:[6,27,18,2],background:ld}]}),Md("node_icon",{width:16,height:16,comps:[{type:"rect",rect:[2,2,12,10],borderWidth:1,borderColor:ld,gradient:xd,gradientColor:jd,background:ld},{type:"rect",rect:[6,12,4,2],background:ld},{type:"rect",rect:[4,14,9,1],background:ld}]}),Md("group_image",{width:66,height:39,comps:[{type:"rect",rect:[44.3,18,18.1,12.8],gradient:xd,gradientColor:jd,background:ld},{type:"rect",rect:[3.3,17.8,18.1,12.8],gradient:xd,gradientColor:jd,background:ld},{type:"rect",rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:ld,gradient:xd,gradientColor:jd,background:ld},{type:"rect",rect:[26.2,29.4,12.8,4.2],background:ld},{type:"rect",rect:[21.3,33.5,22.5,2.3],background:ld},{type:"rect",rect:[5.3,32.7,14.1,2.1],background:ld},{type:"rect",rect:[9,30.4,6.7,2.4],background:ld},{type:"rect",rect:[50,30.7,6.7,2.4],background:ld},{type:"rect",rect:[46.3,33,14.1,2.1],background:ld}]}),Md("group_icon",{width:16,height:16,comps:[{type:"rect",rect:[4.1,11.7,3.7,1.7],background:ld},{type:"rect",rect:[2,13.4,8,1],background:ld},{type:"rect",rect:[11.9,12.2,2,1.4],background:ld},{type:"rect",rect:[10.8,13.6,4.2,.7],background:ld},{type:"rect",rect:[10.1,7.5,5.7,5],gradient:xd,gradientColor:jd,background:ld},{type:"rect",rect:[1,2.5,10,9.4],borderWidth:1,borderColor:ld,gradient:xd,gradientColor:jd,background:ld}]}),Md("edge_icon",{width:16,height:16,comps:[{type:"rect",rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:xd,gradientColor:jd,background:ld},{type:"rect",rect:[10.8,1,4,4],background:ld},{type:"rect",rect:[1,11,4,4],background:ld}]}),Md("subGraph_image",{width:72,height:45,comps:[{type:"shape",points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:xd,gradientColor:jd,background:ld},{type:"rect",rect:[29.6,30.7,3.6,1.8],background:ld},{type:"rect",rect:[28.4,32.3,6,1.2],background:ld},{type:"rect",rect:[37.3,32,10.8,1.8],background:ld},{type:"rect",rect:[39.1,29.9,7.2,2.3],background:ld},{type:"rect",rect:[26.6,23.7,9.6,7.2],gradient:xd,gradientColor:jd,background:ld},{type:"rect",rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:ld,gradient:xd,gradientColor:jd,background:ld}]}),Md("subGraph_icon",{width:17,height:17,comps:[{type:"shape",points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:xd,gradientColor:jd,background:ld}]}),Md("shape_icon",{width:16,height:16,comps:[{type:"shape",points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],segments:[1,2,2,2,2,2,2],borderWidth:1,borderColor:ld},{type:"circle",rect:[7.5,.4,1.6,1.6],borderWidth:1,borderColor:ld,gradient:xd,gradientColor:jd,background:ld},{type:"circle",rect:[7.6,6.3,1.6,1.6],borderWidth:1,borderColor:ld,gradient:xd,gradientColor:jd,background:ld},{type:"circle",rect:[13.6,6.4,1.6,1.6],borderWidth:1,borderColor:ld,gradient:xd,gradientColor:jd,background:ld},{type:"circle",rect:[13.7,14,1.6,1.6],borderWidth:1,borderColor:ld,gradient:xd,gradientColor:jd,background:ld},{type:"circle",rect:[.7,13.9,1.6,1.6],borderWidth:1,borderColor:ld,gradient:xd,gradientColor:jd,background:ld},{type:"circle",rect:[.7,.3,1.6,1.6],borderWidth:1,borderColor:ld,gradient:xd,gradientColor:jd,background:ld}]}),Md("grid_icon",{width:16,height:16,comps:[{type:"rect",rect:[1,1,4,4],background:ld,gradient:xd,gradientColor:jd},{type:"rect",rect:[6,1,4,4],background:ld,gradient:xd,gradientColor:jd},{type:"rect",rect:[11,1,4,4],background:ld,gradient:xd,gradientColor:jd},{type:"rect",rect:[11,6,4,4],background:ld,gradient:xd,gradientColor:jd},{type:"rect",rect:[6,6,4,4],background:ld,gradient:xd,gradientColor:jd},{type:"rect",rect:[1,6,4,4],background:ld,gradient:xd,gradientColor:jd},{type:"rect",rect:[11,11,4,4],background:ld,gradient:xd,gradientColor:jd},{type:"rect",rect:[6,11,4,4],background:ld,gradient:xd,gradientColor:jd},{type:"rect",rect:[1,11,4,4],background:ld,gradient:xd,gradientColor:jd}]});var wf=g.Node=function(){Ub(wf,this)},xf={X:Ke,Y:Le,Z:Me},yf={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},zf="xzy",Af=function(a,b,c){if(b){var d=b[0],e=b[1],f=b[2];"xzy"===c?(Le(a,e),Me(a,f),Ke(a,d)):"xyz"===c?(Me(a,f),Le(a,e),Ke(a,d)):"yxz"===c?(Me(a,f),Ke(a,d),Le(a,e)):"yzx"===c?(Ke(a,d),Me(a,f),Le(a,e)):"zxy"===c?(Le(a,e),Ke(a,d),Me(a,f)):"zyx"===c?(Ke(a,d),Le(a,e),Me(a,f)):(Le(a,e),Me(a,f),Ke(a,d))}};we("Node",Ze,{ms_ac:["rotationMode","rotation","rotationX","rotationZ","tall","elevation"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:zf,_rotation:0,_rotationX:0,_rotationZ:0,_host:f,_position:{x:0,y:0},_tall:20,_elevation:0,getUIClass:function(){return If},get3dUIClass:function(){return Oh},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),void 0)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),void 0)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),void 0)},translate3dBy:function(a,b){Ie(a,gg(null,this.r3(),this.getRotationMode())),this.translate3d(a[0]*b,a[1]*b,a[2]*b)},translateFront:function(a){this.translate3dBy([0,0,1],a)},translateBack:function(a){this.translate3dBy([0,0,-1],a)},translateLeft:function(a){this.translate3dBy([-1,0,0],a)},translateRight:function(a){this.translate3dBy([1,0,0],a)},translateTop:function(a){this.translate3dBy([0,1,0],a)},translateBottom:function(a){this.translate3dBy([0,-1,0],a)},getPosition3d:function(){var a=this.getPosition();return[a.x,this.getElevation(),a.y]},setPosition3d:function(a,b,c){1===arguments.length&&(b=a[1],c=a[2],a=a[0]),this.setPosition(a,c),this.setElevation(b)},translate3d:function(a,b,c){1===arguments.length&&(b=a[1],c=a[2],a=a[0]),this.translate(a,c),this.setElevation(this.getElevation()+b)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(a,b,c){1===arguments.length&&(b=a[1],c=a[2],a=a[0]),this.setSize(a,c),this.setTall(b)},getRotation3d:function(){return[this._rotationX,-this._rotation,this._rotationZ]},setRotation3d:function(a,b,c){1===arguments.length&&(b=a[1],c=a[2],a=a[0]),this.setRotationX(a),this.setRotation(-b),this.setRotationZ(c)},setRotationY:function(a){this.setRotation(-a)},getRotationY:function(){return-this._rotation},getLoopedEdges:function(){return this._loopedEdges},getEdges:function(){return this._edges},getAgentEdges:function(){return this._agentEdges},getHost:function(){return this._host},setHost:function(a){if(this!==a&&this._host!==a){var b=this._host;b&&b._removeAttach(this),this._host=a,this._host&&this._host._addAttach(this),this.fp("host",b,a),this.onHostChanged(b,a)}},onStyleChanged:function(a){wf.superClass.onStyleChanged.apply(this,arguments),jf[a]&&this.updateAttach()},getAttaches:function(){return this._attaches},_addAttach:function(a){this._attaches||(this._attaches=new We),this._attaches.add(a)},_removeAttach:function(a){this._attaches.remove(a),this._attaches.isEmpty()&&delete this._attaches},getSourceEdges:function(){return this._sourceEdges},getTargetEdges:function(){return this._targetEdges},_addSourceEdge:function(a){this._allEdges||(this._allEdges=new We),this._sourceEdges||(this._sourceEdges=new We),this._allEdges.add(a),this._sourceEdges.add(a),this._resetEdgeSet()},_addTargetEdge:function(a){this._allEdges||(this._allEdges=new We),this._targetEdges||(this._targetEdges=new We),this._allEdges.add(a),this._targetEdges.add(a),this._resetEdgeSet()},_removeSourceEdge:function(a){this._allEdges.remove(a),this._sourceEdges.remove(a),this._allEdges.isEmpty()&&delete this._allEdges,this._sourceEdges.isEmpty()&&delete this._sourceEdges,this._resetEdgeSet()},_removeTargetEdge:function(a){this._allEdges.remove(a),this._targetEdges.remove(a),this._allEdges.isEmpty()&&delete this._allEdges,this._targetEdges.isEmpty()&&delete this._targetEdges,this._resetEdgeSet()
},_resetEdgeSet:function(){if(delete this._loopedEdges,!this._allEdges||this._allEdges.isEmpty())return delete this._edges,void 0;var a;this._allEdges.each(function(b){b.isLooped()&&(a||(a={}),a[b._id]||(this._loopedEdges||(this._loopedEdges=new We),this._loopedEdges.add(b),a[b._id]=b))},this),a?(this._edges=new We,this._allEdges.each(function(b){a[b._id]?"A"===a[b._id]||(a[b._id]="A",this._edges.add(b)):this._edges.add(b)},this)):this._edges=this._allEdges},hasAgentEdges:function(){return!!this._agentEdges&&!this._agentEdges.isEmpty()},getSourceAgentEdges:function(){return this._sourceAgentEdges},getTargetAgentEdges:function(){return this._targetAgentEdges},_addSourceAgentEdge:function(a){this._sourceAgentEdges||(this._sourceAgentEdges=new We),this._allAgentEdges||(this._allAgentEdges=new We),this._sourceAgentEdges.add(a),this._allAgentEdges.add(a),this._resetAgentEdgeSet()},_addTargetAgentEdge:function(a){this._targetAgentEdges||(this._targetAgentEdges=new We),this._allAgentEdges||(this._allAgentEdges=new We),this._targetAgentEdges.add(a),this._allAgentEdges.add(a),this._resetAgentEdgeSet()},_removeSourceAgentEdge:function(a){this._sourceAgentEdges.remove(a),this._allAgentEdges.remove(a),this._sourceAgentEdges.isEmpty()&&delete this._sourceAgentEdges,this._allAgentEdges.isEmpty()&&delete this._allAgentEdges,this._resetAgentEdgeSet()},_removeTargetAgentEdge:function(a){this._targetAgentEdges.remove(a),this._allAgentEdges.remove(a),this._targetAgentEdges.isEmpty()&&delete this._targetAgentEdges,this._allAgentEdges.isEmpty()&&delete this._allAgentEdges,this._resetAgentEdgeSet()},_resetAgentEdgeSet:function(){delete this._agentEdges;var a=this._allAgentEdges;if(a&&!a.isEmpty()){var b={};a.each(function(a){b[a._id]?this._agentEdges||(this._agentEdges=new We):b[a._id]=a},this),this._agentEdges?a.each(function(a){b[a._id]&&(this._agentEdges.add(a),delete b[a._id])},this):this._agentEdges=a}},getImage:function(){return this._image},setImage:function(a){var b=this._image,c=this.getWidth(),d=this.getHeight();this._image=a,this.fp("image",b,a),this.fp("width",c,this.getWidth()),this.fp("height",d,this.getHeight())},getPosition:function(){return this._position},setPosition:function(a,b){if(!this._updatingPosition){this._updatingPosition=1;var c;if(c=2===arguments.length?{x:a,y:b}:a,c.x!==this._position.x||c.y!==this._position.y){var d=this._position;this._position=c,this.fp("position",d,c)}delete this._updatingPosition}},translate:function(a,b){var c=this._position;this.setPosition(c.x+a,c.y+b)},getWidth:function(){if(this._width>=0)return this._width;var a=Nd(this._image);return a?Se(a,this):20},setWidth:function(a){var b=this._width;this._width=a,this.fp("width",b,a)},getHeight:function(){if(this._height>=0)return this._height;var a=Nd(this._image);return a?Te(a,this):20},setHeight:function(a){var b=this._height;this._height=a,this.fp("height",b,a)},setSize:function(a,b){2===arguments.length?(this.setWidth(a),this.setHeight(b)):(this.setWidth(a.width),this.setHeight(a.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(a,b,c,d){1===arguments.length?(this.setPosition(a.x+a.width/2,a.y+a.height/2),this.setWidth(a.width),this.setHeight(a.height)):(this.setPosition(a+c/2,b+d/2),this.setWidth(c),this.setHeight(d))},getRect:function(){var a=this.getWidth(),b=this.getHeight();return ue({x:this._position.x-a/2,y:this._position.y-b/2,width:a,height:b},this._rotation)},onParentChanged:function(){wf.superClass.onParentChanged.apply(this,arguments),this._checkEdgeAgent()},_checkEdgeAgent:function(){this._edges&&this._edges.each(function(a){a._checkAgentNode()})},onPropertyChanged:function(a){wf.superClass.onPropertyChanged.call(this,a),this._attaches&&this._attaches.each(function(b){b.handleHostPropertyChange(a)}),this._parent instanceof Cf&&((this.s("ingroup")&&ef[a.property]||"s:ingroup"===a.property)&&this._parent.updatePositionFromChildren(),(this.s("ingroup")||"s:ingroup"===a.property)&&this._parent.fp("childChange",!0,!1)),this._agentEdges&&this._agentEdges.each(function(a){a.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(a){this.updateAttach(a)},updateAttach:function(a){this._updatingAttach||zb||(this._updatingAttach=1,this.updateAttachImpl(a),delete this._updatingAttach)},updateAttachImpl:function(a){var b,c,d,e,g,h=this._host,i=a?a.property:f,j=a?a.oldValue:f,k=a?a.newValue:f;if(h instanceof Df){if("elevation"===i)this.setElevation(this.getElevation()+k-j);else if(!a||hf[i]){if(b=this.getStyle("attach.row.index"),c=this.getStyle("attach.column.index"),d=h.getCellRect(b,c),!d)return;e=this.getStyle("attach.row.span"),g=this.getStyle("attach.column.span"),(1!==e||1!==g)&&(d=ie(d,h.getCellRect(b+e-1,c+g-1))),mf(d,this,"attach.padding",1),this.setRect(d)}}else a&&("position"===i?this.translate(k.x-j.x,k.y-j.y):"elevation"===i?this.setElevation(this.getElevation()+k-j):gf[i]&&this.syncRotation(h,i,k-j))},syncRotation:function(a,b,c){var d=this,e=a.p3(),f=Be(d.p3(),e),g=Ee(),h=yf[d.getRotationMode()],i=h[0],j=h[1],k=h[2],l=xf[i],m=xf[j],n=xf[k];"rotation"===b&&(b="rotationY",c=-c),b==="rotation"+i?(n(g,a["getRotation"+k]()),m(g,a["getRotation"+j]()),l(g,c),m(g,-a["getRotation"+j]()),n(g,-a["getRotation"+k]()),d["setRotation"+i](d["getRotation"+i]()+c)):b==="rotation"+j?(n(g,a["getRotation"+k]()),m(g,c),n(g,-a["getRotation"+k]()),d["setRotation"+j](d["getRotation"+j]()+c)):b==="rotation"+k&&(n(g,c),d["setRotation"+k](d["getRotation"+k]()+c)),Ie(f,g),d.p3(e[0]+f[0],e[1]+f[1],e[2]+f[2])},isHostOn:function(a){if(this._host&&a&&a._attaches)for(var b={},c=this._host;c&&c!==this&&!b[c._id];){if(c===a)return!0;b[c._id]=c,c=c._host}return!1},isLoopedHostOn:function(a){return this.isHostOn(a)&&a.isHostOn(this)}});var Bf=g.Edge=function(a,b){Ub(Bf,this),this.setSource(a),this.setTarget(b)};we("Edge",Ze,{_icon:"edge_icon",getUIClass:function(){return Jf},get3dUIClass:function(){return Ph},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._sourceAgent},getTargetAgent:function(){return this._targetAgent},setSource:function(a){if(this._source!==a){var b=this._source;this._source=a,b&&b._removeSourceEdge(this),a&&a._addSourceEdge(this),this._checkAgentNode(),this.fp("source",b,a)}},setTarget:function(a){if(this._target!==a){var b=this._target;this._target=a,b&&b._removeTargetEdge(this),a&&a._addTargetEdge(this),this._checkAgentNode(),this.fp("target",b,a)}},isLooped:function(){return this._source===this._target&&!!this._source&&!!this._target},_checkAgentNode:function(){var a,b=qf(this);this._sourceAgent!==b&&(a=this._sourceAgent,a&&a._removeSourceAgentEdge(this),this._sourceAgent=b,b&&b._addSourceAgentEdge(this),this.fp("sourceAgent",a,b),tf(a,this._targetAgent),tf(b,this._targetAgent));var c=rf(this);this._targetAgent!==c&&(a=this._targetAgent,a&&a._removeTargetAgentEdge(this),this._targetAgent=c,c&&c._addTargetAgentEdge(this),this.fp("targetAgent",a,c),tf(a,this._sourceAgent),tf(c,this._sourceAgent))},_setEdgeGroup:function(a){this._edgeGroup=a,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._edgeGroup},isEdgeGroupHidden:function(){return this._edgeGroup&&this._edgeGroup.get(0)!==this&&!this.getStyle("edge.expanded")},getEdgeGroupSize:function(){return this._edgeGroup?this._edgeGroup.size():1},getEdgeGroupIndex:function(){return this._edgeGroup?this._edgeGroup.indexOf(this):0},isEdgeGroupAgent:function(){var a=this._edgeGroup;return a&&!this.getStyle("edge.expanded")&&a.size()>1&&this===a.get(0)},toggle:function(){var a=this._edgeGroup,b=!this.getStyle("edge.expanded");a&&a.size()>1&&(a.each(function(a){a.setStyle("edge.expanded",b)}),a.getSiblings().each(function(b){b!==a&&b.each(function(a){a.fp("edgeGroup",f,b)})}))},onStyleChanged:function(a){Bf.superClass.onStyleChanged.apply(this,arguments),ff[a]&&tf(this._targetAgent,this._sourceAgent)}});var Cf=g.Group=function(){Ub(Cf,this)};we("Group",wf,{_image:"group_image",_icon:"group_icon",_expanded:!1,getUIClass:function(){return Kf},onChildAdded:function(){Cf.superClass.onChildAdded.apply(this,arguments),this.updatePositionFromChildren()},onChildRemoved:function(){Cf.superClass.onChildRemoved.apply(this,arguments),this.updatePositionFromChildren()},updatePositionFromChildren:function(){if(!this._updatingChildrenPosition&&!zb){var a=this.getChildrenRect();a&&(this._updatingPositionFromChildren=1,this.setPosition(gd(this.getStyle("group.position"),a,this.getSize())),delete this._updatingPositionFromChildren)}},getChildrenRect:function(){var a;return this.eachChild(function(b){a=ie(a,this.getChildRect(b))},this),a},getChildRect:function(a){var b;return a.s("ingroup")&&(a instanceof Cf&&a.isExpanded()&&a.eachChild(function(c){b=ie(b,a.getChildRect(c))}),!b&&a.getRect&&(b=a.getRect())),b},setPosition:function(a,b){if(!this._updatingChildrenPosition){var c;c=2===arguments.length?{x:a,y:b}:a,zb||this._updatingPositionFromChildren||(this._updatingChildrenPosition=1,pe(this._children,c.x-this._position.x,c.y-this._position.y),delete this._updatingChildrenPosition),Cf.superClass.setPosition.call(this,c)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._expanded},setExpanded:function(a){if(this._expanded!==a){var b=this._expanded;this._expanded=a,this.fp("expanded",b,this._expanded),this._checkEdgeAgent()}},_checkEdgeAgent:function(){Cf.superClass._checkEdgeAgent.call(this),this.eachChild(function(a){a instanceof wf&&a._checkEdgeAgent()})},onStyleChanged:function(a){Cf.superClass.onStyleChanged.apply(this,arguments),"group.position"===a&&this.updatePositionFromChildren()}});var Df=g.Grid=function(){Ub(Df,this)};we("Grid",wf,{_icon:"grid_icon",_image:f,getUIClass:function(){return Mf},setRotation:f,getCellRect:function(a,b){var c=this.getStyle("grid.row.count"),d=this.getStyle("grid.column.count");if(0>=c||0>=d||0>a||a>=c||0>b||b>=d)return f;var e,g,h,i=this.getRect(),j=this.getStyle("grid.row.percents"),k=this.getStyle("grid.column.percents");if(mf(i,this,"grid.border",-1),j&&j._as&&(j=j._as),k&&k._as&&(k=k._as),j&&j.length===c){for(h=0,e=0;a>e;e++)h+=i.height*j[e];i.y+=h,i.height=i.height*j[a]}else i.height=i.height/c,i.y+=i.height*a;if(k&&k.length===d){for(g=0,e=0;b>e;e++)g+=i.width*k[e];i.x+=g,i.width=i.width*k[b]}else i.width=i.width/d,i.x+=i.width*b;return oe(i,-this.getStyle("grid.gap")),i}});var Ef=g.Shape=function(){Ub(Ef,this),this._points=new We};we("Shape",wf,{ms_ac:["segments","thickness"],_icon:"shape_icon",_thickness:10,getUIClass:function(){return Lf},get3dUIClass:function(){return Qh},getPoints:function(){return this._points},setPoints:function(a){a?this._points=a:this._points.clear(),this.fs()},addPoint:function(a,b){this._points.add(a,b),this.fs()},setPoint:function(a,b){this._points.set(a,b),this.fs()},removePointAt:function(a){this._points.removeAt(a),this.fs()},setWidth:function(a){if(1>a&&(a=1),!this._updatingShape&&!zb){this._updatingShape=1;var b=this._position.x,c=a/this.getWidth();this._points.each(function(a){a.x=(a.x-b)*c+b}),this.fs(),delete this._updatingShape}Ef.superClass.setWidth.call(this,a)},setHeight:function(a){if(1>a&&(a=1),!this._updatingShape&&!zb){this._updatingShape=1;var b=this._position.y,c=a/this.getHeight();this._points.each(function(a){a.y=(a.y-b)*c+b}),this.fs(),delete this._updatingShape}Ef.superClass.setHeight.call(this,a)},setPosition:function(a,b){if(!this._updatingShape&&!zb){var c;c=2===arguments.length?{x:a,y:b}:a;var d=c.x-this._position.x,e=c.y-this._position.y;if(0===d&&0===e)return;this._updatingShape=1,this._points.each(function(a){a.x+=d,a.y+=e}),this.fs(),delete this._updatingShape}Ef.superClass.setPosition.apply(this,arguments)},fs:function(){this.fireShapeChange()},fireShapeChange:function(){if(!this._updatingShape&&!zb){var a=he(this._points);a&&(this._updatingShape=1,this.setRect(a),delete this._updatingShape)}this.fp("shape",!1,!0)},getControlPoint:function(){var a=this,b=a.getPosition();return{x:b.x+a.s("control.point.offset.x"),y:b.y+a.s("control.point.offset.y")}}});var Ff=g.SubGraph=function(){Ub(Ff,this)};we("SubGraph",wf,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_checkEdgeAgent:function(){Ff.superClass._checkEdgeAgent.call(this),this.eachChild(function(a){a instanceof wf&&a._checkEdgeAgent()})}}),g.EdgeGroup=function(a,b){this._edges=a,this._siblings=b;for(var c,d,e=0,g=a.size(),h=j["edge.expanded"];g>e;e++)if(c=a.get(e).getStyle("edge.expanded",!1),c!=f){h=c;break}h==f&&(h=!0);var k=i.edgeGroupAgentFunc;for(k&&(d=k(a),d&&d!==a.get(0)&&(a.remove(d),a.add(d,0))),e=0;g>e;e++)a.get(e).setStyle("edge.expanded",h)},we("EdgeGroup",b,{getEdges:function(){return this._edges},size:function(){return this._edges.size()},get:function(a){return this._edges.get(a)},indexOf:function(a){return this._edges.indexOf(a)},each:function(a,b){this._edges.each(a,b)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(a,b){this._siblings.each(function(c){c._edges.each(a,b)})}});var Gf=g.JSONSerializer=function(a){this.dm=this._dataModel=a};we("JSONSerializer",b,{serialize:function(a,b){return null==a&&(a=2),null==b&&(b=2),JSON.stringify(this.toJSON(),function(a,b){return"number"==typeof b?parseFloat(b.toFixed(2)):b},a)},toJSON:function(){var a=this.dm.getRoots(),b=this.json={v:i.getVersion(),d:[]};return a.each(this.serializeData,this),b},isSerializable:function(){return!0},getProperties:function(a){var b={name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,adjustChildrenToTop:1};return a instanceof wf&&Tb(b,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,position:1,width:1,height:1,tall:1,elevation:1}),a instanceof Bf&&(b.source=1,b.target=1),a instanceof Cf&&(b.expanded=1),a instanceof Ef&&(b.segments=1,b.points=1,b.thickness=1),b},getStyles:function(a){var b,c={};for(b in a._styleMap)c[b]=1;return c},getAttrs:function(a){var b,c={};for(b in a._attrObject)c[b]=1;return c},serializeData:function(a){if(this.isSerializable(a)){var b,c,d,e,f="serializeValue",g=a.getClass(),h=new g,i={c:a.getClassName(),i:a.getId(),p:{},s:{},a:{}};this.json.d.push(i),b=this.getProperties(a);for(c in b)e=sd(c),a[e]&&(d=a[e](),d!==h[e]()&&this[f](c,d,i.p));b=this.getStyles(a);for(c in b)d=a.getStyle(c),d!==h.getStyle(c)&&this[f](c,d,i.s);b=this.getAttrs(a);for(c in b)d=a.getAttr(c),d!==h.getAttr(c)&&this[f](c,d,i.a);Vb(i.p)&&delete i.p,Vb(i.s)&&delete i.s,Vb(i.a)&&delete i.a}a.getChildren().each(this.serializeData,this)},serializeValue:function(a,b,c){b instanceof We?b={__a:b._as}:b instanceof Ze&&(b={__i:b.getId()}),c[a]=b},deserialize:function(a,b,c){zb=!0,a=this.json=Lb(a)?JSON.parse(a):a,this.idMap={};for(var d=new We,e=new We,f=0,g=a.d.length;g>f;f++){var h=a.d[f],i=Td(h.c),j=new i,k=h.i;c&&(j._id=k),this.idMap[k]=j,d.add(j),e.add(h)}for(f=0;g>f;f++)this.deserializeData(d.get(f),e.get(f));return d.each(function(a){b&&!a.getParent()&&a.setParent(b),this.dm.add(a)},this),zb=!1,d},deserializeData:function(a,b){var c,d="deserializeValue";for(var c in b.p)a[td(c)](this[d](b.p[c]));for(c in b.s)a.setStyle(c,this[d](b.s[c]));for(c in b.a)a.setAttr(c,this[d](b.a[c]))},deserializeValue:function(a){if(Ob(a)){var b=a.__i;if(b!=f)return this.idMap[b];if(b=a.__a,Pb(b))return new We(b)}return a}}),Tb($e,{serialize:function(){return new Gf(this).serialize()},toJSON:function(){return new Gf(this).toJSON()},deserialize:function(a,b,c){return new Gf(this).deserialize(a,b,c)}}),uf.GraphView=function(a){var b=this;b._dirtyMap={},b._dirtyRects=new We,b._uiMap={},b._visibleMap={},b._view=jc(1),b._canvas=kc(b._view),b.dm(a?a:new $e),b.setEditable(!1),b.setScrollBarVisible(i.graphViewScrollBarVisible)},vf("GraphView",b,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,ms_painter:1,ms_txy:1,ms_zoom:1,ms_interaction:1,ms_ac:["layers","scrollBarColor","scrollBarSize","autoMakeVisible","autoHideScrollBar","resettable","editInteractor","currentSubGraph","pannable","rectSelectable","autoScrollZone","visibleFunc","movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","selectBackground","selectBorderColor","editPointSize","editPointBorderColor","editPointBackground"],_resettable:i.graphViewResettable,_pannable:i.graphViewPannable,_rectSelectable:i.graphViewRectSelectable,_autoScrollZone:i.graphViewAutoScrollZone,_selectBackground:i.graphViewSelectBackground,_selectBorderColor:i.graphViewSelectBorderColor,_editPointSize:i.graphViewEditPointSize,_editPointBorderColor:i.graphViewEditPointBorderColor,_editPointBackground:i.graphViewEditPointBackground,_scrollBarColor:Bd,_scrollBarSize:Cd,_autoHideScrollBar:wd,_autoMakeVisible:vd,setEditable:function(a){var b=this;a?b.setInteractors([new Pf(b),new Rf(b),new Qf(b),new Of(b),new Sf(b)]):b.setInteractors([new Pf(b),new Qf(b),new Of(b),new Sf(b,{editable:!1})])},getCanvas:function(){return this._canvas},createDataUI:function(a){var b=a.getUIClass();return b?new b(this,a):f},getDataUI:function(a){var b=this._uiMap[a._id];return b===c&&(b=this.createDataUI(a),this._uiMap[a._id]=b),b},invalidateAll:function(a){var b=this;if(a){for(var c in b._uiMap){var d=b._uiMap[c];d&&d.dispose()}b._uiMap={},b._visibleMap={},b._dirtyMap={},b._dirtyRects.clear(),b.redraw()}else b.dm().each(function(a){b.invalidateData(a)})},invalidateSelection:function(){var a=this;a.sm().each(function(b){a._dirtyMap[b._id]=b}),a.iv()},invalidateData:function(a){this._dirtyMap[a._id]=a,this.iv()},redraw:function(a){this._redrawAll||(a?this._dirtyRects.add(a):(this._redrawAll=1,this._dirtyRects.clear()),this.iv())},each:function(a,b){var c,d,e,f=0,g=this._layers,h=this._dataModel._datas._as,i=h.length;if(g)for(var j=g.length;j>f;f++){e=g[f];for(var k=0;i>k;k++)if(c=h[k],c._layer===e&&(d=b?a.call(b,c):a(c),d===!1))return}else for(;i>f;f++)if(c=h[f],d=b?a.call(b,c):a(c),d===!1)return},reverseEach:function(a,b){var c,d,e,f,g=this._layers,h=this._dataModel._datas._as,i=h.length;if(g)for(c=g.length-1;c>=0;c--){f=g[c];for(var j=i-1;j>=0;j--)if(d=h[j],d._layer===f&&(e=b?a.call(b,d):a(d),e===!1))return}else for(c=i-1;c>=0;c--)if(d=h[c],e=b?a.call(b,d):a(d),e===!1)return},getViewRect:function(){return this._viewRect},getContentRect:function(){var a=this._contentRect;return a||(this.each(function(b){this.isVisible(b)&&(a=ie(a,this.getDataUIBounds(b)))},this),this._contentRect=a?a:Eb),this._contentRect},getScrollRect:function(){return ie(this.getContentRect(),this._viewRect)},fitData:function(a,b,c,d){var e=this;e.makeVisible(a),e.validate();var g=e.getDataUIBounds(a);g&&(g=Sd(g),oe(g,c==f?20:c),e.fitRect(g,b,d))},fitContent:function(a,b,c){var d=this;d.validate();var e=Sd(d.getContentRect());oe(e,b==f?20:b),d.fitRect(e,a,c)},fitRect:function(a,b,c){var d=this,e=d.getWidth(),f=d.getHeight(),g=a.x+a.width/2,h=a.y+a.height/2,i=s(e/a.width,f/a.height),j=d._zoom,k=-g*j+e/2,l=-h*j+f/2;0!==i&&(c&&(i=s(1,i)),b?d.setTranslate(k,l,{finishFunc:function(){d.setZoom(i,b)}}):(d.setTranslate(k,l),d.setZoom(i)))},toCanvas:function(a){var b=this,c=b.getContentRect(),d=kc(),e=b._zoom,f=c.x*e,g=c.y*e,h=c.width*e,i=c.height*e;$d(d,h,i,1);var j=lc(d);return a&&(j.fillStyle=a,j.beginPath(),j.rect(0,0,h,i),j.fill()),Nc(j,-f,-g),j.scale(e,e),b.draw(j),j.restore(),d},toDataURL:function(a){return this.toCanvas(a).toDataURL()},getClipBounds:function(){return this._clipBounds},draw:function(a,b){var c,d,e=this;e.drawBottomPainters(a),e.each(function(f){e._visibleMap[f._id]&&(c=e.getDataUI(f),c&&(d=c.getBounds(),(!b||le(b,d))&&c.draw(a)))}),e.drawTopPainters(a)},validateImpl:function(){var a,b,c,d,e,f=this,g=f.tx(),h=f.ty(),i=f._zoom,j=f._canvas,k=this.getWidth(),l=this.getHeight(),m=f._viewRect,n={x:-g/i,y:-h/i,width:k/i,height:l/i},q={},s=f._dirtyRects,t=f._dirtyMap,u=f._redrawAll,v=f._makeVisibleData;(k!==j.clientWidth||l!==j.clientHeight)&&($d(j,k,l),u=1),u||Wb(n,m)||(u=1),f._viewRect=n,f.each(function(a){b=a._id;var d=q[b]=f.isVisible(a);d!==f._visibleMap[b]&&(t[b]=a,c=f.getDataUI(t[b]),c&&c.onVisibleChanged(d),f.onVisibleChanged(a,d))},f);for(b in t)c=f.getDataUI(t[b]),c&&(!u&&f._visibleMap[b]&&(e=c.getBounds(),e&&s.add(e)),c.invalidate()),f._invalidateContentRect=1;if(f._visibleMap=q,!u)for(b in t)q[b]&&(c=f.getDataUI(t[b]),c&&(e=c.getBounds(),e&&s.add(e)));if(u?d=n:(s.each(function(a){le(n,a)&&(d=ie(d,a))}),d&&(oe(d,r(1,1/i)),d.x=o(d.x*i)/i,d.y=o(d.y*i)/i,d.width=p(d.width*i)/i,d.height=p(d.height*i)/i,d=me(n,d))),f._clipBounds=d,d&&(a=lc(j),_d(a,g,h,i),a.beginPath(),a.rect(d.x,d.y,d.width,d.height),a.clip(),a.clearRect(d.x,d.y,d.width,d.height),f.draw(a,d),a.restore(),delete f._clipBounds),f._dirtyMap={},s.clear(),delete f._redrawAll,v&&k>0&&l>0){var c=f.getDataUI(v);if(c){var e=c.getBounds(),w=f._viewRect,x=w.x,y=w.y,z=w.width,A=w.height,i=f._zoom;e&&!le(e,w)&&(e.x+e.width<x&&f.tx(-e.x*i),e.x>x+z&&f.tx(-(e.x+e.width-z)*i),e.y+e.height<y&&f.ty(-e.y*i),e.y>y+A&&f.ty(-(e.y+e.height-A)*i))}delete f._makeVisibleData}f._invalidateContentRect&&(delete f._invalidateContentRect,delete f._contentRect),f.updateScrollBar()},isScrollBarVisible:function(){return!!this._scrollBarDiv},setScrollBarVisible:function(a){a!==this.isScrollBarVisible()&&(a?(this._view.appendChild(this._scrollBarDiv=jc()),this._scrollBarDiv.appendChild(this._vBar=jc()),this._scrollBarDiv.appendChild(this._hBar=jc())):(this._view.removeChild(this._scrollBarDiv),delete this._scrollBarDiv,delete this._vBar,delete this._hBar),this.fp("scrollBarVisible",!a,a))},showScrollBar:function(){if(this._scrollBarDiv){if(!this._scrollTimer){var a=this;setTimeout(function(){a.handleScrollTimeout()},Dd),this.iv()}this._scrollTimer=new Date}},handleScrollTimeout:function(){if(this._scrollTimer){var a=new Date;if(a.getTime()-this._scrollTimer.getTime()>=Dd)delete this._scrollTimer,this.iv();else{var b=this;setTimeout(function(){b.handleScrollTimeout()},Dd)}}},updateScrollBar:function(){if(this._scrollBarDiv){var a=this._vBar,b=this._hBar;if(this._autoHideScrollBar&&!this._scrollTimer)return a.style.visibility="hidden",b.style.visibility="hidden",void 0;var c=this.getScrollBarColor(),d=this._zoom,e=this.getScrollBarSize(),f=this.getViewRect(),g=this.getScrollRect(),h=f.height*d,i=g.height*d,j=f.width*d-e-2,k=h*((f.y-g.y)*d/i),l=h*(h/i),m=a.style;i-.5>h?(Ed>l&&(k=k+l/2-Ed/2,0>k&&(k=0),k+Ed>h&&(k=h-Ed),l=Ed),nc(a,j,k,e,l),m.visibility="visible",m.background=c,m.borderRadius=e/2+$):m.visibility="hidden";var n=f.width*d,o=g.width*d,k=f.height*d-e-2,j=n*((f.x-g.x)*d/o),p=n*(n/o),m=b.style;o-.5>n?(Ed>p&&(j=j+p/2-Ed/2,0>j&&(j=0),j+Ed>n&&(j=n-Ed),p=Ed),nc(b,j,k,p,e),m.visibility="visible",m.background=c,m.borderRadius=e/2+$):m.visibility="hidden"}},setDataModel:function(a){var b=this,c=b._dataModel,d=b._selectionModel;c!==a&&(c&&(c.umm(b.handleDataModelChange,b),c.umd(b.handleDataPropertyChange,b),c.removeIndexChangeListener(b.handleIndexChange,b),d||c.sm().ums(b.handleSelectionChange,b)),b._dataModel=a,a.mm(b.handleDataModelChange,b),a.md(b.handleDataPropertyChange,b),a.addIndexChangeListener(b.handleIndexChange,b),d?d._setDataModel(a):a.sm().ms(b.handleSelectionChange,b),b.invalidateAll(!0),b.fp("dataModel",c,a))},onPropertyChanged:function(a){this.redraw();var b=a.property;cf[b]?this.showScrollBar():"currentSubGraph"===b&&this.onCurrentSubGraphChanged(a)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(a){var b=this,c=a.kind,d=a.data;if(b._invalidateContentRect=1,"add"===c)b.invalidateData(d),d instanceof Bf&&d.getEdgeGroup()&&d.getEdgeGroup().eachSiblingEdge(b.invalidateData,b);else if("remove"===c){var e=d._id,g=b._uiMap[e];if(g){if(b._visibleMap[e]){var h=g.getBounds();h&&b.redraw(h)}g.dispose(),delete b._uiMap[e],delete b._dirtyMap[e],delete b._visibleMap[e]}d===b._currentSubGraph&&b.setCurrentSubGraph(f)}else"clear"===c&&(b.invalidateAll(!0),b.setCurrentSubGraph(f))},handleIndexChange:function(a){this.invalidateData(a.data)},adjustIndex:function(a){if(this.isVisible(a)){for(var b=a;b._parent&&this.isVisible(b._parent);)b=b._parent;b&&b!==a&&this._dataModel.adjustIndex(b),this._dataModel.adjustIndex(a)}},isMovable:function(a){if(a instanceof Bf){if("points"!==a.getStyle("edge.type"))return!1;if(!this.isEditable(a))return!1}return this._movableFunc?this._movableFunc(a):!0},isEditable:function(a){if(!this._editInteractor||!this.isSelected(a))return!1;if(a instanceof Cf){var b=this.getDataUI(a);if(!b||b._groupInfo)return!1}return a instanceof Bf&&"points"!==a.getStyle("edge.type")?!1:this._editableFunc?this._editableFunc(a):!0},handleDelete:function(){this._editInteractor&&this.removeSelection()},isPointEditable:function(a){return a instanceof wf&&0!==a.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(a):!0},isRectEditable:function(a){return a instanceof wf&&0!==a.getRotation()?!1:this._rectEditableFunc?this._rectEditableFunc(a):!0},isRotationEditable:function(a){return a.setRotation?this._rotationEditableFunc?this._rotationEditableFunc(a):!0:!1},getRotationPoint:function(a){var b=re(a.getRotation(),0,-a.getHeight()/2-(Q?32:16)),c=a.getPosition();return b.x+=c.x,b.y+=c.y,b},getLogicalPoint:function(a){return qe(a,this._view,this.tx(),this.ty(),this._zoom,this._zoom)},getSelectedDataAt:function(a){var b=this;return this.getDataAt(a,function(a){return b.isSelected(a)})},getDataAt:function(a,b){a.target&&(a=this.lp(a));var c;return this.reverseEach(function(d){if(b?b(d):this.isSelectable(d)){if(this.pointHits(d,a.x,a.y))return c=d,!1}else;},this),c},getDatasInRect:function(a,b,d){d===c&&(d=1);var e=new We;return this.reverseEach(function(c){d&&!this.isSelectable(c)||(b?this.rectIntersects(c,a):this.rectContains(c,a))&&e.add(c)},this),e},moveSelection:function(a,b){pe(this.sm().toSelection(this.isMovable,this),a,b)},getDataUIBounds:function(a){var b=this.getDataUI(a);return b?b.getBounds():f},getBoundsForGroup:function(a){return a.s("ingroup")?this.getDataUIBounds(a):f},pointHits:function(a,b,c){return 2===arguments.length&&(c=b.y,b=b.x),this.rectIntersects(a,Kb(b,c))},rectIntersects:function(a,b){var c=f;if(this._visibleMap[a._id]){var d=this._uiMap[a._id];if(d){var e=d.getBounds();if(ke(b,e))c=!0;else if((b=me(b,e))&&(d.rectIntersects&&(c=d.rectIntersects(b)),c==f)){var g=b.x,h=b.y,j=b.width,k=b.height,l=1,m=i.hitMaxArea,n=j*k;n>m&&(l=m/n);var o=Jc(j*l,k*l);Nc(o,-g*l,-h*l),o.scale(l,l),d.draw(o);try{for(var p=0,q=o.getImageData(0,0,j*l,k*l).data;p<q.length;p+=4)if(0!==q[p+3]){c=!0;break}o.restore()}catch(r){Ic=f,c=!0}}}}return c?!0:!1},rectContains:function(a,b){if(this._visibleMap[a._id]){var c=this._uiMap[a._id];if(c)return ke(b,c.getBounds())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(a){var b=this,c=b._focusData,d=c&&b._uiMap[c._id],e=0,f=b._dataModel._datas;c&&c._enabled&&c._editable&&d&&d.onKeyDown&&d.onKeyDown(a)===!0||(9===a.keyCode&&(c&&(e=f.indexOf(c),de(a)?-1===--e&&(e=0):++e===f.size()&&(e=0)),b._focusData=c=f.get(e),b.sm().setSelection(c)),vc(a)?b.selectAll():Gc(a)&&b.isResettable()&&b.reset(),b.sm().isEmpty()||(wc(a)&&b.handleDelete(a),Cc(a)&&(b.moveSelection(-1,0),b.fi({kind:"moveLeft"})),Dc(a)&&(b.moveSelection(0,-1),b.fi({kind:"moveUp"})),Ec(a)&&(b.moveSelection(1,0),b.fi({kind:"moveRight"})),Fc(a)&&(b.moveSelection(0,1),b.fi({kind:"moveDown"}))))},handleScroll:function(a,b){Ld(a);var c=this.lp(a);b>0?this.scrollZoomIn(c):0>b&&this.scrollZoomOut(c)},handlePinch:function(a,b,c){b>c?this.pinchZoomIn(a):this.pinchZoomOut(a)},checkDoubleClickOnNote:function(a,b){var c=this.lp(a),d=this.getDataUI(b),e=d.noteInfo;return e&&b.s("note.toggleable")&&je(e.rect,c)?(b.s("note.expanded",!b.s("note.expanded")),this.fi({kind:"toggleNote",event:a,data:b}),!0):(e=d.note2Info,e&&b.s("note2.toggleable")&&je(e.rect,c)?(b.s("note2.expanded",!b.s("note2.expanded")),this.fi({kind:"toggleNote2",event:a,data:b}),!0):!1)},onVisibleChanged:function(){},isNoteVisible:function(){return this._zoom>.2},isLabelVisible:function(){return this._zoom>.2},isSelectVisible:function(){return this._zoom>.2},isEditVisible:function(){return this._zoom>.2}});var Hf=uf.DataUI=function(a,b){this.gv=this._graphView=a,this.s=function(a){return b.getStyle(a)},this._data=b,this._rects=new We};vf("DataUI",b,{_bounds:f,ms_icons:1,getData:function(){return this._data},getGraphView:function(){return this.gv},onVisibleChanged:function(){},dispose:function(){},getSelectWidth:function(){return this.gv.isSelectVisible(this._data)&&this.gv.isSelected(this._data)?this.s("select.width"):0},getBodyColor:function(a){var b=this._data,c=this.gv.getBodyColor(b);return c?c:a?b.getStyle(a):f},invalidate:function(){this._bounds=f},getBounds:function(){var a=this;if(!a._bounds){a.labelInfo=a.label2Info=a.noteInfo=a.note2Info=a.iconsInfo=f,a._rects.clear(),a.prepareCreateBounds();var b=a._data,c=a.gv;this.editInfo=c.isEditable(b)?{rectEditable:c.isRectEditable(b),pointEditable:c.isPointEditable(b),rotationEditable:c.isRotationEditable(b)}:f,a._bounds=a.createBounds()}return a._bounds},prepareCreateBounds:function(){},getPosition:function(){return Eb},addRect:function(a,b){a&&this._rects.add(ue(a,b))},createBounds:function(){var a=this;a.updateLabel(),a.updateLabel2(),a.updateNote(),a.updateNote2(),a.updateIcons(),a.editInfo&&a.updateEdit();var b;return a._rects.each(function(a){b=ie(b,a)}),a._rects.clear(),b},draw:function(a){var b=this._data,c=this.gv;this.drawBody(a),c.isLabelVisible(b)&&(this.drawLabel(a),this.drawLabel2(a)),c.isNoteVisible(b)&&(this.drawNote(a),this.drawNote2(a)),this.drawIcons(a),this.editInfo&&c.isEditVisible(b)&&this.drawEdit(a)},drawBody:function(){},drawLabel:function(a){Vc(a,this.labelInfo)},drawLabel2:function(a){Vc(a,this.label2Info)},drawNote:function(a){Wc(a,this.noteInfo)},drawNote2:function(a){Wc(a,this.note2Info)},drawEdit:function(){},updateLabel:function(){var a=this._data,b=this.gv,c=this.s,d=b.getLabel(a);if(d){var e=c("label.max"),f=this.labelInfo={label:d,color:b.getLabelColor(a),font:c("label.font"),rotation:this.getRotation(c("label.rotation")),background:b.getLabelBackground(a)},g=_b(f.font,d);e>0&&e<g.width&&(f.labelWidth=g.width,g.width=e);var h=this.getPosition(c("label.position"),c("label.offset.x"),c("label.offset.y"),g);g.x=h.x-g.width/2,g.y=h.y-g.height/2,this.addRect(f.rect=g,f.rotation)}},updateLabel2:function(){var a=this._data,b=this.gv,c=this.s,d=b.getLabel2(a);if(d){var e=c("label2.max"),f=this.label2Info={label:d,color:b.getLabel2Color(a),font:c("label2.font"),rotation:this.getRotation(c("label2.rotation")),background:b.getLabel2Background(a)},g=_b(f.font,d);e>0&&e<g.width&&(f.labelWidth=g.width,g.width=e);var h=this.getPosition(c("label2.position"),c("label2.offset.x"),c("label2.offset.y"),g);g.x=h.x-g.width/2,g.y=h.y-g.height/2,this.addRect(f.rect=g,f.rotation)}},updateNote:function(){var a=this.s,b=this.gv.getNote(this._data);if(b){var c=this.noteInfo={note:b,expanded:a("note.expanded"),font:a("note.font"),color:a("note.color"),borderWidth:a("note.border.width"),borderColor:a("note.border.color"),background:this.gv.getNoteBackground(this._data)};this._addNoteRect(c,this.getPosition(a("note.position"),a("note.offset.x"),a("note.offset.y")),a("note.max"))}},updateNote2:function(){var a=this.s,b=this.gv.getNote2(this._data);if(b){var c=this.note2Info={note:b,expanded:a("note2.expanded"),font:a("note2.font"),color:a("note2.color"),borderWidth:a("note2.border.width"),borderColor:a("note2.border.color"),background:this.gv.getNote2Background(this._data)};this._addNoteRect(c,this.getPosition(a("note2.position"),a("note2.offset.x"),a("note2.offset.y")),a("note2.max"))}},_addNoteRect:function(a,b,c){var d,e;a.expanded?(d=_b(a.font,a.note),d.width+=6,d.height+=2,c>0&&c<d.width&&(a.labelWidth=d.width,d.width=c),e=a.rect={x:b.x-d.width/2,y:b.y-8-d.height,width:d.width,height:d.height+8}):e=a.rect={x:b.x-6,y:b.y-18,width:12,height:18},this.addRect({x:e.x-1,y:e.y-1,width:e.width+2,height:e.height+2})},updateEdit:function(){},drawIcons:function(a){var b=this.iconsInfo;if(b){var c=b.icons;for(var d in c)for(var e=c[d],f=e.names,g=f.length,h=b.rects[d],i=h.rotation,j=0;g>j;j++){var k=f[j],l=Nd(k),m=h[j];
if(i){var n=m.x+m.width/2,o=m.y+m.height/2;a.save(),Nc(a,n,o),a.rotate(i),Nc(a,-n,-o)}Ve(a,l,m.x,m.y,m.width,m.height,this._data,this.gv),i&&a.restore()}}}});var If=uf.NodeUI=function(a,b){Ub(If,this,[a,b])};vf("NodeUI",Hf,{_addBorderAndSelectRect:function(a,b){var c=this.s,d=a.rect;(a.borderColor=this.gv.getBorderColor(this._data))&&(a.borderWidth=c("border.width"),a.borderPadding=c("border.padding"),b=r(b,a.borderPadding+a.borderWidth/2)),(a.selectWidth=this.getSelectWidth())&&(a.selectColor=c("select.color"),a.selectPadding=c("select.padding"),b=r(b,a.selectPadding+a.selectWidth/2)),b>0&&(d=Sd(d),oe(d,b)),this.addRect(d)},_drawBorderAndSelect:function(a,b,c){var c=b.rect;if(b.borderWidth>0){var d=b.borderPadding;a.strokeStyle=b.borderColor,a.lineWidth=b.borderWidth,a.beginPath(),a.rect(c.x-d,c.y-d,c.width+2*d,c.height+2*d),a.stroke()}b.selectWidth>0&&(d=b.selectPadding,a.strokeStyle=b.selectColor,a.lineWidth=b.selectWidth,a.beginPath(),a.rect(c.x-d,c.y-d,c.width+2*d,c.height+2*d),a.stroke())},prepareCreateBounds:function(){var a=this,b=a.s,c=a._data,d=c.getStyle("shape"),e=a.getBodyColor(),f=a._nodeInfo=d?{shape:d,shapeBackground:a.getBodyColor("shape.background"),shapeBorderWidth:b("shape.border.width"),shapeBorderColor:b("shape.border.color"),shapeBorder3d:b("shape.border.3d"),shapeBorder3dColor:b("shape.border.3d.color"),shapeBorder3dAccuracy:b("shape.border.3d.accuracy"),shapeGradient:b("shape.gradient"),shapeGradientColor:b("shape.gradient.color"),shapePattern:b("shape.pattern")}:{img:Nd(c.getImage(),e),bodyColor:e};f.rect=c.getRect(),f.position=c.getPosition(),f.rotation=c.getRotation(),"rect"===d&&(f.shapeDepth=b("shape.depth")),a._addBorderAndSelectRect(f,d?f.shapeBorderWidth/2:0)},getPosition:function(a,b,c,d){var e=gd(a,this._nodeInfo.rect,d);return e.x+=b,e.y+=c,e},drawBody:function(a){var b=this,c=b.gv,d=b._data,e=b._nodeInfo,f=e.rect,g=f,h=e.position,i=e.rotation,j=e.shape;if(f.width>0&&f.height>0){if(i&&(a.save(),Nc(a,h.x,h.y),a.rotate(i),Nc(a,-h.x,-h.y),g=d.getSize(),g.x=h.x-g.width/2,g.y=h.y-g.height/2),b.freeDraw)b.freeDraw(a,g,e);else if(j){var k=Pe(a,e.shapePattern),l=e.shapeBackground,m=e.shapeBorderWidth,n=e.shapeBorderColor;l?(Yd(a,l,e.shapeGradient,e.shapeGradientColor,g),Xd(a,j,g),a.fill(),a!==k&&Xd(k,j,g)):Xd(k,j,g),m>0&&(a.lineWidth=m,a.strokeStyle=n,a.stroke(),e.shapeBorder3d&&Oc(a,n,e.shapeBorder3dColor,m,c._zoom,e.shapeBorder3dAccuracy)),Uc(a,l,e.shapeDepth,g)}else Ve(a,e.img,g.x,g.y,g.width,g.height,d,c,e.bodyColor);i&&a.restore()}b._drawBorderAndSelect(a,e)},updateEdit:function(){var a,b=this._data,c=this.editInfo,d=this.gv.getEditPointSize()/2+2;if(c.rectEditable&&(a=b.getRect(),oe(a,d)),c.rotationEditable){var e=c.rotationPoint=this.gv.getRotationPoint(b);a=ie(a,{x:e.x-d,y:e.y-d,width:2*d,height:2*d})}this.addRect(a)},drawEdit:function(a){var b=this.gv,c=this.editInfo,d=this._data.getRect(),e=b.getEditPointSize(),f=c.rotationPoint;c.rectEditable&&(a.fillStyle=b.getEditPointBackground(),a.strokeStyle=b.getEditPointBorderColor(),a.lineWidth=1,[{x:d.x,y:d.y},{x:d.x+d.width/2,y:d.y},{x:d.x+d.width,y:d.y},{x:d.x,y:d.y+d.height/2},{x:d.x+d.width,y:d.y+d.height/2},{x:d.x,y:d.y+d.height},{x:d.x+d.width/2,y:d.y+d.height},{x:d.x+d.width,y:d.y+d.height}].forEach(function(b){a.beginPath(),a.rect(b.x-e/2,b.y-e/2,e,e),a.fill(),a.stroke()})),c.rotationEditable&&(a.fillStyle=b.getEditPointBorderColor(),a.strokeStyle=b.getEditPointBackground(),a.lineWidth=1,a.beginPath(),a.arc(f.x,f.y,e/2,0,z,!0),a.fill(),a.stroke())}});var Jf=uf.EdgeUI=function(a,b){Ub(Jf,this,[a,b])};vf("EdgeUI",Hf,{prepareCreateBounds:function(){var a,b=this._data,c=this.s,d=c("edge.type"),e=b.isLooped(),g=c("edge.width"),h=this.gv.getBorderColor(b),i=h?c("border.width"):0,j=this.getSelectWidth(),k=b._sourceAgent,l=b._targetAgent,m=k?k.getPosition():f,n=l?l.getPosition():f,o=this._edgeInfo=m&&n?{looped:e,type:d,width:g,color:this.getBodyColor("edge.color"),borderColor:h,borderWidth:i,selectColor:j?c("select.color"):f,selectWidth:j,pattern:c("edge.pattern"),center:c("edge.center"),is3d:c("edge.3d"),edge3dColor:c("edge.3d.color"),edge3dAccuracy:c("edge.3d.accuracy")}:f;if(o){if("points"===d)o.points=c("edge.points"),a=ie(he(o.points),he(m,n));else{var p=this.getSumGap(e);if(e)m=Sd(m),m.x-=k.getWidth()/2,o.radius=p,a={x:m.x-p,y:m.y-p,width:2*p,height:2*p};else{var q=ge(m,n),r=c("edge.offset");r=q>2*r?r:q/2;var s={x:r,y:p},t={x:q-r,y:p},u=D(n.y-m.y,n.x-m.x),v=o.mat=new ad(u);if(o.orienAngle=u,o.angle=n.x<m.x?u+y:u,o.rect={x:s.x,y:s.y,width:t.x-s.x,height:0},o.origin=m,s=v.tf(s),s.x+=m.x,s.y+=m.y,t=v.tf(t),t.x+=m.x,t.y+=m.y,o.center){var w={x:q,y:0};w=v.tf(w),w.x+=m.x,w.y+=m.y,a=he([m,s,t,w]),o.c1=m,o.c2=w}else a=he(s,t);m=s,n=t}}oe(a,g/2+i+j),this.addRect(a),o.sourcePoint=m,o.targetPoint=n}},getRotation:function(a,b){var c=this._edgeInfo;return a==f?c&&c.angle!=f?b?c.orienAngle:c.angle:0:b&&c&&c.angle!=f?c.orienAngle+a:a},getPosition:function(a,b,c,d){var e=this._edgeInfo;if(e){var f,g,h=e.type,i=e.points,j=e.sourcePoint,k=e.targetPoint;if(!h)return e.looped?{x:j.x-e.radius+b,y:j.y+c}:(g=e.rect,f=34===a?{x:g.x+g.width/4,y:g.y+g.height/4}:35===a?{x:g.x+.75*g.width,y:g.y+.75*g.height}:gd(a,g,d),f.x+=b,f.y+=c,f=e.mat.tf(f),f.x+=e.origin.x,f.y+=e.origin.y,f);if(i)return bf[a]?i.isEmpty()?g={x:(j.x+k.x)/2,y:(j.y+k.y)/2}:(f=i.get(p(i.size()/2)),g={x:f.x,y:f.y}):g=af[a]?{x:j.x,y:j.y}:{x:k.x,y:k.y},g.width=0,g.height=0,f=gd(a,g,d),f.x+=b,f.y+=c,f}return Eb},draw:function(a){this._edgeInfo&&Jf.superClass.draw.call(this,a)},drawBody:function(a){var b=this._edgeInfo,c=b.type,d=b.points,e=b.sourcePoint,f=e.x,g=e.y,h=b.targetPoint,i=h.x,j=h.y,k=b.width,l=b.selectWidth,m=b.borderWidth,n=b.pattern,o=Pe(a,n),p=b.color;a.beginPath(),c?d&&(o.moveTo(f,g),d.each(function(a){o.lineTo(a.x,a.y)}),o.lineTo(i,j)):b.looped?o.arc(f,g,b.radius,0,z,!0):b.center?(o.moveTo(b.c1.x,b.c1.y),o.lineTo(f,g),o.lineTo(i,j),o.lineTo(b.c2.x,b.c2.y)):n?drawDashedLine(a,n,f,g,i,j):(a.moveTo(f,g),a.lineTo(i,j)),l&&(a.strokeStyle=b.selectColor,a.lineWidth=k+2*(m+l),a.stroke()),m&&(a.strokeStyle=b.borderColor,a.lineWidth=k+2*m,a.stroke()),a.strokeStyle=p,a.lineWidth=k,a.stroke(),b.is3d&&Oc(a,p,b.edge3dColor,k,this.gv._zoom,b.edge3dAccuracy)},updateEdit:function(){var a=this._edgeInfo;if(this.editInfo.pointEditable&&a&&a.points){var b=he(a.points);b&&(oe(b,this.gv.getEditPointSize()/2+2),this.addRect(b))}},drawEdit:function(a){var b=this._edgeInfo;if(this.editInfo.pointEditable&&b&&b.points){var c=this.gv.getEditPointSize()/2;a.fillStyle=this.gv.getEditPointBackground(),a.strokeStyle=this.gv.getEditPointBorderColor(),a.lineWidth=1,b.points.each(function(b){a.beginPath(),a.arc(b.x,b.y,c,0,z,!0),a.fill(),a.stroke()})}},getSumGap:function(a){var b=this._data;if(!b.getEdgeGroup())return a?b.getStyle("edge.gap"):0;var c,d=0,e=0,f=0,g=this.gv;if(b.getEdgeGroup().getSiblings().each(function(a){a.each(function(a){if(g.isVisible(a)){var h=a.getStyle("edge.gap");c?(e+=f/2+h/2,f=h):(c=a,f=h),a===b&&(d=e)}})}),a)return e-d+f;var h=d-e/2;return c&&b._sourceAgent!==c._sourceAgent&&(h=-h),h}});var Kf=uf.GroupUI=function(a,b){Ub(Kf,this,[a,b])};vf("GroupUI",If,{prepareCreateBounds:function(){var a,b=this.s,c=this._data,d=this.gv;if(this._groupInfo=f,c.isExpanded()&&c.eachChild(function(b){a=ie(a,d.getBoundsForGroup(b))},this),a){oe(a,b("group.padding"));var e=this._groupInfo={rect:a,childrenRect:a,depth:b("group.depth"),background:this.getBodyColor("group.background"),labelBackground:b("group.title.background"),labelHeight:0},g=d.getLabel(c);if(g){var h,i=this.labelInfo={label:g,color:b("group.title.color"),font:b("group.title.font")},j=_b(i.font,i.label),k=j.width,l=j.height,m=b("group.title.align");k>a.width&&(a.width=k),i.rect={y:a.y-l,width:j.width,height:l},h=m===T?a.x:m===U?a.x+a.width-k:a.x+a.width/2-k/2,i.rect.x=h,e.labelRect={x:a.x,y:a.y-l,width:a.width,height:l},e.rect={x:a.x,y:a.y-l,width:a.width,height:a.height+l}}this._addBorderAndSelectRect(e,0)}else Kf.superClass.prepareCreateBounds.call(this)},getPosition:function(a,b,c,d){if(this._groupInfo){var e=gd(a,this._groupInfo.rect,d);return e.x+=b,e.y+=c,e}return Kf.superClass.getPosition.apply(this,arguments)},updateLabel:function(){this._groupInfo||Kf.superClass.updateLabel.call(this)},drawBody:function(a){var b=this._groupInfo;if(b){var c=b.childrenRect,d=b.labelRect,e=b.background;e&&(a.fillStyle=e,a.beginPath(),a.rect(c.x,c.y,c.width,c.height),a.fill()),Uc(a,e,b.depth,c),d&&(a.fillStyle=b.labelBackground,a.beginPath(),a.rect(d.x,d.y,d.width,d.height),a.fill(),Uc(a,b.labelBackground,b.depth,d)),this._drawBorderAndSelect(a,b)}else Kf.superClass.drawBody.call(this,a)}});var Lf=uf.ShapeUI=function(a,b){Ub(Lf,this,[a,b])};vf("ShapeUI",If,{prepareCreateBounds:function(){var a=this._data,b=this.s,c=this.gv,d=a.getPoints(),e=c.getBorderColor(a),g=e?b("border.width"):0,h=this.getSelectWidth(),i=b("shape.border.width"),j=a.getRect(),k=this._shapeInfo=d.isEmpty()?f:{rect:j,rotation:a.getRotation(),position:a.getPosition(),points:d,segments:a.getSegments(),bodyColor:c.getBodyColor(a),borderColor:e,borderWidth:g,border3d:b("shape.border.3d"),border3dColor:b("shape.border.3d.color"),border3dAccuracy:b("shape.border.3d.accuracy"),selectColor:h?b("select.color"):f,selectWidth:h,shapeBackground:b("shape.background"),shapeBorderWidth:i,shapeBorderColor:b("shape.border.color"),shapeGradient:b("shape.gradient"),shapeGradientColor:b("shape.gradient.color"),shapePattern:b("shape.pattern"),shapeBorderCap:b("shape.border.cap"),shapeBorderJoin:b("shape.border.join")};if(k){var l=i/2+g+h;l&&(j=Sd(j),l*=2,oe(j,"miter"===k.shapeBorderJoin?4*l+20:l)),this.addRect(j)}},getPosition:function(a,b,c,d){var e=this._shapeInfo;if(!e)return Eb;if(e.shapeBackground){var f=gd(a,e.rect,d);return f.x+=b,f.y+=c,f}var f,g=e.points,h=g.size(),i=e.rotation;if(f=bf[a]?g.get(p(h/2)):af[a]?g.get(0):g.get(h-1),i){var j=e.position;f=re(i,f.x-j.x,f.y-j.y),f.x+=j.x,f.y+=j.y}return f=gd(a,{x:f.x,y:f.y,width:0,height:0},d),f.x+=b,f.y+=c,f},draw:function(a){this._shapeInfo&&Lf.superClass.draw.call(this,a)},drawBody:function(a){var b,c=this._shapeInfo,d=c.position,e=c.rotation,f=c.bodyColor,g=c.borderWidth,h=c.selectWidth,i=c.shapeBackground,j=c.shapeBorderWidth,k=c.points,l=c.segments,m=a.lineJoin,n=a.lineCap;a.lineJoin=c.shapeBorderJoin,a.lineCap=c.shapeBorderCap,e&&(a.save(),Nc(a,d.x,d.y),a.rotate(e),Nc(a,-d.x,-d.y));var o=Pe(a,c.shapePattern);i?(b=f?f:i,Yd(a,b,c.shapeGradient,c.shapeGradientColor,c.rect),Qc(a,k,l),a.fill(),o!==a&&Qc(o,k,l)):Qc(o,k,l),h&&(a.strokeStyle=c.selectColor,a.lineWidth=j+2*(g+h),a.stroke()),g&&(a.strokeStyle=c.borderColor,a.lineWidth=j+2*g,a.stroke()),j&&(b=c.shapeBorderColor,!i&&f&&(b=f),a.strokeStyle=b,a.lineWidth=j,a.stroke(),c.border3d&&Oc(a,b,c.border3dColor,j,this.gv._zoom,c.border3dAccuracy)),e&&a.restore(),a.lineJoin=m,a.lineCap=n},updateEdit:function(){if(Lf.superClass.updateEdit.call(this),this.editInfo.pointEditable){var a=this._data.getRect();oe(a,this.gv.getEditPointSize()/2+2),this.addRect(a)}},drawEdit:function(a){if(Lf.superClass.drawEdit.call(this,a),this.editInfo.pointEditable){var b=this.gv,c=b.getEditPointSize()/2;a.fillStyle=b.getEditPointBackground(),a.strokeStyle=b.getEditPointBorderColor(),a.lineWidth=1,this._data.getPoints().each(function(b){a.beginPath(),a.arc(b.x,b.y,c,0,z,!0),a.fill(),a.stroke()})}}});var Mf=uf.GridUI=function(a,b){Ub(Mf,this,[a,b])};vf("GridUI",If,{prepareCreateBounds:function(){Mf.superClass.prepareCreateBounds.call(this);var a=this.s,b=this._nodeInfo;this._gridInfo=b.img||b.shape?f:{background:this.getBodyColor("grid.background"),depth:a("grid.depth"),rect:b.rect,cellDepth:a("grid.cell.depth"),rowCount:a("grid.row.count"),columnCount:a("grid.column.count")}},drawBody:function(a){var b=this._gridInfo;if(!b)return Mf.superClass.drawBody.call(this,a),void 0;var c=b.background,d=b.rect,e=b.cellDepth;if(c&&(a.fillStyle=c,a.beginPath(),a.rect(d.x,d.y,d.width,d.height),a.fill(),Uc(a,c,b.depth,d),e))for(var f,g=0;g<b.rowCount;g++)for(f=0;f<b.columnCount;f++)d=this._data.getCellRect(g,f),d&&Uc(a,c,e,d);this._drawBorderAndSelect(a,this._nodeInfo)}});var Nf=uf.Interactor=function(a){this.gv=this._graphView=a};vf("Interactor",b,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(a){this.gv.fi(a)},setCursor:function(a){Q||(this.getView().style.cursor=a)},startDragging:function(a){this._lastClientPoint=fe(a),this._lastLogicalPoint=this.gv.lp(a),se(this,a)},clearDragging:function(){delete this._lastClientPoint,delete this._lastLogicalPoint,delete this._logicalPoint},autoScroll:function(a){var b=this.gv,c=b.getAutoScrollZone(),d=c/b.getZoom(),e=c/3,f=b._viewRect,g=b.lp(a),h=this._lastClientPoint,i={x:b.tx(),y:b.ty()};return g&&c>0&&f&&(g.x-f.x<d?b.translate(e,0):f.x+f.width-g.x<d&&b.translate(-e,0),g.y-f.y<d?b.translate(0,e):f.y+f.height-g.y<d&&b.translate(0,-e)),i.x=b.tx()-i.x,i.y=b.ty()-i.y,h&&(h.x+=i.x,h.y+=i.y),i}});var Of=uf.DefaultInteractor=function(a){Ub(Of,this,[a])};vf("DefaultInteractor",Nf,{handle_mousedown:function(a){Ld(a);var b=this.gv,c=b.getDataAt(a);b.setFocus(),ce(a)?b.handleDoubleClick(a,c):b.handleClick(a,c),!b.isPannable()||c||b._editing||!ae(a)||ee(a)||(this._tx=b.tx(),this._ty=b.ty(),this.startDragging(a))},handleWindowMouseUp:function(a){this.gv._panning&&(delete this.gv._panning,this.gv.onPanEnded(),this.fi({kind:"endPan",event:a})),delete this._tx,delete this._ty,this.clearDragging()},handleWindowMouseMove:function(a){this.fi({kind:this.gv._panning?"betweenPan":"beginPan",event:a}),this.gv._panning=1,this.gv.setTranslate(this._tx+a.clientX-this._lastClientPoint.x,this._ty+a.clientY-this._lastClientPoint.y)},handle_mousewheel:function(a){this.gv.handleScroll(a,a.wheelDelta)},handle_DOMMouseScroll:function(a){2===a.axis&&this.gv.handleScroll(a,-a.detail)},handle_keydown:function(a){this.gv.handleKeyDown(a)}});var Pf=uf.SelectInteractor=function(a){Ub(Pf,this,[a])};vf("SelectInteractor",Nf,{draw:function(a){var b=this.mark;this.intersects()?(a.fillStyle=this.gv.getSelectBackground(),a.beginPath(),a.rect(b.x,b.y,b.width,b.height),a.fill()):Tc(a,this.gv.getSelectBorderColor(),b.x,b.y,b.width,b.height)},handle_mousedown:function(a){var b=this.gv;if(this.pendingCS=f,!b._editing){var c=b.getDataAt(a),d=b.sm();c?ee(a)?d.co(c)?d.rs(c):d.as(c):d.co(c)||d.ss(c):ee(a)||!b.isPannable()?ae(a)&&(ee(a)||d.cs(),b.isRectSelectable()&&(this.startDragging(a),b._selectingData=1)):this.pendingCS=fe(a)}},handle_mouseup:function(a){var b=this.pendingCS;b&&(ge(b,fe(a))<=1&&this.gv.sm().cs(),this.pendingCS=f)},handleWindowMouseUp:function(a){this.clear(a)},handleWindowMouseMove:function(a){var b=this.gv;this._logicalPoint=b.lp(a),this.mark?(this.autoScroll(a),this.redraw()):b.addTopPainter(this),this.mark=he(this._lastLogicalPoint,this._logicalPoint),this.redraw()},intersects:function(){return this._lastLogicalPoint.x>this._logicalPoint.x||this._lastLogicalPoint.y>this._logicalPoint.y},clear:function(){if(this.pendingCS=null,this._lastLogicalPoint){var a=this.gv,b=this.mark;if(b){if(0!==b.width&&0!==b.height){var c=a.getDatasInRect(b,this.intersects());if(!c.isEmpty()){var d=a.sm(),e=d.toSelection();c.each(function(a){d.co(a)?e.remove(a):e.add(a)}),d.ss(e)}}a.removeTopPainter(this),this.redraw(),delete this.mark}this.clearDragging(),delete a._selectingData}},redraw:function(){this.gv.redraw(oe(Sd(this.mark),1))}});var Qf=uf.MoveInteractor=function(a){Ub(Qf,this,[a])};vf("MoveInteractor",Nf,{handle_mousedown:function(a){var b=this.gv;if(ae(a)&&!b._editing){var c=b.getSelectedDataAt(a);c?(this._data=c,this.gv.handleMouseDown&&this.gv.handleMouseDown(a,c),this.startDragging(a),b.isMovable(c)&&(b._moving=1)):b._focusData=null}},handleWindowMouseUp:function(a){this.gv.handleMouseUp&&this.gv.handleMouseUp(a,this._data),this.clear(a)},handleWindowMouseMove:function(a){var b=this,c=b.gv;if((!c.handleDrag||c.handleDrag(a,b._data)!==!0)&&c._moving){b.fi({kind:b._logicalPoint?"betweenMove":"beginMove",event:a});var d=b._logicalPoint=c.lp(a);c.moveSelection(d.x-b._lastLogicalPoint.x,d.y-b._lastLogicalPoint.y),b._lastLogicalPoint=d,b.autoScroll(a)}},clear:function(a){var b=this,c=b.gv;b._lastLogicalPoint&&(delete b._lastLogicalPoint,delete b._data,delete c._moving,b._logicalPoint&&(b.fi({kind:"endMove",event:a}),c.onMoveEnded()),b.clearDragging())}});var Rf=uf.EditInteractor=function(a){Ub(Rf,this,[a])};vf("EditInteractor",Nf,{ms_edit:1,setUp:function(){Rf.superClass.setUp.call(this),Q||this.gv.setEditInteractor(this)},tearDown:function(){Rf.superClass.tearDown.call(this),Q||this.gv.setEditInteractor(f)},clear:function(){this.gv._editing&&(delete this.gv._editing,delete this._rotationNode,delete this._node,delete this._edge,delete this._shape,delete this._rect,delete this._direction,delete this._index,this.clearDragging(),this.setCursor(""))},handle_mousedown:function(a){if(ae(a)&&this.gv._editing){var b=this._index;this._node&&this._direction?(this._rect=this._node.getRect(),this.startDragging(a),this.fi({kind:"beginEditRect",event:a,data:this._node,direction:this._direction})):this._shape&&b>=0?(this.startDragging(a),this.fi({kind:"beginEditPoint",event:a,data:this._shape,index:b})):this._edge&&b>=0?(this.startDragging(a),this.fi({kind:"beginEditPoint",event:a,data:this._edge,index:b})):this._rotationNode&&(this.startDragging(a),this.fi({kind:"beginEditRotation",event:a,data:this._rotationNode}))}},handleWindowMouseUp:function(a){this.endEdit(a),this.clear()},handleWindowMouseMove:function(a){this.betweenEdit(a)},handle_mousemove:function(a){if(!pc){var b=this.gv;this.checkEdit(a,b.getSelectedDataAt(a))?b._editing=1:this.clear()}}});var Sf=uf.TouchInteractor=function(a,b){b=b||{},b.selectable===c&&(b.selectable=!0),b.movable===c&&(b.movable=!0),b.pannable===c&&(b.pannable=!0),b.pinchable===c&&(b.pinchable=!0),b.editable===c&&(b.editable=!0),this.params=b,Ub(Sf,this,[a])};vf("TouchInteractor",Nf,{ms_edit:1,setUp:function(){Sf.superClass.setUp.call(this),Q&&this.params.editable&&this.gv.setEditInteractor(this)},tearDown:function(){Sf.superClass.tearDown.call(this),Q&&this.params.editable&&this.gv.setEditInteractor(f)},clear:function(a){var b=this.gv;b._moving&&(this.fi({kind:"endMove",event:a}),delete b._moving,b.onMoveEnded()),b._panning&&(this.fi({kind:"endPan",event:a}),delete b._panning,b.onPanEnded()),b._pinching&&(this.fi({kind:"endPinch",event:a}),delete b._pinching,b.onPinchEnded()),b._editing&&(this.endEdit(a),delete this._rotationNode,delete this._node,delete this._edge,delete this._shape,delete this._rect,delete this._direction,delete this._index,delete b._editing),delete this._moving,delete this._panning,delete this._pinching,delete this._editing,delete this.pendingCS,delete this._data,this.clearDragging()},handle_touchstart:function(a){Ld(a),this.pendingCS=null;var b=this.params,c=this.gv,d=c.sm(),e=c.getDataAt(a),g=be(a);if(1===g)ce(a)?c.handleDoubleClick(a,e):(c.handleClick(a,e),e&&(c.handleMouseDown&&c.handleMouseDown(a,e),this._data=e)),b.selectable||(e=f),e?(d.co(e)||d.ss(e),b.editable&&c.isEditable(e)&&this.checkEdit(a,e,!0)?(this._editing=1,this.startDragging(a)):b.movable&&c.isMovable(e)&&(this._moving=1,this.startDragging(a))):(this.pendingCS=fe(a),b.pannable&&c.isPannable()&&(this._panning=1,this.startDragging(a),this._translate={x:c.tx(),y:c.ty()}));else if(b.pinchable&&2===g){this._pinching=1,this.startDragging(a);var h=c.getView(),i=c.getZoom(),j=h.getBoundingClientRect(),k=a.touches[0],l=a.touches[1],m={x:(k.clientX+l.clientX)/2-j.left,y:(k.clientY+l.clientY)/2-j.top};m.x-=c.tx(),m.y-=c.ty(),m.x/=i,m.y/=i,this._pinchPoint=m,this._pinchDist=bd(a)}},handle_touchend:function(a){var b=this,c=b.gv,d=b.pendingCS,e=b._data;d&&(ge(d,fe(a))<=1&&c.sm().cs(),b.pendingCS=f),e&&c.handleMouseUp&&c.handleMouseUp(a,e)},handleWindowTouchEnd:function(a){this.clear(a)},handleWindowTouchMove:function(a){var b=this.gv,c=be(a);if(1===c){if(this._editing&&(b._editing=1,this.betweenEdit(a)),this._moving){if(b.handleDrag&&b.handleDrag(a,this._data)===!0)return;this.fi({kind:b._moving?"betweenMove":"beginMove",event:a}),b._moving=1;var d=b.lp(a);b.moveSelection(d.x-this._lastLogicalPoint.x,d.y-this._lastLogicalPoint.y),this._lastLogicalPoint=d,this.autoScroll(a)}else if(this._panning){this.fi({kind:b._panning?"betweenPan":"beginPan",event:a}),b._panning=1;var e=fe(a);b.setTranslate(this._translate.x+e.x-this._lastClientPoint.x,this._translate.y+e.y-this._lastClientPoint.y)}}else if(2===c&&this._pinching){this.fi({kind:b._pinching?"betweenPinch":"beginPinch",event:a}),b._pinching=1;var f=bd(a);b.handlePinch(this._pinchPoint,f,this._pinchDist),this._pinchDist=f}}}),uf.Overview=function(a){var b=this,c=b._view=jc(1);b._canvas=kc(c),c.style.background=i.overviewBackground||"",c.appendChild(b._mask=jc()),b.gv=a,b.redraw(),b.addListeners(),a.addViewListener(b.handleView,b)},vf("Overview",b,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:Eb,_maskBackground:i.overviewMaskBackground,_contentBorderColor:i.overviewContentBorderColor,_contentBackground:i.overviewContentBackground,getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){var a=this;a.gv.removeViewListener(a.handleView,a)},onPropertyChanged:function(){this.redraw()},handleView:function(a){this._autoUpdate&&"validate"===a.kind&&this.redraw()},redraw:function(){var a=this;a._redraw||(a._redraw=1,a.iv(50))},validateImpl:function(){var a=this,b=a.gv,c=a._canvas,d=a._mask,e=d.style,g=a.getWidth(),h=a.getHeight(),i=b.getViewRect(),j=b.getScrollRect(),k=j.x,l=j.y,m=j.width,n=j.height,o=a._rate=r(m/g,n/h),p=a._x=(g-m/o)/2,q=a._y=(h-n/o)/2,s=a._redraw;if(0!==i.width&&0!==i.height||a.hasRetry||(Pd(a.iv,a,f,50),a.hasRetry=!0),(g!==c.clientWidth||h!==c.clientHeight)&&($d(c,g,h,1),s=1),Wb(j,a._scrollRect)||(a._scrollRect=j,s=1),s){var t=lc(c),u=a._contentBackground,v=a._contentBorderColor;t.clearRect(0,0,g,h),u&&(t.beginPath(),t.rect(p,q,m/o,n/o),t.fillStyle=u,t.fill()),v&&Tc(t,v,p,q,m/o,n/o),Nc(t,-k/o+p,-l/o+q),t.scale(1/o,1/o),b.draw(t),t.restore()}e.background=a._maskBackground,e.left=p+(i.x-k)/o+$,e.top=q+(i.y-l)/o+$,e.width=i.width/o+$,e.height=i.height/o+$,delete a._redraw},center:function(a){var b=this,c=b.gv,d=c._zoom,e=c._viewRect,f=b._rate,g=b._scrollRect,h=qe(a,b._view),i=g.x+(h.x-b._x)*f,j=g.y+(h.y-b._y)*f;c.setTranslate((e.width/2-i)*d,(e.height/2-j)*d)},handle_mousedown:function(a){this.handle_touchstart(a)},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handle_mousewheel:function(a){this.handleScroll(a,a.wheelDelta)},handle_DOMMouseScroll:function(a){2===a.axis&&this.handleScroll(a,-a.detail)},handleScroll:function(a,b){Ld(a);var c=this.gv;b>0?c.scrollZoomIn():0>b&&c.scrollZoomOut()},handle_touchstart:function(a){if(Ld(a),ae(a)){var b=this,c=b.gv,d=be(a);1===d?ce(a)&&c.isResettable()?c.reset():(b.center(a),se(b,a)):2===d&&(b._dist=bd(a),se(b,a))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(a){var b=this,c=b._dist,d=be(a);1===d?b.center(a):2===d&&c!=f&&b.gv.handlePinch(f,bd(a),c)}}),Tb(i,{graph3dViewPrecision:"precision mediump float;",graph3dViewAttributes:null,graph3dViewFirstPersonMode:!1,graph3dViewClearColor:[0,0,0,0],graph3dViewMoveStep:10,graph3dViewRotateStep:y/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewSelectBackground:od,graph3dViewSelectBrightness:.7,graph3dViewAmbientColor:[.1,.1,.1,1],graph3dViewSpecularColor:[.2,.2,.2,1],graph3dViewSpecularShininess:30,graph3dViewSpecular:!1,graph3dViewGridVisible:!1,graph3dViewGridSize:40,graph3dViewGridGap:10,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:y/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewLightDirection:[0,0,-1]},!0),Tb(j,{"control.point.offset.x":0,"control.point.offset.y":0,brightness:c,opacity:c,"label.face":R,"label.offset3d":c,"label.rotation3d":c,"label.rotationMode":zf,"label.light":!0,"label.blend":c,"label.brightness":c,"label.opacity":c,"label.reverse.flip":!1,"label.reverse.color":kd,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":R,"label2.offset3d":c,"label2.rotation3d":c,"label2.rotationMode":zf,"label2.light":!0,"label2.blend":c,"label2.brightness":c,"label2.opacity":c,"label2.reverse.flip":!1,"label2.reverse.color":kd,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":R,"note.offset3d":c,"note.rotation3d":c,"note.rotationMode":zf,"note.light":!0,"note.blend":c,"note.brightness":c,"note.opacity":c,"note.reverse.flip":!1,"note.reverse.color":kd,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":V,"note2.offset3d":c,"note2.rotation3d":c,"note2.rotationMode":zf,"note2.light":!0,"note2.blend":c,"note2.brightness":c,"note2.opacity":c,"note2.reverse.flip":!1,"note2.reverse.color":kd,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:c,"shape3d.color":ld,"shape3d.top.color":c,"shape3d.bottom.color":c,"shape3d.from.color":c,"shape3d.to.color":c,"shape3d.image":c,"shape3d.top.image":c,"shape3d.bottom.image":c,"shape3d.from.image":c,"shape3d.to.image":c,"shape3d.mode":c,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":c,"shape3d.side.to":c,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.67,"shape3d.stack":32,"shape3d.thickness":1,"shape3d.brightness":c,"shape3d.opacity":c,"shape3d.reverse.flip":!1,"shape3d.reverse.color":kd,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":c,"shape3d.uv.scale":c,"shape3d.top.uv.offset":c,"shape3d.top.uv.scale":c,"shape3d.bottom.uv.offset":c,"shape3d.bottom.uv.scale":c,"shape3d.from.uv.offset":c,"shape3d.from.uv.scale":c,"shape3d.to.uv.offset":c,"shape3d.to.uv.scale":c,"all.light":!0,"all.visible":!0,"all.color":ld,"all.image":c,"all.blend":c,"all.brightness":c,"all.opacity":c,"all.reverse.flip":!1,"all.reverse.color":kd,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":c,"all.uv.offset":c,"all.uv.scale":c},!0);var Tf=!1,Uf=function(a){return a>0&&0===(a-1&a)},Vf=function(a){return a=r(0,s(y,a)),a=r(ye,s(y-ye,a))},Wf=function(){return.05+E()/2},Xf=function(a,b,c,d){var e,f=a.getEye();return a.isOrtho()?(e=Be(a.getCenter(),f),e[0]+=d[0],e[1]+=d[1],e[2]+=d[2]):e=f,Yf(b,c,d,e)},Yf=function(a,b,c,d){var e=De(a,b),f=Be(d,c,!0),g=De(f,b);if(t(g)<ye)return null;var h=(e-De(c,b))/g;return[c[0]+f[0]*h,c[1]+f[1]*h,c[2]+f[2]*h]},Zf=function(a){var b=a[1],c=a[2],d=a[3],e=a[6],f=a[7],g=a[11];a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=b,a[6]=a[9],a[7]=a[13],a[8]=c,a[9]=e,a[11]=a[14],a[12]=d,a[13]=f,a[14]=g},$f=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=a[9],m=a[10],n=a[11],o=a[12],p=a[13],q=a[14],r=a[15],s=b*h-c*g,t=b*i-d*g,u=b*j-e*g,v=c*i-d*h,w=c*j-e*h,x=d*j-e*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(d*C-c*D-e*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(b*D-d*A+e*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(c*A-b*C-e*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(b*B-c*z+d*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,void 0):f},_f=function(a,b){if(b){var c=b[0],d=b[1],e=b[2];a[12]=a[0]*c+a[4]*d+a[8]*e+a[12],a[13]=a[1]*c+a[5]*d+a[9]*e+a[13],a[14]=a[2]*c+a[6]*d+a[10]*e+a[14],a[15]=a[3]*c+a[7]*d+a[11]*e+a[15]}},ag=function(a,b){if(b){var c=b[0],d=b[1],e=b[2];a[0]=a[0]*c,a[1]=a[1]*c,a[2]=a[2]*c,a[3]=a[3]*c,a[4]=a[4]*d,a[5]=a[5]*d,a[6]=a[6]*d,a[7]=a[7]*d,a[8]=a[8]*e,a[9]=a[9]*e,a[10]=a[10]*e,a[11]=a[11]*e}},bg=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},cg=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o=b[0],p=b[1],r=b[2],s=d[0],u=d[1],v=d[2],w=c[0],x=c[1],y=c[2];return t(o-w)<ye&&t(p-x)<ye&&t(r-y)<ye?He(a):(k=o-w,l=p-x,m=r-y,n=1/q(k*k+l*l+m*m),k*=n,l*=n,m*=n,e=u*m-v*l,f=v*k-s*m,g=s*l-u*k,n=q(e*e+f*f+g*g),n?(n=1/n,e*=n,f*=n,g*=n):(e=0,f=0,g=0),h=l*g-m*f,i=m*e-k*g,j=k*f-l*e,n=q(h*h+i*i+j*j),n?(n=1/n,h*=n,i*=n,j*=n):(h=0,i=0,j=0),a[0]=e,a[1]=h,a[2]=k,a[3]=0,a[4]=f,a[5]=i,a[6]=l,a[7]=0,a[8]=g,a[9]=j,a[10]=m,a[11]=0,a[12]=-(e*o+f*p+g*r),a[13]=-(h*o+i*p+j*r),a[14]=-(k*o+l*p+m*r),a[15]=1,a)},dg=function(a,b,c,d,e){var f=1/B(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},eg=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},fg=function(a,b,c){var d=Be(b,a),e=ge(a,b);return gg([c,e,c],[A-x(d[1]/e),D(d[0],d[2]),0],"xyz",[(a[0]+b[0])/2,(a[1]+b[1])/2,(a[2]+b[2])/2])},gg=function(a,b,c,d,e){return e||(e=Ee()),d&&_f(e,d),Af(e,b,c),a&&ag(e,a),e},hg=function(a,b){return cg(b?b:Ee(),a._eye,a._center,a._up)},ig=function(a){var b=a.getAspect(),c=a._near,d=a._far,e=Ee();if(a._ortho){var f=a._orthoWidth/2,g=f/b;eg(e,-f,f,-g,g,c,d)}else dg(e,a._fovy,b,c,d);return e},jg=function(a,b){if(!a)return f;for(var c=0,d=1,e=2,g=[],h=0,i=a.length,j=i/3;i>h;h++)g[h]=0;if(b)for(h=0;h<b.length;h+=3){var k=[],l=[],m=[];k[c]=a[3*b[h+1]+c]-a[3*b[h]+c],k[d]=a[3*b[h+1]+d]-a[3*b[h]+d],k[e]=a[3*b[h+1]+e]-a[3*b[h]+e],l[c]=a[3*b[h+2]+c]-a[3*b[h+1]+c],l[d]=a[3*b[h+2]+d]-a[3*b[h+1]+d],l[e]=a[3*b[h+2]+e]-a[3*b[h+1]+e],m[c]=k[d]*l[e]-k[e]*l[d],m[d]=k[e]*l[c]-k[c]*l[e],m[e]=k[c]*l[d]-k[d]*l[c];for(var n=0;3>n;n++)g[3*b[h+n]+c]=g[3*b[h+n]+c]+m[c],g[3*b[h+n]+d]=g[3*b[h+n]+d]+m[d],g[3*b[h+n]+e]=g[3*b[h+n]+e]+m[e]}else for(h=0;j>h;h+=3){var k=[],l=[],m=[];k[c]=a[3*(h+1)+c]-a[3*h+c],k[d]=a[3*(h+1)+d]-a[3*h+d],k[e]=a[3*(h+1)+e]-a[3*h+e],l[c]=a[3*(h+2)+c]-a[3*(h+1)+c],l[d]=a[3*(h+2)+d]-a[3*(h+1)+d],l[e]=a[3*(h+2)+e]-a[3*(h+1)+e],m[c]=k[d]*l[e]-k[e]*l[d],m[d]=k[e]*l[c]-k[c]*l[e],m[e]=k[c]*l[d]-k[d]*l[c];for(var n=0;3>n;n++)g[3*(h+n)+c]=g[3*(h+n)+c]+m[c],g[3*(h+n)+d]=g[3*(h+n)+d]+m[d],g[3*(h+n)+e]=g[3*(h+n)+e]+m[e]}for(h=0;i>h;h+=3){var o=[];o[c]=g[h+c],o[d]=g[h+d],o[e]=g[h+e];var p=q(o[c]*o[c]+o[d]*o[d]+o[e]*o[e]);0===p&&(p=ye),o[c]=o[c]/p,o[d]=o[d]/p,o[e]=o[e]/p,g[h+c]=o[c],g[h+d]=o[d],g[h+e]=o[e]}return new Ae(g)},kg=function(a,b,c){if(c||(c=a.createTexture()),b){var d=a.TEXTURE_2D,e=a.LINEAR,g=a.REPEAT,h=a.CLAMP_TO_EDGE,i=a.TEXTURE_MIN_FILTER;ng(a,c),a.texImage2D(d,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b),pg(a,a.TEXTURE_MAG_FILTER,e),Uf(b.width)&&Uf(b.height)?(pg(a,a.TEXTURE_WRAP_S,g),pg(a,a.TEXTURE_WRAP_T,g),pg(a,i,a.LINEAR_MIPMAP_LINEAR),a.generateMipmap(d)):(pg(a,a.TEXTURE_WRAP_S,h),pg(a,a.TEXTURE_WRAP_T,h),pg(a,i,e)),ng(a,f)}return c},lg=function(a,b,c,d){var e=a.createShader(c);a.shaderSource(e,d),a.compileShader(e),a.attachShader(b,e)},mg=function(a){return a.createBuffer()},ng=function(a,b){a.bindTexture(a.TEXTURE_2D,b)
},og=function(a,b){a.bindFramebuffer(a.FRAMEBUFFER,b)},pg=function(a,b,c){a.texParameteri(a.TEXTURE_2D,b,c)},qg=function(a,b){if(b){var b=Lc(b);a.clearColor(b[0],b[1],b[2],b[3])}},rg=function(a,b){Cg(a,b.uFix,!0),Eg(a,b.aNormal)},sg=function(a,b){Cg(a,b.uFix,!1),Dg(a,b.aNormal)},tg=function(a,b,c,d,e,g,h,i,j){c?(Cg(a,b.uBlend,!0),Cg(a,b.uBlendColor,c)):Cg(a,b.uBlend,!1),Cg(a,b.uLight,d),e!=f&&1!==e&&(Cg(a,b.uPartBright,!0),Cg(a,b.uPartBrightness,e)),g!=f&&1!==g&&(Cg(a,b.uPartOp,!0),Cg(a,b.uPartOpacity,g)),Cg(a,b.uReverseFlip,h),Cg(a,b.uReverseColor,i),j?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE)},ug=function(a,b){Cg(a,b.uPartBright,!1),Cg(a,b.uPartOp,!1)},vg=function(a,b,c,d,e,f,g){c&&(Cg(a,b.uTexture,!0),Dg(a,b.aUV),Ag(a,d,e,b.aUV,2),a.activeTexture(a.TEXTURE0),ng(a,c),a.uniform1i(b.uSampler,0),Cg(a,b.uUVOffset,f?f:Pg),Cg(a,b.uUVScale,g?g:Qg))},wg=function(a,b,c){c&&(ng(a,f),Eg(a,b.aUV),Cg(a,b.uTexture,!1))},xg=function(a,b,c,d,e,f){c&&!L&&a.lineWidth(c),d&&Cg(a,b.uFixColor,d),e&&Ag(a,e,f,b.aPosition)},yg=function(a,b,c,d){a.drawArrays(d,b,c)},zg=function(a,b,c,d){a.drawElements(d,c,a.UNSIGNED_SHORT,b==f?0:2*b)},Ag=function(a,b,c,d,e){var g=a.ARRAY_BUFFER;a.bindBuffer(g,b),c&&a.bufferData(g,c,a.STATIC_DRAW),d!=f&&a.vertexAttribPointer(d,e?e:3,a.FLOAT,!1,0,0)},Bg=function(a,b,c){var d=a.ELEMENT_ARRAY_BUFFER;a.bindBuffer(d,b),c&&a.bufferData(d,c,a.STATIC_DRAW)},Cg=function(a,b,c){if(c!=f){c=Lc(c);var d=c.length;3===d?a.uniform3fv(b,c):4===d?a.uniform4fv(b,c):16===d?a.uniformMatrix4fv(b,!1,c):Nb(c)?a.uniform1i(b,c?1:0):2===d?a.uniform2fv(b,c):a.uniform1f(b,c)}},Dg=function(a,b){a.enableVertexAttribArray(b)},Eg=function(a,b){a.disableVertexAttribArray(b)},Fg=function(a){Ge(a._tmpMatrix,a._mvMatrix)},Gg=function(a){Ge(a._mvMatrix,a._tmpMatrix)},Hg=function(a,b,c,d,e,f){if(c){var g=c.value++;Cg(a,b.uPickColor,[(255&g>>16)/255,(255&g>>8)/255,(255&g)/255,1]),d&&(c[g]={data:e,part:f})}},Ig=function(){var a={front:function(a,b,c,d,e){var f=b[1]/2,g={x:-b[0]/2,y:f,width:b[0],height:b[1]},h=gd(a,g,c);return[h.x+d,2*f-h.y-e,b[2]/2+Wf()]},back:function(a,b,c,d,e){var f=b[0]/2,g=b[1]/2,h={x:f,y:g,width:b[0],height:b[1]},i=gd(a,h,c);return[2*f-i.x-d,2*g-i.y-e,-b[2]/2-Wf()]},left:function(a,b,c,d,e){var f=b[1]/2,g={x:-b[2]/2,y:f,width:b[2],height:b[1]},h=gd(a,g,c);return[-b[0]/2-Wf(),2*f-h.y-e,h.x+d]},right:function(a,b,c,d,e){var f=b[2]/2,g=b[1]/2,h={x:f,y:g,width:b[2],height:b[1]},i=gd(a,h,c);return[b[0]/2+Wf(),2*g-i.y-e,2*f-i.x-d]},top:function(a,b,c,d,e){var f={x:-b[0]/2,y:-b[2]/2,width:b[0],height:b[2]},g=gd(a,f,c);return[g.x+d,b[1]/2+Wf(),g.y+e]},bottom:function(a,b,c,d,e){var f=b[2]/2,g={x:-b[0]/2,y:f,width:b[0],height:b[2]},h=gd(a,g,c);return[h.x+d,-b[1]/2-Wf(),2*f-h.y-e]}};return function(b,c,d,e,g,h){return a[e](b,c,d,g==f?0:g,h==f?0:h)}}(),Jg=function(a,b){var c=a.gv,d=b.auto,e=b.mat2;if(Fg(c),d){var f=Be(c.getEye(),b.pos),g=Ee();Le(g,y/2+D(-f[2],f[0])),"y"!==d&&Ke(g,-D(f[1],q(f[2]*f[2]+f[0]*f[0]))),e&&bg(g,g,e),g=bg(Ee(),b,g),a.mv(g)}else a.mv(b)},Kg=function(a,b,c,d){var e=a.s,f=a.gv,g=f.getGL(),h=f._prg,i=f._buffer,j=f._texture;kg(g,Ic,j),Jg(a,c),tg(g,h,e(b+".blend"),e(b+".light"),e(b+".brightness"),e(b+".opacity"),e(b+".reverse.flip"),e(b+".reverse.color"),e(b+".reverse.cull")),vg(g,h,j,i.uv,Rg),Ag(g,i.vs,d,h.aPosition),Ag(g,i.ns,Sg,h.aNormal),Bg(g,i.is,Tg),zg(g,0,Tg.length,g.TRIANGLES),wg(g,h,j),ug(g,h),Gg(f)},Lg=g.graph3d={},Mg=function(a,b,c){ve(d+".graph3d."+a,b,c)},Ng="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh~<f{jTuojpQv!>!f{jTuojpQ`mh!!!|*uojpQv)gj~<fmbdTWVv!+!WVb!,!uftggPWVv!>!WVw|*fsvuyfUv)gj~<{zy/yfusfw.!>!fzFw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw<f{jTuojpQv!ubpmg!nspgjov<uojpQv!mppc!nspgjov<fzFw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<WVw!3dfw!hojzsbw<WVb!3dfw!fuvcjsuub<fmbdTWVv!3dfw!nspgjov<uftggPWVv!3dfw!nspgjov<fsvuyfUv!mppc!nspgjov",Og="~~<eJ!>!spmpDhbsG`mh~<zujdbqPusbQv!>+!b/eJ!!!|*qPusbQv)gj~<zujdbqPv!>+!b/eJ!!!|*qPv)gj~<ttfouihjsCusbQv!>+!chs/eJ!!!|*uihjsCusbQv)gj~<ttfouihjsCv!>+!chs/eJ!!!|*uihjsCv)gj~~~~~<ftvggjEv!>!eJ|ftmf~<spmpDeofmCv!>!eJ|*eofmCv)gj|ftmf~~<spmpDeofmCv!>+!eJ|*eofmCv)gj<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<chs/uofjcnBv!>,!chs/eJ~<chs/tJ!>,!chs/eJ<*ttfojojiTv!-*1/1!-*F!-S)upe)ybn)xpq!+!sbmvdfqTv!>!tJ!5dfw<*O!-M)udfmgfs!>!S!4dfw|*tJv)gj<nsfUusfcnbm!>+!chs/eJ<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg<*opjudfsjEuihjMv)f{jmbnspo!>!M!4dfw~~<ftvggjEv!>!eJ|ftmf~<spmpDeofmCv!>!eJ|*eofmCv)gj|ftmf~~<spmpDeofmCv!>+!eJ|*eofmCv)gj<spmpDwv!>!eJ|*fsvuyfUv)gj|*uihjMv)gj|!ftmf~~<chs/uofjcnBv!>,!chs/eJ~<chs/tJ!>,!chs/eJ<*ttfojojiTv!-*1/1!-*F!-S)upe)ybn)xpq!+!sbmvdfqTv!>!tJ!5dfw<*O!-M)udfmgfs!>!S!4dfw|*tJv)gj<nsfUusfcnbm!>+!chs/eJ<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg<*opjudfsjEuihjMv)f{jmbnspo!>!M!4dfw|*uihjMv)gj<spmpDftsfwfSv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<*fzFw)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw|!ftmf~<spmpDyjGv!>!eJ|*yjGv)gj<eJ!5dfw|ftmf~<spmpDldjQv!>!spmpDhbsG`mh|*ldjQv)gj~~<esbdtje|*1/1!>>!b/spmpDwv)gj<*WVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|*fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw<fzFw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<sbmvdfqTv!5dfw!nspgjov<uofjcnBv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<qPusbQv!mppc!nspgjov<zujdbqPv!ubpmg!nspgjov<qPv!mppc!nspgjov<ttfouihjsCusbQv!ubpmg!nspgjov<uihjsCusbQv!mppc!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjsCv!mppc!nspgjov<opjudfsjEuihjMv!4dfw!nspgjov<uihjMv!mppc!nspgjov<ttfojojiTv!ubpmg!nspgjov<tJv!mppc!nspgjov<spmpDftsfwfSv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<WVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDldjQv!5dfw!nspgjov<ldjQv!mppc!nspgjov<spmpDyjGv!5dfw!nspgjov<yjGv!mppc!nspgjov!OPJTJDFSQ!",Pg=[0,0],Qg=[1,1],Rg=new Ae([0,0,0,1,1,1,1,0]),Sg=new Ae([0,0,1,0,0,1,0,0,1,0,0,1]),Tg=new ze([0,1,2,2,3,0]),Ug=new Ae([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),Vg=new ze([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Wg=new Ae([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),Xg=jg(Ug,Vg),Yg=new Ae([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),Zg=new ze([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),$g=function(a){var b,c,d,e,f=.5,g=32,h=[],i=[],j=[],k=z/g,l=y/a;for(b=0;a>=b;b++)for(e=b*l,c=0;g>=c;c++)d=c*k,h.push(f*u(d)*w(e),f*u(e),-f*w(d)*w(e)),i.push(c/g,b/a);for(c=0;a>c;c++){var m=c*(g+1),n=(c+1)*(g+1);for(b=0;g>b;b++)j.push(m+b,n+b,n+b+1,m+b,n+b+1,m+b+1)}return{vs:h,ns:jg(h,j),uv:i,is:j}},_g=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o=.5,p=[],q=[],r=z/a,s=y/f;for(g=0;f>g;g++)for(k=g+1,j=g*s,n=k*s,h=b;c>h;h++)l=h+1,i=h*r,m=l*r,p.push(o*w(j)*u(i),o*u(j),-o*w(j)*w(i),o*w(n)*u(m),o*u(n),-o*w(n)*w(m),o*w(j)*u(m),o*u(j),-o*w(j)*w(m),o*w(j)*u(i),o*u(j),-o*w(j)*w(i),o*w(n)*u(i),o*u(n),-o*w(n)*w(i),o*w(n)*u(m),o*u(n),-o*w(n)*w(m)),q.push(h/a,g/f,l/a,k/f,l/a,g/f,h/a,g/f,h/a,k/f,l/a,k/f);if(d)for(i=b*r,g=0;f>g;g++)k=g+1,j=g*s,n=k*s,p.push(0,0,0,o*w(n)*u(i),o*u(n),-o*w(n)*w(i),o*w(j)*u(i),o*u(j),-o*w(j)*w(i)),q.push(0,.5,b/a,k/f,b/a,g/f);if(e)for(i=c*r,g=0;f>g;g++)k=g+1,j=g*s,n=k*s,p.push(0,0,0,o*w(j)*u(i),o*u(j),-o*w(j)*w(i),o*w(n)*u(i),o*u(n),-o*w(n)*w(i)),q.push(1,.5,c/a,g/f,c/a,k/f);return{vs:p,ns:jg(p),uv:q}},ah=function(a,b){a/=4;var c,d,e,f,g,h,i,j=32,k=.5,l=[],m=[],n=[],o=z/j,p=z/b,q=k-a;for(d=0;b>=d;d++)for(f=-y+d*p,h=u(f),g=w(f),c=0;j>=c;c++)e=c*o,i=q+a*h,l.push(u(e)*i,g*a,-w(e)*i),m.push(c/j,1-d/b);for(d=0;b>d;d++){var r=d*(j+1),s=(d+1)*(j+1);for(c=0;j>c;c++)n.push(r+c,s+c+1,s+c,r+c,r+c+1,s+c+1)}return{vs:l,ns:jg(l,n),uv:m,is:n}},bh=function(a,b,c,d,e,f,g){f/=4;var h,i,j,k,l,m,n,o,p,q,r=.5,s=[],t=[],v=z/a,x=z/g,A=r-f;for(j=0;g>j;j++)for(k=j+1,n=-y+j*x,o=-y+k*x,h=b;c>h;h++)i=h+1,l=h*v,m=i*v,p=A+f*u(n),q=A+f*u(o),s.push(u(l)*p,w(n)*f,-w(l)*p,u(m)*p,w(n)*f,-w(m)*p,u(m)*q,w(o)*f,-w(m)*q,u(l)*p,w(n)*f,-w(l)*p,u(m)*q,w(o)*f,-w(m)*q,u(l)*q,w(o)*f,-w(l)*q),t.push(h/a,1-j/g,i/a,1-j/g,i/a,1-k/g,h/a,1-j/g,i/a,1-k/g,h/a,1-k/g);if(d){var B=[],C=[];for(j=0;g>j;j++)k=j+1,n=-y+j*x,o=-y+k*x,l=b*v,p=A+f*u(n),q=A+f*u(o),B.push(u(l)*p,w(n)*f,-w(l)*p,u(l)*q,w(o)*f,-w(l)*q,u(l)*A,0,-w(l)*A),C.push(.5+.5*u(n),.5-.5*w(n),.5+.5*u(o),.5-.5*w(o),.5,.5)}if(e){var D=[],E=[];for(j=0;g>j;j++)k=j+1,n=-y+j*x,o=-y+k*x,l=c*v,p=A+f*u(n),q=A+f*u(o),D.push(u(l)*p,w(n)*f,-w(l)*p,u(l)*A,0,-w(l)*A,u(l)*q,w(o)*f,-w(l)*q),E.push(.5-.5*u(n),.5-.5*w(n),.5,.5,.5-.5*u(o),.5-.5*w(o))}return{vs:s,ns:jg(s),uv:t,from_vs:B,from_ns:jg(B),from_uv:C,to_vs:D,to_ns:jg(D),to_uv:E}},ch=function(a,b){for(var c,d,e,f=.5,g=32,h=[],i=[],j=[],k=z/g,l=0;g>=l;l++)c=l*k,d=u(c)*f,e=w(c)*f,h.push(d,-f,e,d,f,e),i.push(1-l/g,1,1-l/g,0);for(l=0;g>l;l++)j.push(2*l,2*l+1,2*l+3,2*l,2*l+3,2*l+2);if(b){var m=[],n=[],o=[];for(m.push(0,-f,0),n.push(.5,.5),l=0;g>=l;l++)c=l*k,d=u(c),e=w(c),m.push(d*f,-f,-e*f),n.push(.5+.5*d,.5+.5*e);for(l=0;g>l;l++)o.push(0,l+2,l+1)}if(a){var p=[],q=[],r=[];for(p.push(0,f,0),q.push(.5,.5),l=0;g>=l;l++)c=l*k,d=u(c),e=w(c),p.push(d*f,f,-e*f),q.push(.5+.5*d,.5-.5*e);for(l=0;g>l;l++)r.push(0,l+1,l+2)}return{vs:h,ns:jg(h,j),uv:i,is:j,bottom_vs:m,bottom_ns:jg(m,o),bottom_uv:n,bottom_is:o,top_vs:p,top_ns:jg(p,r),top_uv:q,top_is:r}},dh=function(a,b,c,d,e,f,g){for(var h,i,j,k,l,m,n,o,p=.5,q=[],r=[],s=z/a,t=b;c>t;t++)h=t+1,i=t*s,j=h*s,k=u(i)*p,l=w(i)*p,m=u(j)*p,n=w(j)*p,q.push(k,-p,-l,m,-p,-n,k,p,-l,m,-p,-n,m,p,-n,k,p,-l),r.push(t/a,1,h/a,1,t/a,0,h/a,1,h/a,0,t/a,0);if(g){var v=[],x=[];for(t=b;c>t;t++)i=s*t,j=s*(t+1),k=u(i),l=w(i),m=u(j),n=w(j),v.push(k*p,-p,-l*p,0,-p,0,m*p,-p,-n*p),x.push(.5+.5*k,.5+.5*l,.5,.5,.5+.5*m,.5+.5*n)}if(f){var y=[],A=[];for(t=b;c>t;t++)i=s*t,j=s*(t+1),k=u(i),l=w(i),m=u(j),n=w(j),y.push(k*p,p,-l*p,m*p,p,-n*p,0,p,0),A.push(.5+.5*k,.5-.5*l,.5+.5*m,.5-.5*n,.5,.5)}return d&&(i=s*b,k=u(i)*p,l=w(i)*p,o=b/a,q.push(0,p,0,0,-p,0,k,-p,-l,k,-p,-l,k,p,-l,0,p,0),r.push(0,0,0,1,o,1,o,1,o,0,0,0)),e&&(i=s*c,k=u(i)*p,l=w(i)*p,o=c/a,q.push(0,-p,0,0,p,0,k,p,-l,k,p,-l,k,-p,-l,0,-p,0),r.push(1,1,1,0,o,0,o,0,o,1,1,1)),{vs:q,ns:jg(q),uv:r,bottom_vs:v,bottom_ns:jg(v),bottom_uv:x,top_vs:y,top_ns:jg(y),top_uv:A}},eh=function(a){for(var b,c,d,e,f,g,h=.5,i=32,j=[0,.5,.75,.875,.9375],k=[],l=[],m=[],n=z/i,o=0;o<j.length;o++){var p=0===o%2?0:.5;for(b=0;i>=b;b++)c=(b+p)*n,d=1-j[o],k.push(u(c)*h*d,-h+2*j[o]*h,-w(c)*h*d),l.push((b+p)/i,d)}for(o=0;o<j.length-1;o++){var q=o*(i+1),r=(o+1)*(i+1);for(b=0;i>b;b++)m.push(q+b,r+b+1,r+b,q+b,q+b+1,r+b+1)}for(g=k.length/3-(i+1),b=0;i>b;b++)k.push(0,h,0),l.push((b+.5)/i,0);for(b=0;i>b;b++)m.push(g+b,g+b+1,g+(i+1)+b);if(a){var s=[],t=[],v=[];for(s.push(0,-h,0),t.push(.5,.5),b=0;i>=b;b++)c=b*n,e=u(c),f=w(c),s.push(e*h,-h,-f*h),t.push(.5+.5*e,.5+.5*f);for(b=0;i>b;b++)v.push(0,b+2,b+1)}return{vs:k,ns:jg(k,m),uv:l,is:m,bottom_vs:s,bottom_ns:jg(s,v),bottom_uv:t,bottom_is:v}},fh=function(a,b,c,d,e,f){for(var g=.5,h=[],i=[],j=z/a,k=b;c>k;k++){var l=k+1,m=j*k,n=j*l;h.push(u(m)*g,-g,-w(m)*g,u(n)*g,-g,-w(n)*g,0,g,0),i.push(k/a,1,l/a,1,(k+l)/2/a,0)}if(f){var o=[],p=[];for(k=b;c>k;k++){m=j*k,n=j*(k+1);var q=u(m),r=w(m),s=u(n),t=w(n);o.push(q*g,-g,-r*g,0,-g,0,s*g,-g,-t*g),p.push(.5+.5*q,.5+.5*r,.5,.5,.5+.5*s,.5+.5*t)}}return d&&(m=j*b,h.push(0,g,0,0,-g,0,u(m)*g,-g,-w(m)*g),i.push(0,0,0,1,b/a,1)),e&&(m=j*c,h.push(0,-g,0,0,g,0,u(m)*g,-g,-w(m)*g),i.push(1,1,1,0,c/a,1)),{vs:h,ns:jg(h),uv:i,bottom_vs:o,bottom_ns:jg(o),bottom_uv:p}},gh=function(a,b,c,d){var e,g,h,i,j,k=te(c,d,12),l=k[0],m=ec(k),n=1,o=l[0],p=0,q=[],r=[],s=a?[]:f,t=a?[]:f,u=b?[]:f,v=b?[]:f;for(n=1;n<l.length;n++)e=l[n],q.push(o.x,-.5,o.y,o.x,.5,o.y,e.x,-.5,e.y,o.x,.5,o.y,e.x,.5,e.y,e.x,-.5,e.y),g=1-p/m,p+=ge(o,e),h=1-p/m,r.push(g,1,g,0,h,1,g,0,h,0,h,1),(a||b)&&(g=o.x+.5,i=o.y+.5,h=e.x+.5,j=e.y+.5,a&&(s.push(o.x,.5,o.y,0,.5,0,e.x,.5,e.y),t.push(g,i,.5,.5,h,j)),b&&(u.push(o.x,-.5,o.y,e.x,-.5,e.y,0,-.5,0),v.push(g,1-i,h,1-j,.5,.5))),o=e;return{vs:q,ns:jg(q),uv:r,top_vs:s,top_ns:jg(s),top_uv:t,bottom_vs:u,bottom_ns:jg(u),bottom_uv:v}},hh={roundRect:function(a,b){return gh(a,b,[{x:.5,y:.4},{x:.5,y:.442},{x:.471,y:.471},{x:.442,y:.5},{x:.4,y:.5},{x:-.4,y:.5},{x:-.442,y:.5},{x:-.471,y:.471},{x:-.5,y:.442},{x:-.5,y:.4},{x:-.5,y:-.4},{x:-.5,y:-.442},{x:-.471,y:-.471},{x:-.442,y:-.5},{x:-.4,y:-.5},{x:.4,y:-.5},{x:.442,y:-.5},{x:.471,y:-.471},{x:.5,y:-.442},{x:.5,y:-.4},{x:.5,y:.4}],[1,3,3,2,3,3,2,3,3,2,3,3,2])},star:function(a,b){return gh(a,b,[{x:.193,y:.079},{x:.333,y:.5},{x:0,y:.233},{x:-.333,y:.5},{x:-.194,y:.079},{x:-.5,y:-.167},{x:-.112,y:-.167},{x:0,y:-.5},{x:.111,y:-.167},{x:.5,y:-.167}],[1,2,2,2,2,2,2,2,2,2,5])},rect:function(a,b){return gh(a,b,[{x:.5,y:-.5},{x:.5,y:.5},{x:-.5,y:.5},{x:-.5,y:-.5}],[1,2,2,2,5])},triangle:function(a,b){return gh(a,b,[{x:0,y:-.5},{x:.5,y:.5},{x:-.5,y:.5}],[1,2,2,5])},rightTriangle:function(a,b){return gh(a,b,[{x:.5,y:.5},{x:-.5,y:.5},{x:-.5,y:-.5}],[1,2,2,5])},parallelogram:function(a,b){return gh(a,b,[{x:.5,y:-.5},{x:.25,y:.5},{x:-.5,y:.5},{x:-.25,y:-.5}],[1,2,2,2,5])},trapezoid:function(a,b){return gh(a,b,[{x:.25,y:-.5},{x:.5,y:.5},{x:-.5,y:.5},{x:-.25,y:-.5}],[1,2,2,2,5])}},ih={LINES:1,LINE_STRIP:1,LINE_LOOP:1},jh={sphere:1,cylinder:1,cone:1,torus:1},kh={torus:1,sphere:1},lh=Tb(Sd(hh),{cylinder:1}),mh=Tb(Sd(hh),{cylinder:1,cone:1}),nh=function(a,b,c,d,e,g){if(g(d("shape3d.transparent"))){var h=a._gl,i=a._prg,j=a._buffer,k=c.vs,l=c.is,m=c.ns,n=d("shape3d.mode")||c.mode,o="POINTS"===n,p=d("shape3d.thickness"),q=d("shape3d.color");e||(e=d("shape3d.blend")),n||(n="TRIANGLES"),ih[n]&&!L&&h.lineWidth(p),o&&(Cg(h,i.uPoint,!0),Cg(h,i.uPointSize,p)),tg(h,i,e,d("shape3d.light"),d("shape3d.brightness"),d("shape3d.opacity"),d("shape3d.reverse.flip"),d("shape3d.reverse.color"),d("shape3d.reverse.cull")),m?(Cg(h,i.uDiffuse,q),d("shape3d.visible")&&oh(h,i,j,q,a.getTexture(d("shape3d.image"),b),n,k,c.uv,m,l,d("shape3d.uv.offset"),d("shape3d.uv.scale")),oh(h,i,j,d("shape3d.top.color")||q,a.getTexture(d("shape3d.top.image"),b),n,c.top_vs,c.top_uv,c.top_ns,c.top_is,d("shape3d.top.uv.offset"),d("shape3d.top.uv.scale")),oh(h,i,j,d("shape3d.bottom.color")||q,a.getTexture(d("shape3d.bottom.image"),b),n,c.bottom_vs,c.bottom_uv,c.bottom_ns,c.bottom_is,d("shape3d.bottom.uv.offset"),d("shape3d.bottom.uv.scale")),oh(h,i,j,d("shape3d.from.color")||q,a.getTexture(d("shape3d.from.image"),b),n,c.from_vs,c.from_uv,c.from_ns,c.from_is,d("shape3d.from.uv.offset"),d("shape3d.from.uv.scale")),oh(h,i,j,d("shape3d.to.color")||q,a.getTexture(d("shape3d.to.image"),b),n,c.to_vs,c.to_uv,c.to_ns,c.to_is,d("shape3d.to.uv.offset"),d("shape3d.to.uv.scale"))):(rg(h,i),xg(h,i,f,e||q,j.vs,k),l?(Bg(h,j.is,l),zg(h,0,l.length,h[n])):yg(h,0,k.length/3,h[n]),sg(h,i)),ug(h,i),o&&Cg(h,i.uPoint,!1)}},oh=function(a,b,c,d,e,f,g,h,i,j,k,l){g&&(Cg(a,b.uDiffuse,d),h&&vg(a,b,e,c.uv,h,k,l),Ag(a,c.vs,g,b.aPosition),Ag(a,c.ns,i,b.aNormal),j?(Bg(a,c.is,j),zg(a,0,j.length,a[f])):yg(a,0,g.length/3,a[f]),h&&wg(a,b,e))},ph=function(){var a={};return function(b){var c=b("shape3d"),d=c;if(!c)return null;if(jh[c]){var e=b("shape3d.side"),g=b("shape3d.side.from"),h=b("shape3d.side.to"),i=b("shape3d.from.visible"),j=b("shape3d.to.visible");3>e?(e=0,g=0,h=0,i=!1,j=!1):((g==f||0>g)&&(g=0),(h==f||h>e)&&(h=e),0===g&&h===e&&(i=!1,j=!1)),d+="-"+e+"-"+g+"-"+h+"-"+i+"-"+j}if(lh[c]){var k=b("shape3d.top.visible");d+="-"+k}if(mh[c]){var l=b("shape3d.bottom.visible");d+="-"+l}if("torus"===c){var m=b("shape3d.torus.radius");0>m?m=0:m>1&&(m=1),d+="-"+m}if(kh[c]){var n=b("shape3d.stack");3>n&&(n=16),d+="-"+n}var o=a[d];return o||("sphere"===c?(o=$g(),o=e>0?_g(e,g,h,i,j,n):$g(n)):"cylinder"===c?o=e>0?dh(e,g,h,i,j,k,l):ch(k,l):"cone"===c?o=e>0?fh(e,g,h,i,j,l):eh(l):"torus"===c?o=e>0?bh(e,g,h,i,j,m,n):ah(m,n):hh[c]&&(o=hh[c](k,l)),qh(o),a[d]=o),o}}(),qh=function(){var a=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv"],b=["is","top_is","bottom_is","from_is","to_is"];return function(c){c&&(a.forEach(function(a){var b=c[a];b instanceof Array&&(c[a]=new Ae(b))}),b.forEach(function(a){var b=c[a];b instanceof Array&&(c[a]=new ze(b))}))}}(),rh=function(a,b){var c=a[b];c instanceof Array&&(a[b]=new Ae(c))},sh=ph(function(a){return{shape3d:"cylinder","shape3d.top.visible":!1,"shape3d.bottom.visible":!1}[a]});Lg.Graph3dView=function(a,b){var c=this;c._attributes=b||i.graph3dViewAttributes,c._keyMap={},c._uiMap={},c._view=jc(1);var d=c._canvas=kc(c._view);d.addEventListener("webglcontextlost",c.handleContextLost,!1),d.addEventListener("webglcontextrestored",c.handleContextRestored,!1),c._tmpMatrix=Ee(),c._mvMatrix=Ee(),c._nMatrix=Ee(),c._pickHelper=new vh(c),c._editHelper=new yh(c),c._gridHelper=new wh(c),c._axisHelper=new xh(c),c._gridColor=Sd(i.graph3dViewGridColor),c._axisXColor=Sd(i.graph3dViewAxisXColor),c._axisYColor=Sd(i.graph3dViewAxisYColor),c._axisZColor=Sd(i.graph3dViewAxisZColor),c._editSizeColor=Sd(i.graph3dViewEditSizeColor),c._ambientColor=Sd(i.graph3dViewAmbientColor),c._specularColor=Sd(i.graph3dViewSpecularColor),c._eye=Sd(i.graph3dViewEye),c._center=Sd(i.graph3dViewCenter),c._up=Sd(i.graph3dViewUp),c._lightDirection=Sd(i.graph3dViewLightDirection),c.dm(a?a:new $e),c.setInteractors([new uh(c)])},Mg("Graph3dView",b,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,ms_interaction:1,ms_ac:["boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","currentSubGraph","autoMakeVisible","firstPersonMode","visibleFunc","movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","ambientColor","specularColor","specularShininess","specular","rectSelectable","selectBackground","selectBrightness","ortho","orthoWidth","fovy","near","far",Y,X,"up","aspect","lightDirection"],_editable:!1,_boundaries:f,_moveStep:i.graph3dViewMoveStep,_rotateStep:i.graph3dViewRotateStep,_pannable:i.graph3dViewPannable,_rotatable:i.graph3dViewRotatable,_walkable:i.graph3dViewWalkable,_resettable:i.graph3dViewResettable,_zoomable:i.graph3dViewZoomable,_firstPersonMode:i.graph3dViewFirstPersonMode,_gridVisible:i.graph3dViewGridVisible,_gridSize:i.graph3dViewGridSize,_gridGap:i.graph3dViewGridGap,_originAxisVisible:i.graph3dViewOriginAxisVisible,_centerAxisVisible:i.graph3dViewCenterAxisVisible,_specularShininess:i.graph3dViewSpecularShininess,_specular:i.graph3dViewSpecular,_ortho:i.graph3dViewOrtho,_orthoWidth:i.graph3dViewOrthoWidth,_fovy:i.graph3dViewFovy,_near:i.graph3dViewNear,_far:i.graph3dViewFar,_rectSelectable:i.graph3dViewRectSelectable,_selectBackground:i.graph3dViewSelectBackground,_selectBrightness:i.graph3dViewSelectBrightness,_autoMakeVisible:vd,getAspect:function(){var a=this,b=a._aspect;return b?b:a.getWidth()/a.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(a){var b=this,c=b._dataModel,d=b._selectionModel;c!==a&&(c&&(c.umm(b.handleDataModelChange,b),c.umd(b.handleDataPropertyChange,b),d||c.sm().ums(b.handleSelectionChange,b)),b._dataModel=a,a.mm(b.handleDataModelChange,b),a.md(b.handleDataPropertyChange,b),d?d._setDataModel(a):a.sm().ms(b.handleSelectionChange,b),b.invalidateAll(!0),b.fp("dataModel",c,a))},onPropertyChanged:function(){this.iv(),this._pvMatrix=null},createData3dUI:function(a){var b=a.get3dUIClass();return b?new b(this,a):f},getData3dUI:function(a){var b=this._uiMap[a._id];return b===c&&(b=this.createData3dUI(a),this._uiMap[a._id]=b),b},invalidateAll:function(a){var b=this;if(a){for(var c in b._uiMap)b._uiMap[c].dispose();b._uiMap={},b.iv()}else b.dm().each(function(a){b.invalidateData(a)})},invalidateSelection:function(){var a=this;a.sm().each(function(b){a.invalidateData(b)})},invalidateData:function(a){var b=this.getData3dUI(a);b&&(b.iv(),this.iv())},handleDataModelChange:function(a){var b=this,c=a.kind,d=a.data;if("add"===c)b.invalidateData(d),d instanceof Bf&&d.getEdgeGroup()&&d.getEdgeGroup().eachSiblingEdge(b.invalidateData,b);else if("remove"===c){var e=d._id,g=b._uiMap[e];g&&(g.dispose(),delete b._uiMap[e],b.iv()),d===b._currentSubGraph&&b.setCurrentSubGraph(f)}else"clear"===c&&(b.invalidateAll(!0),b.setCurrentSubGraph(f))},toCanvas:function(a){var b=this,c=b.getGL();if(a){var d=c.getParameter(c.COLOR_CLEAR_VALUE);qg(c,a)}this.draw();var f=b.getWidth(),g=b.getHeight(),h=new Uint8Array(4*f*g),i=e.createElement("canvas"),j=i.getContext("2d");c.readPixels(0,0,f,g,c.RGBA,c.UNSIGNED_BYTE,h),i.width=f,i.height=g;for(var k=j.getImageData(0,0,f,g),l=k.data,m=0;m<l.length;m+=4){var n=m/4,p=o(n/f),q=n-p*f;n=4*((g-1-p)*f+q),l[n]=h[m],l[n+1]=h[m+1],l[n+2]=h[m+2],l[n+3]=h[m+3]}return j.putImageData(k,0,0),a&&(qg(c,d),b.draw()),i},toDataURL:function(a){var b=this,c=b.getGL();if(P)return b.toCanvas(a).toDataURL();if(a){var d=c.getParameter(c.COLOR_CLEAR_VALUE);qg(c,a)}b.draw();var e=b._canvas.toDataURL();return a&&(qg(c,d),b.draw()),e},getGL:function(){var a=this;if(a._gl)return a._gl;var b=a._canvas,c=a._attributes;try{var d=a._gl=b.getContext("webgl",c)||b.getContext("experimental-webgl",c)}catch(e){}if(a._textureMap={},d){var f=a._prg=d.createProgram(),g=["aNormal","aUV","uUVOffset","uUVScale","uPMatrix","uMVMatrix","uNMatrix","uDiffuse","uShininess","uAmbient","uSpecular","uLightDirection","uLight","uBlend","uBlendColor","uBright","uBrightness","uPartBright","uPartBrightness","uOp","uOpacity","uPartOp","uPartOpacity","uFix","uFixColor","uPick","uPickColor","uPoint","uPointSize","uIs","uTexture","uSampler","uReverseFlip","uReverseColor"];if(qg(d,i.graph3dViewClearColor),d.clearDepth(1),d.enable(d.DEPTH_TEST),d.depthFunc(d.LEQUAL),d.enable(d.BLEND),d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA),!Tf){for(var h,j=0,k="";j<Ng.length;j++)h=Ng[Ng.length-1-j],"%"===h?h="'":"a"===h&&(h='"'),k+=String.fromCharCode(h.charCodeAt(0)-1);for(Ng=k,k="",j=0;j<Og.length;j++)h=Og[Og.length-1-j],"%"===h?h="'":"a"===h&&(h='"'),k+=String.fromCharCode(h.charCodeAt(0)-1);k=k.replace("PRECISION","#ifdef GL_ES\n"+i.graph3dViewPrecision+"\n#endif\n"),Og=k,Tf=!0}lg(d,f,d.VERTEX_SHADER,Ng),lg(d,f,d.FRAGMENT_SHADER,Og),L?g.push("aPosition"):(f.aPosition=0,d.bindAttribLocation(f,f.aPosition,"aPosition")),d.linkProgram(f),g.forEach(function(a){f[a]=/^u/.test(a)?d.getUniformLocation(f,a):d.getAttribLocation(f,a)}),d.useProgram(f),a._buffer={vs:mg(d),ns:mg(d),is:mg(d),uv:mg(d)},a._texture=kg(d);var l=a._cube={vs:mg(d),ns:mg(d),is:mg(d),uv:mg(d)};Ag(d,l.vs,Ug),Ag(d,l.ns,Xg),Ag(d,l.uv,Wg),Bg(d,l.is,Vg)}return d},getBrightness:function(a){var b=a.s("brightness"),c=this.isSelected(a)?this._selectBrightness:f;return b==f?c:c==f?b:b*c},getOpacity:function(a){return a.s("opacity")},getWireframe:function(){return f},getBodyColor:function(a){return a.s("body.color")},getFaceBlend:function(a,b){return a.s(b+".blend")||a.s("all.blend")},getFaceColor:function(a,b){return a.s(b+".color")||a.s("all.color")},getFaceImage:function(a,b){return a.s(b+".image")||a.s("all.image")},getFaceUV:function(a,b){return a.s(b+".uv")||a.s("all.uv")},getFaceUVOffset:function(a,b){return a.s(b+".uv.offset")||a.s("all.uv.offset")},getFaceUVScale:function(a,b){return a.s(b+".uv.scale")||a.s("all.uv.scale")},getFaceLight:function(a,b){var c=a.s(b+".light");return c==f?a.s("all.light"):c},getFaceVisible:function(a,b){var c=a.s(b+".visible");return c==f?a.s("all.visible"):c},getFaceBrightness:function(a,b){var c=a.s(b+".brightness");return c==f?a.s("all.brightness"):c},getFaceOpacity:function(a,b){var c=a.s(b+".opacity");return c==f?a.s("all.opacity"):c},getFaceTransparent:function(a,b){var c=a.s(b+".transparent");return c==f?a.s("all.transparent"):c},getFaceReverseFlip:function(a,b){var c=a.s(b+".reverse.flip");return c==f?a.s("all.reverse.flip"):c},getFaceReverseCull:function(a,b){var c=a.s(b+".reverse.cull");return c==f?a.s("all.reverse.cull"):c},getFaceReverseColor:function(a,b){return a.s(b+".reverse.color")||a.s("all.reverse.color")},getTextureMap:function(){return this._textureMap},getTexture:function(a,b){var c=this,d=c.getGL(),e=c._textureMap[a];if(!e){var f=Nd(a);if(f){if(!f.tagName){var g=Se(f,b),h=Te(f,b),i=Jc(g,h);return Ve(i,f,0,0,g,h,b,c),i.restore(),kg(d,Ic,c._texture)}e=c._textureMap[a]=kg(d,f)}}return e},toViewPosition:function(a){var b=this,c=b.getWidth()/2,d=b.getHeight()/2,e=b._pvMatrix;return e||(e=ig(b),b._pvMatrix=bg(e,e,hg(b))),a=Je([a[0],a[1],a[2],1],e),{x:c+c*a[0]/a[3],y:d-d*a[1]/a[3]}},validateImpl:function(){this.draw(),this._pickHelper.iv()},redraw:function(){this.iv()},draw:function(a){var b=this;if(!b._contextLost){var c=b._canvas,d=b.getWidth(),e=b.getHeight(),g=b.getGL(),h=b._prg,i=b._mvMatrix;if(g){if((d!==c.clientWidth||e!==c.clientHeight)&&(c.width=d,c.height=e),b._centerInfo=f,g.viewport(0,0,d,e),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT),Cg(g,h.uLightDirection,b._lightDirection),Cg(g,h.uAmbient,b._ambientColor),Cg(g,h.uSpecular,b._specularColor),Cg(g,h.uShininess,b._specularShininess),Cg(g,h.uIs,b._specular),Cg(g,h.uPoint,!1),Cg(g,h.uTexture,!1),Cg(g,h.uFix,!1),Cg(g,h.uBright,!1),Cg(g,h.uOp,!1),Cg(g,h.uPick,!!a),Dg(g,h.aPosition),Dg(g,h.aNormal),Eg(g,h.aUV),Cg(g,h.uPMatrix,ig(b)),hg(b,i),a){a.value=1;var j=g.getParameter(g.COLOR_CLEAR_VALUE);g.clearColor(0,0,0,0),g.disable(g.BLEND),b.drawDatas(g,h,a),g.disable(g.DEPTH_TEST),Cg(g,h.uMVMatrix,i),b._editHelper.draw(g,h,a),g.enable(g.DEPTH_TEST),g.enable(g.BLEND),qg(g,j)}else Cg(g,h.uMVMatrix,i),b._gridHelper.draw(g,h),b.drawDatas(g,h,f,!1),g.depthMask(!1),b.drawDatas(g,h,f,!0),g.depthMask(!0),g.disable(g.DEPTH_TEST),Cg(g,h.uMVMatrix,i),b._axisHelper.draw(g,h),b._editHelper.draw(g,h),g.enable(g.DEPTH_TEST);Ag(g,f),Bg(g,f)}}},drawDatas:function(a,b,c,d){var e=this,g=function(a){return d==f?!0:d?a:!a};e.dm().each(function(d){if(e.isVisible(d)){var f=e.getData3dUI(d);f&&f.draw(a,b,c,g)}})},getLogicalPoint:function(a){return qe(a,this._view)},getDataAt:function(a){var b=this.getDataInfoAt(a);return b?b.data:f},getDataInfoAt:function(a){return a.target&&(a=this.lp(a)),this._pickHelper.get(Kb(a.x,a.y),!0)},getDatasInRect:function(a){return this._pickHelper.get(a)},setEditable:function(a){var b=this,c=b._editable;b._editable=a,this.fp("editable",c,a)},isEditable:function(a){var b=this;return b._editable?a instanceof wf?b._editableFunc?b._editableFunc(a):!0:!1:!1},isMovable:function(a){return a instanceof wf?this._movableFunc?this._movableFunc(a):!0:!1},isSizeEditable:function(a){return a instanceof wf?this._sizeEditableFunc?this._sizeEditableFunc(a):!0:!1},isRotationEditable:function(a){return a instanceof wf?this._rotationEditableFunc?this._rotationEditableFunc(a):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(a){this.setZoom(Gd,a)},zoomOut:function(a){this.setZoom(1/Gd,a)},setZoom:function(a,b){if(1!==a){var c=this;if(c._ortho)return c.setOrthoZoom(a,b),void 0;c._zoomAnim&&c._zoomAnim.stop(!0);var d=1/a,e=c._eye,g=c._center,h=g[0]+(e[0]-g[0])*d-e[0],i=g[1]+(e[1]-g[1])*d-e[1],j=g[2]+(e[2]-g[2])*d-e[2];if(!(ge(e,g)<20&&1>d))if(b=Sb(b)){var k=Sd(e);b.action=function(a){c.fi({kind:c._zooming?"betweenZoom":"beginZoom"}),c._zooming=1,e[0]=k[0]+h*a,e[1]=k[1]+i*a,e[2]=k[2]+j*a,c.fp(Y,f,e)},b.innerFunc=function(){delete c._zoomAnim,delete c._zooming,c.fi({kind:"endZoom"}),c.onZoomEnded()},c._zoomAnim=Ud(b)}else e[0]+=h,e[1]+=i,e[2]+=j,c.fp(Y,f,e)}},setOrthoZoom:function(a,b){if(1!==a){var c=this;c._zoomAnim&&c._zoomAnim.stop(!0);var d=c._orthoWidth,e=d/a-d;5>d&&a>1||(b=Sb(b),b?(b.action=function(a){c.fi({kind:c._zooming?"betweenZoom":"beginZoom"}),c._zooming=1,c.setOrthoWidth(d+e*a)},b.innerFunc=function(){delete c._zoomAnim,delete c._zooming,c.fi({kind:"endZoom"}),c.onZoomEnded()},c._zoomAnim=Ud(b)):c.setOrthoWidth(d/a))}},getPositionInfo:function(a){var b=this,c=b._eye,d=b._center,e=b.getAspect(),f=a?De(Be(d,c,!0),Be(a,c)):ge(c,d);if(b._ortho){var g=b._orthoWidth;return{length:f,height:g/e,width:g}}var h=2*B(b._fovy/2)*f;return{length:f,height:h,width:h*e}},getCenterInfo:function(){return this._centerInfo||(this._centerInfo=this.getPositionInfo()),Sd(this._centerInfo)},rotate:function(a,b,c,d){if(0!==a||0!==b){d==f&&(d=this._firstPersonMode);var e=this;e._rotateAnim&&e._rotateAnim.stop(!0);var g=e._center,h=e._eye,i=e.getCenterInfo().length,j=d?g:h,k=d?h:g,l=Be(j,k),m=D(l[0],l[2]),n=D(q(l[0]*l[0]+l[2]*l[2]),l[1]),o=d?X:Y;d&&(b=-b),c=Sb(c),c?(c.action=function(c){e.fi({kind:e._rotating?"betweenRotate":"beginRotate"}),e._rotating=1;var d=m+a*c,g=n+b*c;g=Vf(g),l[0]=i*w(g)*w(d),l[1]=i*u(g),l[2]=i*w(g)*u(d),j[0]=k[0]+l[0],j[1]=k[1]+l[1],j[2]=k[2]+l[2],e.fp(o,f,j)},c.innerFunc=function(){delete e._rotateAnim,delete e._rotating,e.fi({kind:"endRotate"}),e.onRotateEnded()},e._rotateAnim=Ud(c)):(m+=a,n+=b,n=Vf(n),l[0]=i*w(n)*w(m),l[1]=i*u(n),l[2]=i*w(n)*u(m),j[0]=k[0]+l[0],j[1]=k[1]+l[1],j[2]=k[2]+l[2],e.fp(o,f,j))}},pan:function(a,b,c){if(0!==a||0!==b){var d=this;d._panAnim&&d._panAnim.stop(!0);var e=d.getCenterInfo(),g=a/d.getWidth()*e.width,h=-1*b/d.getHeight()*e.height,i=hg(d),j=[i[0]*g,i[4]*g,i[8]*g],k=[i[1]*h,i[5]*h,i[9]*h],l=j[0]+k[0],m=j[1]+k[1],n=j[2]+k[2],o=d._center,p=d._eye;if(c=Sb(c)){var q=Sd(p),r=Sd(o);c.action=function(a){d.fi({kind:d._panning?"betweenPan":"beginPan"}),d._panning=1,o[0]=r[0]-l*a,o[1]=r[1]-m*a,o[2]=r[2]-n*a,p[0]=q[0]-l*a,p[1]=q[1]-m*a,p[2]=q[2]-n*a,d.fp(Y,f,p),d.fp(X,f,o)},c.innerFunc=function(){delete d._panAnim,delete d._panning,d.fi({kind:"endPan"}),d.onPanEnded()},d._panAnim=Ud(c)}else o[0]-=l,o[1]-=m,o[2]-=n,p[0]-=l,p[1]-=m,p[2]-=n,d.fp(Y,f,p),d.fp(X,f,o)}},walk:function(a,b){if(0!==a){var c=this;c._walkAnim&&c._walkAnim.stop(!0);var d=c._center,e=c._eye,g=Be(d,e,!0);if(b=Sb(b)){var h=Sd(e),i=Sd(d);b.action=function(b){c.fi({kind:c._walking?"betweenWalk":"beginWalk"}),c._walking=1;var j=a*b;e[0]=h[0]+g[0]*j,e[1]=h[1]+g[1]*j,e[2]=h[2]+g[2]*j,d[0]=i[0]+g[0]*j,d[1]=i[1]+g[1]*j,d[2]=i[2]+g[2]*j,c.fp(Y,f,e),c.fp(X,f,d)},b.innerFunc=function(){delete c._walkAnim,delete c._walking,c.fi({kind:"endWalk"}),c.onWalkEnded()},c._walkAnim=Ud(b)}else e[0]+=g[0]*a,e[1]+=g[1]*a,e[2]+=g[2]*a,d[0]+=g[0]*a,d[1]+=g[1]*a,d[2]+=g[2]*a,c.fp(Y,f,e),c.fp(X,f,d)}},handleScroll:function(a,b){a.preventDefault();var c=this,d=c.isPannable();c.isFirstPersonMode()?d&&c.pan(0,b):!c.isRotatable()&&d?c.pan(0,b):c.isZoomable()?c.setZoom(0>b?1/Hd:Hd):d&&c.pan(0,b)},handlePinch:function(a,b){this.isZoomable()&&this.setZoom(b>a?1/Id:Id)},reset:function(){this.setCenter(Sd(i.graph3dViewCenter)),this.setEye(Sd(i.graph3dViewEye)),this.setUp(Sd(i.graph3dViewUp))},moveSelection:function(a,b,c){pe(this.sm().toSelection(this.isMovable,this),a,b,c)},getMoveMode:function(a){var b=i.getKeyCodeMap(),c="88",d="89",e="90";return de(a)||b[c]&&b[d]&&b[e]?"xyz":b[c]&&b[d]?"xy":b[c]&&b[e]?"xz":b[d]&&b[e]?"yz":b[c]?"x":b[d]?"y":b[e]?"z":"xz"},handleKeyDown:function(a){var b=this,c=!0,d=b._moveStep,e=b._rotateStep*(b._firstPersonMode?-1:1),f=d/b.getHeight()*b.getCenterInfo().height;b.isWalkable()||(f=0),b.isPannable()||(d=0),b.isRotatable()||(e=0),vc(a)?b.selectAll():wc(a)?b.handleDelete(a):Gc(a)?this.isResettable()&&b.reset():Cc(a)?b.rotate(-e,0,c):Dc(a)?b.rotate(0,-e/2,c):Ec(a)?b.rotate(e,0,c):Fc(a)?b.rotate(0,e/2,c):yc(a)?b.pan(d,0,c):Ac(a)?b.pan(-d,0,c):Bc(a)?de(a)?b.pan(0,d,c):b.walk(f,c):zc(a)&&(de(a)?b.pan(0,-d,c):b.walk(-f,c))},checkDoubleClickOnNote:function(a,b,c){var d=this;if("note"===c){if(b.s("note.toggleable"))return b.s("note.expanded",!b.s("note.expanded")),d.fi({kind:"toggleNote",event:a,data:b,part:c}),!0}else if("note2"===c&&b.s("note2.toggleable"))return b.s("note2.expanded",!b.s("note2.expanded")),d.fi({kind:"toggleNote2",event:a,data:b,part:c}),!0;return!1},checkDoubleClickOnRotation:function(a,b,c){return c===Ch?(b.setRotationX(0),!0):c===Dh?(b.setRotationY(0),!0):c===Eh?(b.setRotationZ(0),!0):!1
},onRotateEnded:function(){},onWalkEnded:function(){},getDropPosition:function(a,b,c){var d=this,e=d.getWidth(),f=d.getHeight(),g=a.target?d.lp(a):a,h=g.x-e/2,i=g.y-f/2,j=d.getCenterInfo(),k=hg(d);b=b?b:[0,0,0],c=c?c:[0,1,0],h=h/e*j.width,i=-1*i/f*j.height;var l=[k[0]*h,k[4]*h,k[8]*h],m=[k[1]*i,k[5]*i,k[9]*i],n=[l[0]+m[0],l[1]+m[1],l[2]+m[2]],o=d.getCenter(),p=Xf(d,b,c,[n[0]+o[0],n[1]+o[1],n[2]+o[2]]);return p?p:[0,0,0]},handleContextLost:function(a){a.preventDefault(),this._contextLost=!0},handleContextRestored:function(){var a=this;a._contextLost=!1,a._gl=null,a.iv()}});var th=function(a){this.gv=a};ve(th,b,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var uh=function(a){Ub(uh,this,[a])};ve(uh,th,{handle_contextmenu:function(a){Ld(a)},handle_mousewheel:function(a){this.gv.handleScroll(a,a.wheelDelta/40)},handle_DOMMouseScroll:function(a){2===a.axis&&this.gv.handleScroll(a,-a.detail)},handle_keydown:function(a){this.gv.handleKeyDown(a)},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){Ld(a);var b=this,c=b.gv,d=ae(a),e=c.getDataInfoAt(a),g=e?e.data:f,h=e?e.part:f,i=c.sm(),j=uc(a);c.setFocus(),b.state=f,b.pendingCS=f,g?ee(a)?i.co(g)?i.rs(g):i.as(g):i.co(g)||i.ss(g):d&&(ee(a)?c.isRectSelectable()&&(b.state="select"):b.pendingCS=fe(a)),b.timer&&Qd(b.timer),b.state||(c.isFirstPersonMode()?(de(a)||be(a)>2)&&c.isPannable()?b.state="pan":(b.state="roaming",b.foward=j&&ae(a),b.timer=Pd(b.tick,b,f,500)):d&&j&&Ih[h]?(b.state=h,b.p3=g.p3()):d&&j&&g instanceof wf&&c.isSelected(g)&&c.isMovable(g)?(b.state="move",b.p3=g.p3()):Q&&(be(a)>2?c.isPannable()&&(b.state="pan"):j||(b.dist=bd(a),b.state="pinch"))),b.point=c.lp(a),se(b,a),ce(a)?c.handleDoubleClick(a,g,h):c.handleClick(a,g,h)},tick:function(){var a=this,b=a.gv;if(a.point){var c=a.foward?b._moveStep:-b._moveStep,d=b._eye,e=b._center,g=Be(e,d,!0),h=a.checkBoundaries(d[0],d[2],d[0]+g[0]*c,d[2]+g[2]*c,t(c));d[0]+=h[0],d[2]+=h[1],b.fp(Y,f,d),e[0]+=h[0],e[2]+=h[1],b.fp(X,f,e),a.timer=Pd(a.tick,a,f,50)}},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){var b=this.pendingCS;b&&(ge(b,fe(a))<=1&&this.gv.sm().cs(),this.pendingCS=null)},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b.gv,d=c.isRotatable(),e=c.isPannable(),f=b.state,g=b.point,h=c.lp(a),i=h.x-g.x,j=h.y-g.y,k=-z*i/c.getWidth(),l=-z*j/c.getHeight();if("roaming"===f)b.rotate(a,k/2,l/2);else if(f===Ch||f===Dh||f===Eh)c.fi({kind:c._editingRotation?"betweenEditRotation":"beginEditRotation",event:a}),c._editingRotation=1,c.sm().each(function(a){if(a instanceof wf&&c.isRotationEditable(a)){var b=t(k)>t(l)?k:l;f===Ch?a.setRotationX(a.getRotationX()+b):f===Dh?a.setRotationY(a.getRotationY()+b):f===Eh&&a.setRotationZ(a.getRotationZ()+b)}});else if("move"===f||Ih[f]){f===Fh||f===Gh||f===Hh?(c.fi({kind:c._editingSize?"betweenEditSize":"beginEditSize",event:a}),c._editingSize=1):(c.fi({kind:c._moving?"betweenMove":"beginMove",event:a}),c._moving=1);var m,n=b.p3,o=c.getPositionInfo(n),p=hg(c);m=f===zh?"x":f===Ah?"y":f===Bh?"z":f===Fh?"sx":f===Gh?"sy":f===Hh?"sz":c.getMoveMode(a),i=i/c.getWidth()*o.width,j=-1*j/c.getHeight()*o.height;var q,s,u=[p[0]*i,p[4]*i,p[8]*i],v=[p[1]*j,p[5]*j,p[9]*j],w=u[0]+v[0],x=u[1]+v[1],y=u[2]+v[2],A=[n[0]+w,n[1]+x,n[2]+y],B=Be(c.getEye(),A,!0);if("xyz"===m?(q=A,c.moveSelection(w,x,y)):"xz"===m?(q=Xf(c,n,[0,1,0],A),q&&c.moveSelection(q[0]-n[0],0,q[2]-n[2])):"xy"===m?(q=Xf(c,n,[0,0,1],A),q&&c.moveSelection(q[0]-n[0],q[1]-n[1],0)):"yz"===m?(q=Xf(c,n,[1,0,0],A),q&&c.moveSelection(0,q[1]-n[1],q[2]-n[2])):"x"===m||"sx"===m?(B[0]=0,q=Xf(c,n,B,A),q&&(s=q[0]-n[0],"x"===m?c.moveSelection(s,0,0):c.sm().each(function(a){a instanceof wf&&c.isSizeEditable(a)&&a.setWidth(r(ye,a.getWidth()+s))}))):"y"===m||"sy"===m?(B[1]=0,q=Xf(c,n,B,A),q&&(s=q[1]-n[1],"y"===m?c.moveSelection(0,s,0):c.sm().each(function(a){a instanceof wf&&c.isSizeEditable(a)&&a.setTall(r(ye,a.getTall()+s))}))):("z"===m||"sz"===m)&&(B[2]=0,q=Xf(c,n,B,A),q&&(s=q[2]-n[2],"z"===m?c.moveSelection(0,0,s):c.sm().each(function(a){a instanceof wf&&c.isSizeEditable(a)&&a.setHeight(r(ye,a.getHeight()+s))}))),!q)return;b.p3=q}else if("select"===f){var C=b.div;C||(C=b.div=jc(),b.getView().appendChild(C),C.op=g,C.style.background=c.getSelectBackground()),C.rect=he(C.op,h),nc(C,C.rect)}else if("pinch"===f&&2===be(a)){c.fi({kind:c._pinching?"betweenPinch":"beginPinch",event:a}),c._pinching=1;var s=bd(a);c.handlePinch(s,b.dist),b.dist=s}else"pan"===f?b.pan(a,i,j):de(a)&&e?b.pan(a,i,j):d&&ae(a)?b.rotate(a,k,l):ae(a)||d||!e?(e&&b.pan(a,i,0),c.isWalkable()&&(c.fi({kind:c._walking?"betweenWalk":"beginWalk",event:a}),c._walking=1,c.walk(j/c.getHeight()*c.getCenterInfo().height))):b.pan(a,i,j);b.point=h},pan:function(a,b,c){var d=this.gv;d.fi({kind:d._panning?"betweenPan":"beginPan",event:a}),d._panning=1,d.pan(b,c)},rotate:function(a,b,c){var d=this.gv;d.fi({kind:d._rotating?"betweenRotate":"beginRotate",event:a}),d._rotating=1,d.rotate(b,c)},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(a){var b=this,c=this.gv,d=b.div;if(d){var e=c.getDatasInRect(d.rect);if(!e.isEmpty()){var g=c.sm(),h=g.toSelection();e.each(function(a){g.co(a)?h.remove(a):h.add(a)}),g.ss(h)}b.getView().removeChild(d)}c._moving&&(delete c._moving,c.fi({kind:"endMove",event:a}),c.onMoveEnded()),c._panning&&(delete c._panning,c.fi({kind:"endPan",event:a}),c.onPanEnded()),c._rotating&&(delete c._rotating,c.fi({kind:"endRotate",event:a}),c.onRotateEnded()),c._editingRotation&&(delete c._editingRotation,c.fi({kind:"endEditRotation",event:a})),c._editingSize&&(delete c._editingSize,c.fi({kind:"endEditSize",event:a})),c._pinching&&(delete c._pinching,c.fi({kind:"endPinch",event:a}),c.onPinchEnded()),c._walking&&(delete c._walking,c.fi({kind:"endWalk",event:a}),c.onWalkEnded()),b.dist=b.point=b.state=b.p3=b.div=b.pendingCS=b.timer=b.foward=f},checkBoundaries:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=this,r=q.gv,s=[c-a,d-b],t=r.getBoundaries(),u=t?t.length:0;for(h=0;u>h;h++){for(i=2,f=t[h],j=f[0],k=f[1];i+1<f.length;){if(l=f[i],m=f[i+1],g=Xb(a,b,c,d,j,k,l,m,!0)){n=[l-j,m-k],o=ge(n),n[0]/=o,n[1]/=o,o=De(s,n),o=o>0?e:-e,p=[n[0]*o,n[1]*o];break}j=l,k=m,i+=2}if(p)break}if(p)for(c=a+p[0],d=b+p[1],h=0;u>h;h++)for(i=2,f=t[h],j=f[0],k=f[1];i+1<f.length;){if(l=f[i],m=f[i+1],g=Xb(a,b,c,d,j,k,l,m,!0))return[0,0];j=l,k=m,i+=2}return p?p:[c-a,d-b]}});var vh=function(a){this.gv=a};ve(vh,b,{_iv:!0,iv:function(){this._iv=!0},get:function(a,b){this.validate();var c,d,e,g=this,h=g.gv,i=h.getGL(),j=a.x,k=a.width,l=a.height,m=g.height-a.y-l,n=o(k/2),p=new Uint8Array(4*k*l),q=0,r=p.length,s=b?f:new We,t=b?f:{};if(P?h.draw(g.colorMap={}):og(i,g.frame),i.readPixels(j,m,k,l,i.RGBA,i.UNSIGNED_BYTE,p),P?h.draw():og(i,f),b){for(;n>=q;q++)for(var u=n-q,v=n+q,w=u;v>=w;w++)for(var x=u;v>=x;x++)if((w===u||w===v||x===u||x===v)&&(c=4*(w*k+x),d=g.info(p,c)))return d}else for(;r>q;q+=4)d=g.info(p,q),d&&(e=d.data,t[e._id]||(s.add(e),t[e._id]=e));return s},info:function(a,b){return this.colorMap[(a[b]<<16)+(a[b+1]<<8)+a[b+2]]},validate:function(){var a=this,b=a.gv,c=b.getGL(),d=b.getWidth(),e=b.getHeight(),g=c.RGBA,h=c.TEXTURE_2D,i=c.RENDERBUFFER,j=c.FRAMEBUFFER;return P?(a.width=d,a.height=e,void 0):(a.texture||(a.texture=kg(c),a.render=c.createRenderbuffer(),a.frame=c.createFramebuffer()),(a.width!==d||a.height!==e)&&(ng(c,a.texture),c.texImage2D(h,0,g,d,e,0,g,c.UNSIGNED_BYTE,f),c.bindRenderbuffer(i,a.render),c.renderbufferStorage(i,c.DEPTH_COMPONENT16,d,e),og(c,a.frame),c.framebufferTexture2D(j,c.COLOR_ATTACHMENT0,h,a.texture,0),c.framebufferRenderbuffer(j,c.DEPTH_ATTACHMENT,i,a.render),ng(c,f),c.bindRenderbuffer(i,f),og(c,f),a.width=d,a.height=e),a._iv&&(a._iv=!1,og(c,a.frame),b.draw(a.colorMap={}),og(c,f)),void 0)}});var wh=function(a){this.gv=a};ve(wh,b,{gap:0,size:0,draw:function(a,b){var c=this,d=c.gv,e=d._gridGap,g=d._gridSize;if(d._gridVisible){if(c.gap!==e||c.size!==g){for(var h=[],i=d._gridSize/2,j=e*i,k=0;2*i+1>k;k++){var l=6*k,m=6*(2*i+1)+l;h[l]=-j,h[l+1]=0,h[l+2]=-j+k*e,h[l+3]=j,h[l+4]=0,h[l+5]=-j+k*e,h[m]=-j+k*e,h[m+1]=0,h[m+2]=-j,h[m+3]=-j+k*e,h[m+4]=0,h[m+5]=j}c.vs=new Ae(h),c.gap=e,c.size=g}rg(a,b),xg(a,b,1,d._gridColor,d._buffer.vs,c.vs),yg(a,0,c.vs.length/3,a.LINES),sg(a,b)}else c.vs=c.gap=c.size=f}});var xh=function(a){this.gv=a};ve(xh,b,{draw:function(a,b){var c=this.gv,d=c._buffer.vs,e=c._axisXColor,g=c._axisYColor,h=c._axisZColor,i=c._originAxisVisible,j=c._centerAxisVisible;if(i||j){var k=L?a.TRIANGLES:a.TRIANGLE_FAN,l=a.LINES;if(rg(a,b),i){var m=c.getCenterInfo(),n=s(m.width,m.height)/5,o=.8*n,p=.05*n;xg(a,b,1.5,e,d,new Ae([0,0,0,n,0,0,o,p,0,o,0,p,o,-p,0,o,0,-p,o,p,0,0,0,0,0,n,0,p,o,0,0,o,p,-p,o,0,0,o,-p,p,o,0,0,0,0,0,0,n,p,0,o,0,p,o,-p,0,o,0,-p,o,p,0,o])),yg(a,0,2,l),yg(a,1,6,k),xg(a,b,f,g),yg(a,7,2,l),yg(a,8,6,k),xg(a,b,f,h),yg(a,14,2,l),yg(a,15,6,k)}if(j){var q=c._center,r=q[0],t=q[1],u=q[2],m=c.getPositionInfo(q);n=s(m.width,m.height)/20,xg(a,b,1.5,e,d,new Ae([r,t,u,r+n,t,u,r,t,u,r,t+n,u,r,t,u,r,t,u+n])),yg(a,0,2,l),xg(a,b,f,g),yg(a,2,2,l),xg(a,b,f,h),yg(a,4,2,l)}sg(a,b)}}});var yh=function(a){this.gv=a},zh="edit_tx",Ah="edit_ty",Bh="edit_tz",Ch="edit_rx",Dh="edit_ry",Eh="edit_rz",Fh="edit_sx",Gh="edit_sy",Hh="edit_sz",Ih={};Ih[zh]=1,Ih[Ah]=1,Ih[Bh]=1,Ih[Ch]=1,Ih[Dh]=1,Ih[Eh]=1,Ih[Fh]=1,Ih[Gh]=1,Ih[Hh]=1,ve(yh,b,{draw:function(a,b,c){var d=this,e=d.gv,f=e.sm().ld();if(e.isEditable(f)&&f instanceof wf){var g,h,i=e.isMovable(f),j=e.isRotationEditable(f),k=e.isSizeEditable(f),l=e._axisXColor,m=e._axisYColor,n=e._axisZColor,o=e._editSizeColor,p=e.getCenterInfo(),q=s(p.width,p.height)/10,r=q/(c?5:10),t=.7*q,u=.4*t,v=f.p3(),w=v[0],x=v[1],y=v[2];g=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],i&&d.drawAxis(a,b,f,c,zh,l,g,[w,x-r,y,w+t,x-r,y,w+t,x,y,w+t,x,y,w,x,y,w,x-r,y,w,x-r,y+r,w+t,x-r,y+r,w+t,x-r,y,w+t,x-r,y,w,x-r,y,w,x-r,y+r]),h=w+t,k&&d.drawAxis(a,b,f,c,Fh,o,g,[h,x-r,y,h+u,x-r,y,h+u,x,y,h+u,x,y,h,x,y,h,x-r,y,h,x-r,y+r,h+u,x-r,y+r,h+u,x-r,y,h+u,x-r,y,h,x-r,y,h,x-r,y+r]),h+=u,j&&d.drawAxis(a,b,f,c,Ch,l,g,[h,x-r,y,h+u,x-r,y,h+u,x,y,h+u,x,y,h,x,y,h,x-r,y,h,x-r,y+r,h+u,x-r,y+r,h+u,x-r,y,h+u,x-r,y,h,x-r,y,h,x-r,y+r]),g=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],i&&d.drawAxis(a,b,f,c,Ah,m,g,[w,x,y,w,x+t,y,w-r,x+t,y,w-r,x+t,y,w-r,x,y,w,x,y,w,x,y,w,x,y-r,w,x+t,y-r,w,x+t,y-r,w,x+t,y,w,x,y]),h=x+t,k&&d.drawAxis(a,b,f,c,Gh,o,g,[w,h,y,w,h+u,y,w-r,h+u,y,w-r,h+u,y,w-r,h,y,w,h,y,w,h,y,w,h,y-r,w,h+u,y-r,w,h+u,y-r,w,h+u,y,w,h,y]),h+=u,j&&d.drawAxis(a,b,f,c,Dh,m,g,[w,h,y,w,h+u,y,w-r,h+u,y,w-r,h+u,y,w-r,h,y,w,h,y,w,h,y,w,h,y-r,w,h+u,y-r,w,h+u,y-r,w,h+u,y,w,h,y]),g=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],i&&d.drawAxis(a,b,f,c,Bh,n,g,[w,x,y,w,x,y+t,w,x-r,y+t,w,x-r,y+t,w,x-r,y,w,x,y,w,x-r,y,w-r,x-r,y,w-r,x-r,y+t,w-r,x-r,y+t,w,x-r,y+t,w,x-r,y]),h=y+t,k&&d.drawAxis(a,b,f,c,Hh,o,g,[w,x,h,w,x,h+u,w,x-r,h+u,w,x-r,h+u,w,x-r,h,w,x,h,w,x-r,h,w-r,x-r,h,w-r,x-r,h+u,w-r,x-r,h+u,w,x-r,h+u,w,x-r,h]),h+=u,j&&d.drawAxis(a,b,f,c,Eh,n,g,[w,x,h,w,x,h+u,w,x-r,h+u,w,x-r,h+u,w,x-r,h,w,x,h,w,x-r,h,w-r,x-r,h,w-r,x-r,h+u,w-r,x-r,h+u,w,x-r,h+u,w,x-r,h])}},drawAxis:function(a,b,c,d,e,g,h,i){var j=this.gv._buffer;Hg(a,b,d,!0,c,e),tg(a,b,f,!0,f,f,!0,f,!1),Cg(a,b.uDiffuse,g),Ag(a,j.vs,new Ae(i),b.aPosition),Ag(a,j.ns,new Ae(h),b.aNormal),yg(a,0,12,a.TRIANGLES),ug(a,b)}});var Jh=function(a,b){this.gv=a,this.s=function(a){return b.getStyle(a)},this.data=b},Kh="label",Lh="label2",Mh="note",Nh="note2";ve(Jh,b,{_iv:!0,ms_icons:1,iv:function(){this._iv=!0},draw:function(a,b,c,d){var e,g=this,h=g.gv,i=g.data,j=h.isSelectable(i),k=h.getBrightness(i),l=k!=f&&1!==k,m=h.getOpacity(i),n=m!=f&&1!==m;g._iv&&(g.labelInfo=g.label2Info=g.noteInfo=g.note2Info=g.iconsInfo=f,g.updateLabel(Kh,"getLabel"),g.updateLabel(Lh,"getLabel2"),g.updateNote(Mh,"getNote"),g.updateNote(Nh,"getNote2"),g.updateIcons(),g.validate(),g._iv=!1),l&&(Cg(a,b.uBright,!0),Cg(a,b.uBrightness,k)),n&&(Cg(a,b.uOp,!0),Cg(a,b.uOpacity,m)),Hg(a,b,c,j,i,"body"),g.drawBody(a,b,d),(e=g.labelInfo)&&(Hg(a,b,c,j,i,Kh),g.drawLabel(e,Kh,d)),(e=g.label2Info)&&(Hg(a,b,c,j,i,Lh),g.drawLabel(e,Lh,d)),(e=g.noteInfo)&&(Hg(a,b,c,j,i,Mh),g.drawNote(e,Mh,d)),(e=g.note2Info)&&(Hg(a,b,c,j,i,Nh),g.drawNote(e,Nh,d)),(e=g.iconsInfo)&&g.drawIcons(a,b,e,c,j,d),l&&Cg(a,b.uBright,!1),n&&Cg(a,b.uOp,!1)},validate:function(){},getPartMat:function(){return Fe},drawBody:function(){},dispose:function(){},getBodyColor:function(a){var b=this.data,c=this.gv.getBodyColor(b);return c?c:a?b.getStyle(a):f},mv:function(a){var b=this.gv,c=b._gl,d=b._prg,e=b._mvMatrix,f=b._nMatrix;a&&bg(e,e,a),Cg(c,d.uMVMatrix,e),Ge(f,e),$f(f),Zf(f),Cg(c,d.uNMatrix,f)},updateLabel:function(a,b){var c=this,d=c.data,e=c.gv,f=c.s,g=e[b](d);if(g){var h=f(a+".max"),i=this[a+"Info"]={label:g,color:e[b+"Color"](d),font:f(a+".font"),background:e[b+"Background"](d)},j=i.rect=_b(i.font,g);h>0&&h<j.width&&(i.labelWidth=j.width,j.width=h),j.x=j.y=0,i.mat=c.getPartMat(f(a+".autorotate"),f(a+".position"),j,f(a+".face"),f(a+".offset3d"),f(a+".rotation3d"),f(a+".rotationMode"),f(a+".offset.x"),f(a+".offset.y"));var k=j.width/2,l=j.height/2;i.vs=new Ae([-k,l,0,-k,-l,0,k,-l,0,k,l,0])}},updateNote:function(a,b){var c=this,d=c.data,e=c.gv,g=c.s,h=e[b](d);if(h){var i=this[a+"Info"]={note:h,expanded:g(a+".expanded"),font:g(a+".font"),color:g(a+".color"),borderWidth:g(a+".border.width"),borderColor:g(a+".border.color"),background:e[b+"Background"](d)};if(i.expanded){var j=g(a+".max"),k=_b(i.font,i.note);k.width+=6,k.height+=2,j>0&&j<k.width&&(i.labelWidth=k.width,k.width=j);var l={x:-k.width/2,y:-8-k.height,width:k.width,height:k.height+8}}else l={x:-6,y:-18,width:12,height:18};i.mat=c.getPartMat(g(a+".autorotate"),g(a+".position"),f,g(a+".face"),g(a+".offset3d"),g(a+".rotation3d"),g(a+".rotationMode"),g(a+".offset.x"),g(a+".offset.y")),i.rect=l;var m=l.x,n=l.y,o=l.width,p=l.height;i.vs=new Ae([m,-n,0,m,-n-p,0,m+o,-n-p,0,m+o,-n,0])}},drawLabel:function(a,b,c){if(c(this.s(b+".transparent"))){var d=a.rect,e=Jc(d.width,d.height);Vc(e,a),e.restore(),Kg(this,b,a.mat,a.vs)}},drawNote:function(a,b,c){if(c(this.s(b+".transparent"))){var d=a.rect,e=d.x,f=d.y;d.x=d.y=0;var g=Jc(d.width,d.height);Wc(g,a),g.restore(),d.x=e,d.y=f,Kg(this,b,a.mat,a.vs)}},drawIcons:function(a,b,c,d,e,g){if(c){var h=this,i=h.gv,j=h.data,k=i._buffer,l=i._texture,m=c.icons;for(var n in m){var o=m[n];if(g(o.transparent)){Hg(a,b,d,e,j,n);var p=o.names,q=p.length,r=c.rects[n],s=o.light,t=o.reverseFlip,u=o.reverseColor,v=o.reverseCull;tg(a,b,o.blend,s==f?!0:s,o.brightness,o.opacity,t==f?!1:t,u==f?kd:u,v==f?!1:v);for(var w=0;q>w;w++){var x=p[w],y=Nd(x),z=r[w],A=z.width,B=z.height,C=Jc(A,B);Ve(C,y,0,0,A,B,j,i),C.restore(),kg(a,Ic,l),Jg(h,z.mat),vg(a,b,l,k.uv,Rg),Ag(a,k.vs,z.vs,b.aPosition),Ag(a,k.ns,Sg,b.aNormal),Bg(a,k.is,Tg),zg(a,0,Tg.length,a.TRIANGLES),wg(a,b,l),Gg(i)}ug(a,b)}}}}});var Oh=function(a,b){Ub(Oh,this,[a,b])};ve(Oh,Jh,{getPartMat:function(a,b,c,d,e,f,g,h,i,j){var k=Ee(),l=this.data,m=l.s3(),n=l.p3(),o=l.r3(),p=l.getRotationMode(),q=Ig(b,m,c,d,h,i);if(e&&(q[0]+=e[0],q[1]+=e[1],q[2]+=e[2]),_f(k,n),a){var r=Ee();if(Af(r,o,p),Ie(q,r),_f(k,q),k.auto=a,k.pos=Ie([0,0,0],k),f||j){var s=k.mat2=Ee();Af(s,f,g),j&&Me(s,-j)}}else Af(k,o,p),_f(k,q),d===T?Le(k,-A):d===U?Le(k,A):d===V?Ke(k,-A):d===W?Ke(k,A):d===S&&Le(k,y),Af(k,f,g),j&&Me(k,-j);return k},validate:function(){var a=this,b=a.data;a.mat=gg(b.s3(),b.r3(),b.getRotationMode(),b.p3()),a.wireFrame=a.getWireframe(),a.left=a.right=a.front=a.back=a.top=a.bottom=f,(a.shapeModel=ph(a.s))||(a.vf(T),a.vf(U),a.vf(R),a.vf(S),a.vf(V),a.vf(W))},vf:function(a){var b=this,c=b.data,d=b.gv;d.getFaceVisible(c,a)&&(b[a]={blend:d.getBodyColor(c)||d.getFaceBlend(c,a),light:d.getFaceLight(c,a),color:d.getFaceColor(c,a),brightness:d.getFaceBrightness(c,a),opacity:d.getFaceOpacity(c,a),transparent:d.getFaceTransparent(c,a),reverseFlip:d.getFaceReverseFlip(c,a),reverseColor:d.getFaceReverseColor(c,a),reverseCull:d.getFaceReverseCull(c,a),uv:d.getFaceUV(c,a),uvScale:d.getFaceUVScale(c,a),uvOffset:d.getFaceUVOffset(c,a),texture:d.getFaceImage(c,a)})},getWireframe:function(){var a=this.gv.getWireframe(this.data);return a&&a.width&&a.color?a:null},drawWireframe:function(a,b,c,d){if(c(!1)&&d){var e=this.gv._buffer;rg(a,b),xg(a,b,d.width,d.color,e.vs,Yg),Bg(a,e.is,Zg),zg(a,0,Zg.length,a.LINE_STRIP),sg(a,b)}},drawBody:function(a,b,c){var d=this,e=d.gv,g=d.s,h=d.data,i=(e._buffer,e._cube),j=d.shapeModel,k=d.wireFrame;Fg(e),d.mv(d.mat),d.drawWireframe(a,b,c,k),j?nh(e,h,j,g,d.getBodyColor(),c):(Ag(a,i.vs,f,b.aPosition),Ag(a,i.ns,f,b.aNormal),Bg(a,i.is),d.drawFace(a,b,d.left,0,c),d.drawFace(a,b,d.front,6,c),d.drawFace(a,b,d.right,12,c),d.drawFace(a,b,d.back,18,c),d.drawFace(a,b,d.top,24,c),d.drawFace(a,b,d.bottom,30,c)),Gg(e)},drawFace:function(a,b,c,d,e){if(c){var g=this,h=g.gv,i=h.getTexture(c.texture,g.data),j=c.uv,k=c.uvScale,l=c.uvOffset;if(!e(c.transparent))return;if(i)if(j){for(var m=8*(d/6),n=0;8>n;n++)Wg[m+n]=j[n];vg(a,b,i,h._buffer.uv,Wg,l,k)}else vg(a,b,i,h._cube.uv,f,l,k);tg(a,b,c.blend,c.light,c.brightness,c.opacity,c.reverseFlip,c.reverseColor,c.reverseCull),Cg(a,b.uDiffuse,c.color),zg(a,d,6,a.TRIANGLES),ug(a,b),wg(a,b,i)}}});var Ph=function(a,b){Ub(Ph,this,[a,b])};ve(Ph,Jh,{validate:function(){var a=this,b=a.data,c=a.s,d=b._sourceAgent,e=b._targetAgent;if(a.width=a.mat=a.vs=null,d&&e){var f=a.width=c("edge.width"),g=c("edge.offset"),h=d.p3(),i=e.p3(),j=Be(i,h,!0),k=ge(h,i);g=k>2*g?g:k/2,j[0]*=g,j[1]*=g,j[2]*=g,h[0]+=j[0],h[1]+=j[1],h[2]+=j[2],i[0]-=j[0],i[1]-=j[1],i[2]-=j[2],c("edge.3d")?a.mat=fg(h,i,f):a.vs=new Ae(h.concat(i))}},drawBody:function(a,b,c){var d=this,e=d.s,f=d.width;if(f&&c(e("shape3d.transparent"))){var g=d.gv,h=d.gv._buffer;d.vs?(d.mv(),rg(a,b),xg(a,b,f,d.getBodyColor("edge.color"),h.vs,d.vs),yg(a,0,2,a.LINES),sg(a,b)):(Fg(g),d.mv(d.mat),nh(g,d.data,sh,e,d.getBodyColor(),c),Gg(g))}}});var Qh=function(a,b){Ub(Qh,this,[a,b])};ve(Qh,Oh,{drawBody:function(a,b,c){var d=this,e=d.gv,f=d.shapeModel,g=d.wireFrame;g&&(Fg(e),d.mv(d.wireFrameMat),d.drawWireframe(a,b,c,g),Gg(e)),Fg(e),d.mv(d.mat),f?nh(e,d.data,f,d.s,d.getBodyColor(),c):(d.drawFace(a,b,d.left,c),d.drawFace(a,b,d.front,c),d.drawFace(a,b,d.right,c),d.drawFace(a,b,d.back,c),d.drawFace(a,b,d.top,c),d.drawFace(a,b,d.bottom,c)),Gg(e)},drawFace:function(a,b,c,d){if(c){if(!d(c.transparent))return;var e=this,f=e.gv,g=f._buffer,h=f.getTexture(c.texture,e.data);vg(a,b,h,g.uv,c.tuv,c.uvOffset,c.uvScale),tg(a,b,c.blend,c.light,c.brightness,c.opacity,c.reverseFlip,c.reverseColor,c.reverseCull),Cg(a,b.uDiffuse,c.color),Ag(a,g.vs,c.vs,b.aPosition),Ag(a,g.ns,c.ns,b.aNormal),yg(a,0,c.vs.length/3,a.TRIANGLES),ug(a,b),wg(a,b,h)}},validate:function(){var a=this,b=a.s,c=a.data,d=c.p3(),e=c._thickness/2,g=te(c.getPoints(),c.getSegments(),b("shape3d.side")),h=a.mat=Ee();if(a.wireFrameMat=(a.wireFrame=a.getWireframe())?gg(c.s3(),c.r3(),c.getRotationMode(),c.p3()):f,a.shapeModel=a.left=a.right=a.front=a.back=a.top=a.bottom=f,0>e||"cylinder"===b("shape3d")){var i=a.shapeModel={vs:[]};b("shape3d.image")&&(i.uv=[],i.sum=ec(g),i.len=0),b("shape3d.top.visible")&&(i.top_vs=[],b("shape3d.top.image")&&(i.top_uv=[])),b("shape3d.bottom.visible")&&(i.bottom_vs=[],b("shape3d.bottom.image")&&(i.bottom_uv=[])),0>e&&(b("shape3d.from.visible")&&(i.from_vs=[],b("shape3d.from.image")&&(i.from_uv=[])),b("shape3d.to.visible")&&(i.to_vs=[],b("shape3d.to.image")&&(i.to_uv=[]))),a.iteratePoints(g,e),i.ns=jg(i.vs),i.top_vs&&(i.top_ns=jg(i.top_vs)),i.bottom_vs&&(i.bottom_ns=jg(i.bottom_vs)),i.from_vs&&(i.from_ns=jg(i.from_vs)),i.to_vs&&(i.to_ns=jg(i.to_vs)),qh(i)}else{var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=0,A=0;p=a.vf(R),e&&(q=a.vf(S),r=a.vf(T),s=a.vf(U),t=a.vf(V),u=a.vf(W)),e?a.iteratePoints(g,e):p&&g.forEach(function(b){if(m=b.length,m>0)for(j=b[0],l=1;m>l;l++)k=b[l],a.addV(p.vs,j,k),j=k}),v=p?p.tuv:f,w=q?q.tuv:f,x=t?t.tuv:f,y=u?u.tuv:f,(v||w||x||y)&&(z=ec(g),g.forEach(function(b){if(m=b.length,m>0)for(j=b[0],l=1;m>l;l++)k=b[l],n=A/z,A+=ge(j,k),o=A/z,a.addTUV(p,n,o),a.addTUV(q,1-o,1-n),a.addTUV(t,n,o),a.addTUV(u,n,o),j=k})),p&&(p.ns=jg(p.vs),rh(p,"vs"),rh(p,"tuv")),e&&(q&&(q.ns=jg(q.vs),rh(q,"vs"),rh(q,"tuv")),r&&(r.ns=jg(r.vs),rh(r,"vs"),rh(r,"tuv")),s&&(s.ns=jg(s.vs),rh(s,"vs"),rh(s,"tuv")),t&&(t.ns=jg(t.vs),rh(t,"vs"),rh(t,"tuv")),u&&(u.ns=jg(u.vs),rh(u,"vs"),rh(u,"tuv")))}_f(h,d),Af(h,c.r3(),c.getRotationMode()),_f(h,Ce(d))},addTUV:function(a,b,c){if(a){var d=a.uv,e=a.tuv;if(e){if(d)var f=d[0]+(d[6]-d[0])*b,g=d[1]+(d[7]-d[1])*b,h=d[2]+(d[4]-d[2])*b,i=d[3]+(d[5]-d[3])*b,j=d[2]+(d[4]-d[2])*c,k=d[3]+(d[5]-d[3])*c,l=d[0]+(d[6]-d[0])*c,m=d[1]+(d[7]-d[1])*c;else f=b,g=0,h=b,i=1,j=c,k=1,l=c,m=0;e.push(h,i,j,k,l,m,l,m,f,g,h,i)}}},addLRUV:function(a){var b=a.uv,c=a.tuv;c&&(b?c.push(b[2],b[3],b[4],b[5],b[6],b[7],b[6],b[7],b[0],b[1],b[2],b[3]):c.push(0,1,1,1,1,0,1,0,0,0,0,1))},iteratePoints:function(a,b){var c,d,e,g,h,i=this;if(0>b)var j=i.data,k=j.getPosition(),l=j.getWidth(),m=j.getHeight(),n=k.x-l/2,o=k.y-m/2,p=j.getControlPoint(),q=p.x,r=p.y,s=(q-n)/l,t=(r-o)/m;a.forEach(function(a){if(h=a.length,h>0)for(c={p:a[0],n:!0},g=1;h>g;g++)d=a[g],e=h-1>g?a[g+1]:f,0>b?i.addShapePoint(c,d,e,q,r,s,t,n,o,l,m):i.addPoint(c,d,e,b)})},addShapePoint:function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p=this,q=p.data,r=p.shapeModel,s=a.p,t=q.getTall()/2,u=q.getElevation(),t=q.getTall()/2+u,v=-q.getTall()/2+u,w=r.vs,x=r.top_vs,y=r.bottom_vs,z=r.from_vs,A=r.to_vs,B=r.sum,C=r.uv,D=r.top_uv,E=r.bottom_uv,F=r.from_uv,G=r.to_uv;a.n&&(a.n=!1,z&&(z.push(s.x,t,s.y,s.x,v,s.y,d,v,e,d,v,e,d,t,e,s.x,t,s.y),F&&F.push(0,0,0,1,1,1,1,1,1,0,0,0))),c||A&&(A.push(b.x,t,b.y,d,v,e,b.x,v,b.y,d,v,e,b.x,t,b.y,d,t,e),G&&G.push(1,0,0,1,1,1,0,1,1,0,0,0)),x&&x.push(s.x,t,s.y,d,t,e,b.x,t,b.y),y&&y.push(s.x,v,s.y,b.x,v,b.y,d,v,e),(D||E)&&(l=(s.x-h)/j,n=(s.y-i)/k,m=(b.x-h)/j,o=(b.y-i)/k,D&&D.push(l,n,f,g,m,o),E&&E.push(l,1-n,m,1-o,f,1-g)),w.push(s.x,t,s.y,b.x,t,b.y,b.x,v,b.y,b.x,v,b.y,s.x,v,s.y,s.x,t,s.y),C&&(l=r.len/B,r.len+=ge(s,b),m=r.len/B,C.push(l,0,m,0,m,1,m,1,l,1,l,0)),a.p=b},addPoint:function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,r,s,h,t=this,x=a.p,y=a.f,z=a.b,A=t.s("shape3d.stack"),B=t.shapeModel;if(a.n&&(a.n=!1,h=D(x.y-b.y,b.x-x.x),y={x:x.x+d*w(h),y:x.y+d*u(h)},z={x:2*x.x-y.x,y:2*x.y-y.y},B?B.top_vs&&t.addCircle(z,y,A,B.top_vs,B.top_uv):(e=t.left)&&(t.addV(e.vs,z,y),t.addLRUV(e))),c?(i=Be([x.x,x.y,0],[b.x,b.y,0],!0),j=Be([c.x,c.y,0],[b.x,b.y,0],!0),k=-(i[0]+j[0])/2,l=-(i[1]+j[1])/2,m=q(k*k+l*l),ye>m?(h=D(x.y-b.y,b.x-x.x),f={x:b.x+d*w(h),y:b.y+d*u(h)}):(h=v(De(i,j))/2,n=i[1]*j[0]-i[0]*j[1]>0?-1:1,k/=m,l/=m,m=d/w(h),f={x:b.x+n*m*k,y:b.y+n*m*l})):(h=D(x.y-b.y,b.x-x.x),f={x:b.x+d*w(h),y:b.y+d*u(h)}),g={x:2*b.x-f.x,y:2*b.y-f.y},B){var C,E,F=B.vs,G=B.uv,H=B.sum;for(G&&(C=B.len/H,B.len+=ge(x,b),E=B.len/H),o=t.getCircle(z,y,A),p=t.getCircle(g,f,A),r=0;A>r;r++)s=r+1,Rb(F,o[s]),Rb(F,p[r]),Rb(F,o[r]),Rb(F,p[r]),Rb(F,o[s]),Rb(F,p[s]),G&&(i=r/A,j=s/A,G.push(C,j,E,i,C,i,E,i,C,j,E,j));!c&&B.bottom_vs&&t.addCircle(f,g,A,B.bottom_vs,B.bottom_uv)}else!c&&(e=t.right)&&(t.addV(e.vs,f,g),t.addLRUV(e)),(e=t.front)&&t.addV(e.vs,y,f),(e=t.back)&&t.addV(e.vs,g,z),(e=t.top)&&t.addH(e.vs,y,f,g,z,!0),(e=t.bottom)&&t.addH(e.vs,z,g,f,y);a.p=b,a.f=f,a.b=g},addCircle:function(a,b,c,d,e){var f,g,h=this,i=h.data,j=h.getCircle(a,b,c),k=(a.x+b.x)/2,l=(a.y+b.y)/2,m=i.getElevation(),n=0;for(n=0;c>n;n++)Rb(d,j[n+1]),Rb(d,j[n]),Rb(d,[k,m,l]),e&&(f=z*n/c,g=z*(n+1)/c,e.push(.5-.5*u(g),.5-.5*w(g),.5-.5*u(f),.5-.5*w(f),.5,.5))},getCircle:function(a,b,c){for(var d,e,f=this,g=f.data,h=[],i=(a.x+b.x)/2,j=(a.y+b.y)/2,k=g.getTall()/2,l=g.getElevation(),m=0;c>=m;m++)d=z*m/c,e=u(d),h.push([i+(a.x-i)*e,l+k*w(d),j+(a.y-j)*e]);return h},addV:function(a,b,c){var d=b.x,e=b.y,f=c.x,g=c.y,h=this.data,i=h.getElevation(),j=h.getTall()/2;a.push(d,i-j,e,f,i-j,g,f,i+j,g,f,i+j,g,d,i+j,e,d,i-j,e)},addH:function(a,b,c,d,e,f){var g=this.data,h=g.getTall()/2,i=g.getElevation()+(f?h:-h);a.push(b.x,i,b.y,c.x,i,c.y,d.x,i,d.y,d.x,i,d.y,e.x,i,e.y,b.x,i,b.y)},vf:function(a){var b=this,c=b.data,d=b.gv;if(d.getFaceVisible(c,a)){var e=d.getFaceImage(c,a);return b[a]={vs:[],blend:d.getBodyColor(c)||d.getFaceBlend(c,a),light:d.getFaceLight(c,a),color:d.getFaceColor(c,a),brightness:d.getFaceBrightness(c,a),opacity:d.getFaceOpacity(c,a),transparent:d.getFaceTransparent(c,a),reverseFlip:d.getFaceReverseFlip(c,a),reverseColor:d.getFaceReverseColor(c,a),reverseCull:d.getFaceReverseCull(c,a),texture:e,uv:d.getFaceUV(c,a),uvScale:d.getFaceUVScale(c,a),uvOffset:d.getFaceUVOffset(c,a),tuv:e?[]:f}}return f}});var Rh="circular",Sh="symmetric",Th="hierarchical",Uh="towardnorth",Vh="towardsouth",Wh="towardeast",Xh="towardwest",Yh=function(a){return Rh===a?new nj:Sh===a?new Bj:Th===a?new Lj:a===Uh||a===Vh||a===Wh||a===Xh?new _i:f},Zh=function(a){return a===Xh?new ad(A):a===Wh?new ad(-A):a===Uh?new ad(y):f},$h=g.layout={},_h=function(a,b,c){ve(d+".layout."+a,b,c)},ai=function(a,b){this.x=a,this.y=b};ve(ai,b,{equals:function(a){return this===a?!0:a instanceof ai?a.x===this.x&&a.y===this.y:!1}});var bi=function(a,b){this.width=a,this.height=b};ve(bi,b,{});var ci=function(a,b){this.x=a,this.y=b};ve(ci,b,{});var di=function(){var a=arguments;2===a.length?(di.superClass.constructor.call(this,a[1].width,a[1].height),this.x=a[0].x,this.y=a[0].y):(di.superClass.constructor.call(this,a[2],a[3]),this.x=a[0],this.y=a[1])};ve(di,bi,{});var ei=function(a,b){if(ei.a2(a.x,b.x))this._a=1,this._b=0,this._c=-a.x;else{this._b=-1;var c=(b.y-a.y)/(b.x-a.x),d=a.y-a.x*c;this._a=c,this._c=d}};ve(ei,b,{a3:function(){return this._a},a4:function(){return this._b},a5:function(){return this._c}}),ei.a6=function(a,b){if(ei.a1(a.a3())&&ei.a1(b.a3()))return f;if(ei.a1(a.a4())&&ei.a1(b.a4()))return f;if(ei.a1(b.a4())){var c=a;a=b,b=c}var d,e,g=a.a3(),h=a.a4(),i=-a.a5();ei.a1(a.a3())?(d=b.a4(),e=-b.a5()):(d=b.a4()-b.a3()/a.a3()*a.a4(),e=-b.a5()-b.a3()/a.a3()*-a.a5());var j=e/d,k=(i-j*h)/g;return new ai(k,j)},ei.a1=function(a){return ei.a2(a,0)},ei.a2=function(a,b){return t(a-b)<1e-5};var fi=function(a){if(this._a=new Ai,a)for(var b=0;b<a.size();b++)this._a.aa(a.get(b))};ve(fi,b,{c:function(){return this._a.ah()},d:function(){return this._a.ah()},a:function(){for(var a=new We,b=this.c();b.i1();b.i2())a.add(b.i6(),0);return new fi(a)},b:function(){return this._a.ay()}});var gi=function(a,b){this.x=a,this.y=b};ve(gi,b,{a:function(a,b){this.x=a,this.y=b}});var hi=function(a,b){this.x=a||0,this.y=b||0};ve(hi,b,{b:function(){return new hi(this.x,this.y)},a:function(a){this.z=a},c:function(){return this.x},d:function(){return this.y},f:function(a,b){this.x=a,this.y=b}});var ii=function(a){this._c=new Ai,a?(this.ac(a.a8().b()),this.ad(a.a9().b())):(this.ac(new hi),this.ad(new hi))};ve(ii,b,{a6:function(){return this.a5(this)},ac:function(a){a.a(this),this._a=a},ad:function(a){a.a(this),this._b=a},a8:function(){return this._a},a9:function(){return this._b},a1:function(a,b){return this.a4(a,b,this.aa())},a2:function(){return this._c.ay()},a7:function(a){return this._c.ak(a)},aa:function(){return 0===this._c.ay()?f:this._c.as()},a3:function(){this._c.af()},i2:function(a){var b=this.a7(a);return b?new ai(b.x,b.y):f},i1:function(){return this.a2()},i6:function(){var a=this.a8();return new ai(a.c(),a.d())},i7:function(){var a=this.a9();return new ai(a.c(),a.d())},i8:function(a){this.a8().f(a.x,a.y)},i9:function(a){this.a9().f(a.x,a.y)},i3:function(a,b,c){var d=this.a7(a);d&&d.a(b,c)},i4:function(a,b){this.a1(a,b)},i5:function(){this.a3()}});var ji=function(a){ji.superClass.constructor.call(this,a)};ve(ji,ii,{a5:function(a){return new ji(a)},a4:function(a,b,c){var d=new gi(a,b);return this.ab(d,c),d},ab:function(a,b){this._c.an(a,this._c.al(b))}});var ki=function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];this._s=!1,this._w=30,this._h=30,this._x=a-this._w/2,this._y=b-this._h/2}else{var c=arguments[0];this._s=c._s,this._w=c._w,this._h=c._h,this._x=c._x,this._y=c._y}};ve(ki,b,{m3:function(){return this.m2(this)},m4:function(){return this._x+this._w/2},m5:function(){return this._y+this._h/2},m6:function(a,b){this._x=a-this._w/2,this._y=b-this._h/2},i1:function(){return this._x},i2:function(){return this._y},i5:function(a,b){this._x=a,this._y=b},i3:function(){return this._w},i4:function(){return this._h},i6:function(a,b){var c=(this._w-a)/2,d=(this._h-b)/2;this._x+=c,this._y+=d,this._w=a,this._h=b},m1:function(a){var b,c,d,e;a.width<=0?(b=this._x,c=this._x+this._w,d=this._y,e=this._y+this._h):(b=s(this._x,a.x),c=r(this._x+this._w,a.x+a.width),d=s(this._y,a.y),e=r(this._y+this._h,a.y+a.height)),a.x=b,a.y=d,a.width=c-b,a.height=e-d}});var li=function(a){a?li.superClass.constructor.call(this,a):li.superClass.constructor.call(this,0,0)};ve(li,ki,{m2:function(a){return new li(a)}});var mi={a2:function(a){var b=Xi.a2(Qj.a(a.xa()));return mi.a4(a,b,mi.a3(a,b))},a3:function(a,b){for(var c=a.x9();c.i1();c.i2())b.i7(c.i9(),-1);for(var d=0,e=new Gi(a.xa()),f=a.x9();f.i1();f.i2()){var g=f.i9();-1===b.i2(g)&&mi.a(g,e,b,d++)}return d},a6:function(a){for(var b=new Bi,c=mi.a2(a),d=0;d<c.length-1;d++){var e=a.xo(c[d].x2(),c[d+1].x3());b.aa(e)}return b},a4:function(a,b,c){for(var d=[],e=0,f=a.x9();c>e;e++)d[e]=new Ti;for(;f.i1();f.i2())d[b.i2(f.i9())].ae(f.i9());return d},a:function(a,b,c,d){for(b.c(a),c.i7(a,d);!b.a();){a=b.b();for(var e=a.ag();e;e=e.a8()){var f=e.a3();-1===c.i2(f)&&(c.i7(f,d),b.c(f))}for(var g=a.ae();g;g=g.a7()){var h=g.a2();-1===c.i2(h)&&(c.i7(h,d),b.c(h))}}},a1:function(a,b,c){var d=new vi(b,c);return d.a8(a),d._i},a5:function(a,b,c){for(var d=[],e=0;c>e;e++)d[e]=new Bi;for(var f=a.xf();f.i1();f.i2())d[b.i2(f.i8())].aa(f.i8());return d},a7:function(a){var b=new Bi,c=Xi.a3(Qj.b(a.xa())),d=Xi.a4(Qj.a(a.xh())),e=mi.a1(a,d,c),g=mi.a5(a,d,e);if(g.length>1){for(var h=new Ti,i=0;i<g.length;i++){var j=g[i],k=f;if(1===j.ay()){var l=j.c2();1===l.a2().ad()?k=l.a2():1===l.a3().ad()&&(k=l.a3())}else{for(var m=j.c1();m.i1();m.i2()){var n=m.i8();if(c.i4(n.a2()))if(k){if(k!==n.a2()){k=f;break}}else k=n.a2();if(c.i4(n.a3()))if(k){if(k!==n.a3()){k=f;break}}else k=n.a3()}if(k){var o=j.c2();k=o.a2()!==k?o.a2():o.a3()}}k&&h.aa(k)}for(var p,q=h.x4();!h.ar();q=p)p=h.x4(),b.ac(a.xo(q,p))}return b}},ni=function(){this._c=0,this._d=0,this._e=0,this._b=!0,this._f=!1};ve(ni,b,{a6:function(a){this._f=a},a7:function(a){this._b=a},a8:function(a){0!==a.x0()&&this.a9(a,a.x9().i9())},a9:function(a,b){if(this._xx=a.xk(),this._c=a.xl(),this._d=0,this._e=0,this.a0(b),this._b)for(var c=a.x9();c.i1();c.i2()){var d=c.i9();this._xx.i1(d)||(this.a1(d),this.a0(d))}a.xi(this._xx),a.xj(this._c)},a0:function(a){var b=++this._d;this._xx.z1(a,ni._B),this.a5(a,b);for(var c=this._f?a.ap():a.af();c.i1();c.i2()){var d=c.i8();if(!this._c.i4(d)){this._c.i7(d,!0);var e=d.a1(a);this._xx.i1(e)?this.a3(d,e,!1):(this.a3(d,e,!0),this.a0(e),this.a2(d,e))}}this.a4(a,b,++this._e),this._xx.z1(a,ni._C)},a5:function(){},a4:function(){},a3:function(){},a2:function(){},a1:function(){}}),ni._B={},ni._C={};var oi=function(a){this._a=a};ve(oi,ni,{a5:function(a){var b=this._a._ah.i2(a);this._a._ad[b].ae(a)}});var pi=function(a){this._a=a};ve(pi,ni,{a2:function(a,b){var c=a.a1(b),d=this._a[c.al()],e=this._a[b.al()];e._a+1>d._a?(d._c=d._a,d._b=d._d,d._a=e._a+1,d._d=a):e._a+1>d._c&&(d._c=e._a+1,d._b=a)}});var qi=function(a){this._a=a};ve(qi,ni,{a3:function(a,b,c){c&&a.a2()===b&&this._a.ac(a)}});var ri=function(){this._a=0,this._c=0};ve(ri,b,{});var si=function(){this._a=0};ve(si,b,{a1:function(a,b){this._a=0;for(var c=b.length-1;c>=0;c--)b[c]=-1;for(var d=a.x9();d.i1();d.i2()){var e=d.i9();if(0===e.ak()){this.a2(e,e.al(),b);break}}for(var f=a.x9();f.i1();f.i2()){var g=f.i9(),h=g.al();-1===b[h]&&this.a2(g,h,b)}},a2:function(a,b,c){c[b]=-2;for(var d=a.ag();d;){var e=d.a3(),f=e.al();switch(c[f]){case-1:this.a2(e,f,c);case-2:default:d=d.a8()}}c[b]=this._a++}});var ti={a1:function(a){var b=new ui;return b.a8(a),b._n},a2:function(a){var b,c=a.x9(),d=0;
for(c.i4();c.i1();c.i2())0===c.i9().ak()&&(b=c.i9(),d++);if(1===d)return b;for(d=0,c.i4();c.i1();c.i2())0===c.i9().ao()&&(b=c.i9(),d++);return 1===d?b:ti.a8(a)},a8:function(a){var b=Qj.a(a.x0()),c=Xi.a2(b);return ti.a6(a,c)},a6:function(a,b){var c=a.xd(),d=Qj.d(1),e=Qj.a(a.x0(),-1),f=ti.a4(a,c);ti.a7(c,b,d,e,-1);for(var g=f.c1();g.i1();g.i2())a.x3(g.i8());return d[0]},a7:function(a,b,c,d,e){for(var f=0,g=a.ag();g;g=g.a8()){var h=g.a3(),i=ti.a7(h,b,c,d,e);i>e&&(e=i),f+=d[h.al()]}for(var j=f*(a._g.xa()-1-f),k=a.ag();k;k=k.a8())for(var l=k.a3(),m=k.a8();m;m=m.a8()){var n=m.a3();j+=d[l.al()]*d[n.al()]}return b.i7(a,j),d[a.al()]=f+1,j>e&&(e=j,c[0]=a),e},a4:function(a,b){var c=new Bi,d=new qi(c);d.a6(!1),d.a9(a,b);for(var e=c.c1();e.i1();e.i2())a.x3(e.i8());return c},a3:function(a){return ti.a4(a,ti.a2(a))}},ui=function(){this._n=!0,this.a6(!1)};ve(ui,ni,{a3:function(a,b,c){c||(this._n=!1)},a1:function(){this._n=!1}});var vi=function(a,b){this._i=0,this._m=b,this._j=a,this._l=!1};ve(vi,ni,{a8:function(a){this._h=Qj.a(a.x0()),this._k=Qj.a(a.x0()),this._g=new Gi(a.xh()),vi.superClass.a8.call(this,a)},a5:function(a,b){this._k[a.al()]=this._h[a.al()]=b},a3:function(a,b,c){if(this._g.c(a),!c){var d=a.a1(b);this._h[d.al()]=s(this._h[d.al()],this._k[b.al()])}},a1:function(){this._l=!1},a2:function(a,b){var c=a.a1(b);if(this._h[b.al()]>=this._k[c.al()]){for(;this._g.d()!==a;this._j.i5(this._g.b(),this._i));this._j.i5(this._g.b(),this._i),this._i++,this._g.a()?this._l?this._m.i5(c,!0):this._l=!0:this._m.i5(c,!0)}this._h[c.al()]=s(this._h[c.al()],this._h[b.al()])}});var wi=function(a,b){this._h=!1,this._i=a,this._g=b};ve(wi,b,{z1:function(a,b){a._c[this._i]=b},i1:function(a){return a._c[this._i]},i5:function(a,b){a._c[this._i]=b},i4:function(a){return a._c[this._i]},i7:function(a,b){a._c[this._i]=b},i2:function(a){var b=a._c[this._i];return b?b:0},i6:function(a,b){a._c[this._i]=b},i3:function(a){var b=a._c[this._i];return b?b:0},c:function(){return this._h},d:function(){this._h=!0}});var xi=function(a,b){this._c=!1,this._d=a,this._b=b};ve(xi,b,{i8:function(a,b){a._c[this._d]=b},i1:function(a){return a._c[this._d]},i7:function(a,b){a._c[this._d]=b},i4:function(a){var b=a._c[this._d];return b?b:!1},i5:function(a,b){a._c[this._d]=Qj.a(b)},i2:function(a){var b=a._c[this._d];return b?b:0},i6:function(a,b){a._c[this._d]=Qj.a(b)},i3:function(a){var b=a._c[this._d];return b?b:0},a:function(){return this._c},b:function(){this._c=!0}});var yi=function(a){this._bb=a,this.i4()};ve(yi,b,{i1:function(){return this._aa!=f},i2:function(){this._aa=this._aa._a},i3:function(){this._aa=this._aa._b},i4:function(){this._aa=this._bb._b},i5:function(){this._aa=this._bb._c},i7:function(){return this._bb.ay()},i6:function(){return this._aa._c}});var zi=function(a){zi.superClass.constructor.call(this,a)};ve(zi,yi,{i8:function(){return this.i6()}});var Ai=function(a){if(this._id=Ai.id(),this._a=0,a)for(a.i4();a.i1();a.i2())this.ae(a.i6())};ve(Ai,b,{ac:function(a){var b=this.ag(a);return this._b?(this._b._b=b,b._a=this._b,this._b=b):this._b=this._c=b,this._a++,b},ae:function(a){var b=this.ag(a);return this._c?(this._c._a=b,b._b=this._c,this._c=b):this._b=this._c=b,this._a++,b},z1:function(a){a._b=f,a._a=f,this._c?(this._c._a=a,a._b=this._c,this._c=a):this._b=this._c=a,this._a++},ad:function(a){a._b=f,a._a=f,this._b?(this._b._b=a,a._a=this._b,this._b=a):this._b=this._c=a,this._a++},aa:function(a){return this.ae(a),!0},ab:function(a){for(;a.i1();a.i2())this.ae(a.i6())},ao:function(a,b){if(b===this._b)return this.ac(a);if(b){var c=this.ag(a);return this.aq(c,b),c}return this.ae(a)},aq:function(a,b){if(b)if(b===this._b)this.ad(a);else{if(this._c){var c=b._b;b._b=a,a._a=b,c._a=a,a._b=c}else a._b=f,a._a=f,this._b=this._c=a;this._a++}else this.ad(a)},ap:function(a,b){if(b)if(b===this._c)this.z1(a);else{if(this._b){var c=b._a;b._a=a,a._a=c,c._b=a,a._b=b}else a._b=f,a._a=f,this._b=this._c=a;this._a++}else this.z1(a)},an:function(a,b){if(b===this._c)return this.ae(a);if(b){var c=this.ag(a);return this.ap(c,b),c}return this.ac(a)},ay:function(){return this._a},ar:function(){return 0===this._a},af:function(){this._b=this._c=f,this._a=0},am:function(){return this._b._c},at:function(){var a=this.am();return this.aw(this._b),a},as:function(){return this._c._c},au:function(){return this.aw(this._c)},ak:function(a){for(var b=0,c=this._b;c;){if(a===b)return c._c;c=c._a,b++}return f},aj:function(a){return a._a?a._a:this._b},ai:function(a){return a._b?a._b:this._c},aw:function(a){return a!==this._b?a._b._a=a._a:this._b=a._a,a!==this._c?a._a._b=a._b:this._c=a._b,this._a--,a._c},av:function(a){return this.aw(a._aa)},ah:function(){return new yi(this)},al:function(a){for(var b=this._b;b;){if(!b._c&&!a)return b;if(b._c===a)return b;b=b._a}return f},a0:function(){for(var a=Qj.d(this._a),b=0,c=this._b;c;)a[b]=c._c,c=c._a,b++;return a},ax:function(){for(var a=this._b;a;a=a._b){var b=a._a;a._a=a._b,a._b=b}var c=this._b;this._b=this._c,this._c=c},a1:function(a){var b=this.a0(),c=0;b.sort(a);for(var d=this._b;d;)d._c=b[c],d=d._a,c++},a2:function(){var a=this.a0();a.sort(Qj.c);for(var b=0,c=this._b;c;)c._c=a[b],c=c._a,b++},az:function(a){this._b?a._b&&(this._c._a=a._b,a._b._b=this._c,this._c=a._c):(this._b=a._b,this._c=a._c),this._a+=a._a,a._b=a._c=f,a._a=0},ag:function(a){return new Ei(a)}}),Ai.id=function(){var a=0;return function(){return++a}}();var Bi=function(a){Bi.superClass.constructor.call(this,a)};ve(Bi,Ai,{c1:function(){return new zi(this)},c2:function(){return this.am()},c3:function(){return this.at()}});var Ci=function(){this._c=0};ve(Ci,b,{a:function(a){this._c++,a._b=this._b,a._a=f,this._b?(this._b._a=a,this._b=a):this._b=this._a=a},b:function(a,b){if(!b)return this.a(a),void 0;var c=b._b;c?c._a=a:this._a=a,a._b=c,a._a=b,b._b=a,this._c++},c:function(a){var b=a._a,c=a._b;this._c--,b?b._b=c:this._b=c,c?c._a=b:this._a=b}});var Di=function(a,b){this._p=a,this._j=b,this._o=a._o[b]};ve(Di,b,{i1:function(){return this._o!=f},i2:function(){this._o=this._o._k[this._j]},i3:function(){this._o=this._o._f[this._j]},i4:function(){this._o=this._p._o[this._j]},i5:function(){this._o=this._p._q[this._j]},i7:function(){return this._p._n[this._j]},i6:function(){return this._o},i8:function(){return this._o}});var Ei=function(a){this._c=a};ve(Ei,b,{a:function(){return this._a},b:function(){return this._b},c:function(a){this._c=a},d:function(){return this._c}});var Fi=function(a,b,c,d){this._r=a,this._s=b,this._q=c,this._p=d};ve(Fi,b,{i1:function(a){return this._p[a.a5()]},i3:function(a){return this._r[a.a5()]},i2:function(a){return this._s[a.a5()]},i4:function(a){return this._q[a.a5()]},i8:function(a,b){this._p[a.a5()]=b},i6:function(a,b){this._r[a.a5()]=b},i5:function(a,b){this._s[a.a5()]=b},i7:function(a,b){this._q[a.a5()]=b}});var Gi=function(a){this._a=Qj.d(a),this._b=-1};ve(Gi,b,{d:function(){return this._a[this._b]},b:function(){return this._a[this._b--]},c:function(a){this._a[++this._b]=a},a:function(){return this._b<0}});var Hi=function(){};ve(Hi,b,{a0:function(a){this._c=Qj.d(a)}});var Ii=function(a,b,c,d,e,f,g){this._g=0,a.xt(this,b,c,d,e,f,g)};ve(Ii,Hi,{a5:function(){return this._h._u&&this._h.b1(),this._g},a2:function(){return this._d},a3:function(){return this._e},a1:function(a){return this._d!==a?this._d:this._e},a4:function(){for(var a=0;1>=a;a++)this._k[a]=f,this._f[a]=f},a8:function(){return this._k[0]},a7:function(){return this._k[1]},a6:function(a,b,c,d){this.a0(d),this._h=a,this._k=Qj.d(2),this._f=Qj.d(2),this._d=b,this._e=c}});var Ji=function(a){this._j=0,this._h=a,this.i4()};ve(Ji,b,{i2:function(){this._k=this._k._k[this._j],this._k||0!==this._j||(this._k=this._h._o[1],this._j=1)},i3:function(){this._k=this._k._f[this._j],this._k||1!==this._j||(this._k=this._h._q[0],this._j=0)},i4:function(){this._k=this._h._o[0],this._k?this._j=0:(this._k=this._h._o[1],this._j=1)},i5:function(){this._k=this._h._q[1],this._k?this._j=1:(this._k=this._h._q[0],this._j=0)},i1:function(){return!!this._k},i6:function(){return this._k},i8:function(){return this._k},i7:function(){return this._h.ad()}});var Ki=function(){this._a=pj._A,this._b=pj._A,this._c=new We};ve(Ki,b,{i1:function(){return this._c.size()},i2:function(a){return this._c.get(a)},i3:function(a,b,c){this._c.set(a,new ai(b,c))},i4:function(a,b){this._c.add(new ai(a,b))},i5:function(){this._c.clear()},i6:function(){return this._a},i7:function(){return this._b},i8:function(a){this._a=a},i9:function(a){this._b=a}});var Li=function(){this._x=0,this._y=0,this._w=0,this._h=0};ve(Li,b,{i5:function(a,b){this._x=a,this._y=b},i6:function(a,b){this._w=a,this._h=b},i4:function(){return this._h},i3:function(){return this._w},i1:function(){return this._x},i2:function(){return this._y}});var Mi=function(a,b,c,d){this._m=a,this._n=b,this._l=c,this._k=d};ve(Mi,b,{i1:function(a){return this._k[a.al()]},i3:function(a){return this._m[a.al()]},i2:function(a){return this._n[a.al()]},i4:function(a){return this._l[a.al()]},z1:function(a,b){this._k[a.al()]=b},i6:function(a,b){this._m[a.al()]=b},i7:function(a,b){this._n[a.al()]=b},i5:function(a,b){this._l[a.al()]=b}});var Ni=function(a,b){this._b=a,this._r=b,this._a=[];for(var c=this._b-1;c>=0;c--)this._a.push(c);this._c=new We};ve(Ni,b,{a1:function(a){var b;if(0===this._a.length){this.a2(a,this._b,this._b+this._r);for(var c=this._b+this._r-1;c>this._b;c--)this._a.push(c);b=this._b,this._b+=this._r}else b=this._a.pop();return b},b:function(a){var b=this.a1(a),c=new wi(b,this);return this._c.add(c),this.a4(a,b),c},c:function(a){var b=this.a1(a),c=new xi(b,this);return this._c.add(c),this.a4(a,b),c},a2:function(a,b,c){for(var d=a._a;d;d=d._a){var e=Qj.d(c);Qj.f(d._c,e,b),d._c=e}},a3:function(a,b,c){var d=Qj.d(c);Qj.f(a._c,d,b),a._c=d},a4:function(a,b){for(var c=a._a;c;c=c._a)c._c[b]=f},a5:function(a,b){if(a instanceof wi){var c=a;if(c.c())throw"";c.d();var d=a._i;this._a.indexOf(d)<0&&(this.a4(b,d),this._a.push(d),this._c.remove(a))}},a6:function(a,b){if(a instanceof xi){var c=a;if(c.a())throw"";c.b();var d=c._d;this._a.indexOf(d)<0&&(this.a4(b,d),this._a.push(d),this._c.remove(a))}}});var Oi=function(a){this._id=Ai.id(),this._p=0,a.xs(this)};ve(Oi,Hi,{ad:function(){return this._n[0]+this._n[1]},ak:function(){return this._n[1]},ao:function(){return this._n[0]},al:function(){return this._g._y&&this._g.c(),this._p},ag:function(){return this._o[0]},ae:function(){return this._o[1]},af:function(){return new Ji(this)},am:function(){return new Di(this,1)},ap:function(){return new Di(this,0)},an:function(){return new Qi(this)},aq:function(){return new Pi(this,1)},aw:function(){return new Pi(this,0)},ah:function(a){for(var b=this._o[0];b;b=b._k[0])if(b.a3()===a)return b;return f},ai:function(a){for(var b=this._o[1];b;b=b._k[1])if(b.a2()===a)return b;return f},aj:function(a){var b=this.ah(a);return b||(b=this.ai(a)),b},au:function(a){this.at(a,1,Qj.d(this.ak()))},av:function(a){this.at(a,0,Qj.d(this.ao()))},as:function(a,b){this.a0(b),this._g=a,this._o=Qj.d(2),this._q=Qj.d(2),this._n=Qj.a(2)},ab:function(a,b,c,d,e){if(!b)return this.aa(a,c,d),void 0;var f;if(f=b._d===b._e?d:this!==b._d?1:0,0===e){var g=b._k[f];a._f[d]=b,a._k[d]=g,b._k[f]=a,g?g._d===g._e?g._f[d]=a:g._f[this!==g._d?1:0]=a:this._q[c]=a}else{var h=b._f[f];a._k[d]=b,a._f[d]=h,b._f[f]=a,h?h._d===h._e?h._k[d]=a:h._k[this!==h._d?1:0]=a:this._o[c]=a}this._n[c]++},aa:function(a,b,c){var d=this._q[b];a._k[c]=f,d?(a._f[c]=d,d._d===d._e?d._k[c]=a:d._k[this!==d._d?1:0]=a):(this._o[b]=a,a._f[c]=f),this._q[b]=a,this._n[b]++},ar:function(a,b,c){var d,e;d=a._k[c],e=a._f[c],d?d._f[d._d!==this?1:0]=e:this._q[b]=e,e?e._k[e._d!==this?1:0]=d:this._o[b]=d,this._n[b]--},ac:function(){for(var a=0;1>=a;a++)this._o[a]=f,this._q[a]=f,this._n[a]=0},at:function(a,b,c){if(!(this._n[b]<2)){for(var d=this._n[b],e=0,g=this._o[b];g;g=g._k[b])c[e]=g,e++;Qj.s(c,d,a);var h=1,i=this._o[b]=c[0];for(i._f[b]=f;d>h;)g=c[h],g._f[b]=i,i._k[b]=g,h++,i=g;this._q[b]=g,g._k[b]=f}}});var Pi=function(a,b){Pi.superClass.constructor.call(this,a,b),this._h=1!==b?1:0};ve(Pi,Di,{i6:function(){return this.i9()},i9:function(){return 0!==this._h?this._o._e:this._o._d}});var Qi=function(a){Qi.superClass.constructor.call(this,a)};ve(Qi,Ji,{i6:function(){return this._k.a1(this._h)},i9:function(){return this._k.a1(this._h)}});var Ri=function(a){Ri.superClass.constructor.call(this,a)};ve(Ri,yi,{i9:function(){return this.i6()}});var Si=function(a){this._o=a,this._c=a._a};ve(Si,b,{i1:function(){return this._c!=f},i2:function(){this._c=this._c._a},i3:function(){this._c=this._c._b},i5:function(){this._c=this._o._b},i4:function(){this._c=this._o._a},i7:function(){return this._o._c},i6:function(){return this._c},i9:function(){return this._c},i8:function(){return this._c}});var Ti=function(a){if(a&&a.length){Ti.superClass.constructor.call(this);for(var b=0;b<a.length;b++)this.ae(a[b])}else Ti.superClass.constructor.call(this,a)};ve(Ti,Ai,{x1:function(){return new Ri(this)},x2:function(){return this.am()},x3:function(){return this.as()},x4:function(){return this.at()}});var Ui=function(a){this._d=a,Ui.superClass.constructor.call(this)};ve(Ui,Ti,{});var Vi=function(a){this._a=a,this._b=new Bi,this._c=new Ti};ve(Vi,b,{a:function(){for(var a=this._a.x9();a.i1();a.i2())this.e(a.i9())},b:function(){this.c(),this.d()},c:function(){for(;!this._c.ar();){var a=this._c.x4();this._a.xq(a)||this.g(a)}},d:function(){for(;!this._b.ar();){var a=this._b.c3();this._a.xp(a)||this.f(a)}},e:function(a){for(var b=a.af();b.i1();b.i2())this._b.ac(b.i8()),this._a.h1(b.i8());this._c.ac(a),this._a.h2(a)},f:function(a){this._a.u1(a)},g:function(a){this._a.h3(a)}}),Vi.h=function(a,b){for(b.i4();b.i1();b.i2()){var c=b.i8();a.xq(c.a2())||a.h3(c.a2()),a.xq(c.a3())||a.h3(c.a3()),a.xp(c)||a.u1(c)}},Vi.i=function(a,b){for(b.i4();b.i1();b.i2()){var c=b.i8();a.xp(c)&&a.h1(c),0===c.a2().ad()&&a.h2(c.a2()),0===c.a3().ad()&&a.h2(c.a3())}};var Wi=function(){var a=arguments;this._g=a[0],this._f=this._g.xk(),this._h=this._g.xk(),this._d=new Ai,this._e=0,1!==a.length&&this.a(a[1],a[2],a[3],a[4])};ve(Wi,b,{a:function(a,b,c,d){for(var e=Qj.d(c-b+1),f=b,g=0;c>=f;f++)e[f]=new Ui(f);for(var h=this._g.x9();h.i1();h.i2()){var i=h.i9();(!d||d.i4(i))&&(this._f.z1(i,e[a.i2(i)-b].ac(i)),this._e++)}for(;g<e.length;g++)for(var j=e[g],k=this._d.ae(j),l=j.x1();l.i1();l.i2())this._h.z1(l.i9(),k)},c:function(){this._g.xi(this._h),this._g.xi(this._f)},e:function(){return 0===this._e},g:function(){for(;this._d.am().ar();this._d.at());this._e--;var a=this._d.am().x4();return this._h.z1(a,f),this._f.z1(a,f),a},f:function(){for(;this._d.as().ar();this._d.au());this._e--;var a=this._d.as().x4();return this._h.z1(a,f),this._f.z1(a,f),a},d:function(a){var b=this._f.i1(a),c=this._h.i1(a),d=c.d(),e=f,g=c.a();g?(e=g.d(),this._h.z1(a,g)):(e=new Ui(d._d+1),this._h.z1(a,this._d.ae(e))),d.aw(b),this._f.z1(a,e.ac(a))},b:function(a){var b=this._f.i1(a),c=this._h.i1(a),d=c.d(),e=f,g=c.b();g?(e=g.d(),this._h.z1(a,g)):(e=new Ui(d._d-1),this._h.z1(a,this._d.ac(e))),d.aw(b),this._f.z1(a,e.ac(a))}});var Xi={a1:function(a){return new Mi(a,f,f,f)},a2:function(a){return new Mi(f,a,f,f)},a3:function(a){return new Mi(f,f,a,f)},a4:function(a){return new Fi(f,a,f,f)},a5:function(a){return new Fi(f,f,a,f)},a6:function(a){return new Fi(f,f,f,a)}},Yi=function(){var a=arguments;if(2===a.length){this._a=new Ai,this._b=new Ai,this._c=0;var b=a[0],c=a[1],d=new Zi(b._j2.gj(c)/2,0);this._a.ac(d),d=new Zi(b._j2.gj(c)/2,0),this._b.ac(d)}else this._a=a[1],this._b=a[2],this._c=a[3]};ve(Yi,b,{});var Zi=function(a,b){this._b=a,this._a=b};ve(Zi,b,{});var $i=function(){this._cx=!0,this._cs=new kj,this._ct=new ij,this._cw=new jj};ve($i,b,{i5:function(a){this._cx=a},k:function(){var a=new lj(this);return this._cx&&(this._cs.w1(a),a=this._cs),this._cw.w1(a),a=this._cw,this._ct.w1(a),a=this._ct},i2:function(a){this.k().i2(a)},i1:function(a){return this.k().i1(a)}});var _i=function(){_i.superClass.constructor.call(this),this._jv=20,this._jw=40,this._jx=function(a,b){var c=a.a3(),d=b.a3(),e=c._g;return o(100*(e.g5(c)-e.g5(d)))}};ve(_i,$i,{i4:function(a){return ti.a1(a)},i3:function(a){if(!this.i4(a))throw"";var b=ti.a3(a);if(this._j2=a,this._j3=new aj(a),xj.c(a),this._jy=a.xk(),!a.xb()){this.bu();var c=this._j3.c1();this.f(c),this.b(this._j3),this.c(this._j3)}for(var d;!b.ar();a.x3(d))d=b.c3(),xj.b(a.g2(d))},bu:function(){if(this._jx)for(var a=this._j2.x9();a.i1();a.i2())a.i9().av(this._jx)},c:function(a){for(var b=this.a2(a),c=Qj.a(b.length),d=0;d<b.length;d++){for(var e=b[d],f=0,g=e.ah();g.i1();g.i2()){var h=g.i6();f=r(f,this._j2.g9(h))}c[d]=f}for(var i=-this._jw,j=0;j<b.length;j++){i+=this._jw+c[j];for(var k=b[j],l=k.ah();l.i1();l.i2()){var m=l.i6();this._j2.s2(m,this._j2.g5(m),i-c[j]/2)}}},a2:function(a){for(var b=Qj.d(a.b()),c=0,d=a.b();d>c;c++)b[c]=new Ai;return a.c1(),this.a1(a.c1(),0,b),b},a1:function(a,b,c){c[b].ae(a);for(var d=a.aw();d.i1();d.i2())this.a1(d.i9(),b+1,c)},b:function(a){var b=a.c1();this._j2.s2(b,0,this._j2.g6(b)),this.g(b)},g:function(a){for(var b=a.aw();b.i1();b.i2()){var c=b.i9(),d=this._jy.i1(c);this._j2.s2(c,this._j2.g5(a)+d._c,this._j2.g6(c)),this.g(c)}},f:function(a){if(this._j3.c2(a))return this._jy.z1(a,new Yi(this,a)),void 0;var b=a.aw(),c=b.i9();b.i2(),this.f(c);var d=this._jy.i1(c),e=new Yi(this,d._a,d._b,0);if(!b.i1())return e._a.ac(new Zi(this._j2.gj(a)/2,0)),e._b.ac(new Zi(this._j2.gj(a)/2,0)),this._jy.z1(a,e),void 0;for(;b.i1();){c=b.i9(),b.i2(),this.f(c),d=this._jy.i1(c);for(var f=e._b.ah(),g=d._a.ah(),h=2147483647,i=0,j=0;f.i1()&&g.i1();){var k=f.i6();f.i2();var l=g.i6();g.i2(),j+=k._a,i+=l._a,h=s(h,i-j-k._b-l._b)}d._c=this._jv-h,i+=d._c;var m=d._b.am();if(m._a=d._c,f.i1()&&!g.i1())for(var n=j-this.a3(d._b);f.i1();n=0){var o=f.i6();f.i2(),d._b.ae(new Zi(o._b,o._a+n))}else if(!f.i1()&&g.i1()){var p=this.a3(e._a);for(p=i-p;g.i1();p=0){var q=g.i6();g.i2(),e._a.ae(new Zi(q._b,q._a+p))}}e._b=d._b}this._jy.z1(a,e);for(var r=-d._c/2,t=a.aw();t.i1();){var u=t.i9();t.i2();var v=this._jy.i1(u);v._c+=r;var w=v._b.am();w._a+=r,w=v._a.am(),w._a+=r}e._a.ac(new Zi(this._j2.gj(a)/2,0)),e._b.ac(new Zi(this._j2.gj(a)/2,0))},a3:function(a){for(var b=0,c=a.ah();c.i1();c.i2()){var d=c.i6();b+=d._a}return b}});var aj=function(a){this._b=a,this.a()};ve(aj,b,{c1:function(){return this._a||this.a(),this._a},b:function(){return this._a?this.d(this._a):-1},d:function(a){for(var b=0,c=a.aw();c.i1();c.i2())b=r(b,this.d(c.i9()));return b+1},c2:function(a){return 0===a.ao()},a:function(){for(var a=this._b.x9();a.i1();a.i2())if(0===a.i9().ak())return this._a=a.i9(),void 0}});var bj=function(a){this._d=0,this._e=0,this._f=0,this._a=0,this._b=0,this._g=a,this._c=new Ai};ve(bj,b,{a:function(){return this._d+this._e+this._f}});var cj=function(){cj.superClass.constructor.call(this),this._kl=340,this._km=360,this._kk=40,this._ko=.5};ve(cj,$i,{ic:function(){return this._km},ia:function(){return this._kl},i9:function(){return this._ko},i3:function(a){if(!ti.a1(a))throw"";this._a=a;var b=this.i8(),c=ti.a4(a,b);xj.c(a),this._kn=Qj.d(a.x0());for(var d=a.x9();d.i1();d.i2()){var e=d.i9();e!==b?this.aa(e,new bj(this._kk+this.q(e.aq().i9()))):this.aa(e,new bj(this._kk))}this.s(b),a.s2(b,0,0),this.t(b);for(var f;!c.ar();a.x3(f))f=c.c3()},i4:function(a){return ti.a1(a)},i0:function(a){return this._kn[a.al()]},i8:function(){return ti.a2(this._a)},i7:function(a){for(var b,c=this.ib(a);;){if(b=this.i6(a),c>=b)break;for(var d=a.aw();d.i1();d.i2()){var e=d.i9();this.i0(e)._g*=1+this._ko}}var f=(c-b)/(2*a.ao());b=0;for(var g=a.aw();g.i1();g.i2()){var h=this.i0(g.i9());h._d+=f,h._e+=f,b+=h._d+h._e}this.id(a)},id:function(a){for(var b=Qj.d(a.ao()),c=0,d=a.ap();d.i1();)b[c]=d.i8(),d.i2(),c++;var e=this;b.sort(function(a,b){var c=a.a3(),d=b.a3(),f=e.i0(c).a()-e.i0(d).a();return f>0?1:f>=0?0:-1});for(var f=0;f<b.length;f++)this._a.h1(b[f]);for(var g=0;g<b.length;g+=2)this._a.u1(b[g]);for(c=b.length-1,0===c%2&&c--;c>0;c-=2)this._a.u1(b[c])},ib:function(a){return 0===a.ak()?this._km:2===a.ao()?s(180,this._kl):this._kl},i6:function(a){for(var b=0,c=a.ap();c.i1();c.i2()){for(var d,e=c.i8(),f=e.a3(),g=this.i0(f),h=-g._g,i=g._b,j=g._c,k=0,l=k+1,m=j._b,n=m.d();l>k;l=(d.y-i)/(d.x-h))d=n,m=j.ai(m),n=m.d(),k=(n.y-d.y)/(n.x-d.x);for(g._d=180*-C(l)/y,k=0,l=k-1,m=j._b,n=m.d();m.a().d().x===n.x;n=m.d())m=m.a();for(var o;k>l;l=(o.y-i)/(o.x-h))o=n,m=j.aj(m),n=m.d(),k=(n.y-o.y)/(n.x-o.x);g._e=180*C(l)/y,b+=g._d+g._e}return b},aa:function(a,b){this._kn[a.al()]=b},p:function(a){var b=this.i0(a),c=new Ai,d=2*this.q(a);c.aa(new ai(0,0)),c.aa(new ai(0,d)),c.aa(new ai(d,d)),c.aa(new ai(d,0)),b._c=c,b._a=d/2,b._b=d/2},r:function(a){if(0===a.ao())this.p(a);else{var b=this.i0(a),c=this.q(a),d=new Ai;d.aa(new ai(-c,-c)),d.aa(new ai(-c,c)),d.aa(new ai(c,-c)),d.aa(new ai(c,c));for(var e=a.aw();e.i1();e.i2()){var f=this.i0(e.i9());d.az(f._c)}for(var g=pj.h(d),h=H,i=H,j=I,k=I,l=g.ah();l.i1();l.i2()){var m=l.i6();m.x<h&&(h=m.x),m.x>j&&(j=m.x),m.y<i&&(i=m.y),m.y>k&&(k=m.y)}for(var n=new Ai,o=g.ah();o.i1();o.i2()){var p=o.i6();n.aa(new ai(p.x-h,p.y-i))}b._c=n,b._a=-h,b._b=-i}},s:function(a){if(0===a.ao())this.r(a);else{for(var b=a.aw();b.i1();b.i2())this.s(b.i9());this.i7(a);for(var c=0,d=a.aw();d.i1();d.i2()){var e=d.i9(),f=this.i0(e),g=180-(360-this.ib(a))/2-c-(f._e+f._f);c+=f.a(),g=g/180*y;for(var h=w(g),i=u(g),j=f._c._b;j;j=j.a()){var k=j.d(),l=k.x+f._g,m=k.y-f._b,n=new ai(l*i-h*m,l*h+i*m);j.c(n)}var o=f._a+f._g;f._a=o*i,f._b=o*h}this.r(a)}},t:function(a){var b=this._a.g4(a),c=0;if(a.ak()>0){var d=a.aq().i9(),e=this._a.g4(d);c=y+D(e.y-b.y,e.x-b.x)}for(var f=a.aw();f.i1();f.i2()){var g=f.i9(),h=this.i0(g);if(0!==c){var i=u(c),j=w(c),k=h._a*i-j*h._b,l=h._a*j+i*h._b;h._a=k,h._b=l}this._a.s2(g,b.x+h._a,b.y+h._b),this.t(g)}},q:function(a){return 1.41*(r(this._a.gj(a),this._a.g9(a))/2)}});var dj=function(){};ve(dj,b,{i2:function(a){return a.ad()},i1:Db,i3:Db,i4:Db});var ej=function(a){this._a=a};ve(ej,b,{i2:function(a){for(var b=0,c=a.an();c.i1();c.i2())this._a.i1(c.i9())&&b++;return b},i4:function(a){return this._a.i1(a)==f},i1:Db,i3:Db});var fj=function(){fj.superClass.constructor.call(this),this._kq=!1,this._kp=90};ve(fj,cj,{a:function(a,b){this._kr=b,this._ks=a,this._kq=!0},i7:function(a){if(!this.u(a))return fj.superClass.i7.call(this,a),void 0;for(var b=this.i9(),c=this.ib(a),d=(360-c)/2+c,e=new Bi(a.ap());;){var g,h,i=this.i6(a),j=e._b;for(i=(360-c)/2;j;j=j.a()){var k=j.d(),l=k.a3(),m=this.i0(l),n=this._ks.i3(k),o=n-(i+m._e);if(o>=0&&n+m._d>=d&&(o=i+m.a()<=d?d-i-m.a():2*(d-(n+m._d))),m._f=0,o>=0)m._f=o,g=j,h=m;else{for(-o>m._d+m._e?o=(m._d+m._e)/2:o/=-2,i-=o,d>=i&&i+m.a()>d&&(i+=o,o=i+m.a()-d,i-=o);g&&o>h._f;h=this.i0(g.d().a3()))if(o-=h._f,h._f=0,g=g.b(),!g){h=f;break}g?h._f-=o:i+=o}i+=m.a()}if(d>=i){for(var p=0,q=(360-c)/2,r=a.ap();r.i1();r.i2()){var s=r.i8(),u=s.a3(),v=this._ks.i3(s),w=this.i0(u),x=q+w._f+w._e;p<t(x-v)&&(p=t(x-v)),q+=w.a()}if(p<=this._kp)break}for(var y=a.aw();y.i1();y.i2()){var z=y.i9();this.i0(z)._g*=1+b}}},ib:function(a){return this.u(a)?0===a.ak()?this.ic():this.ia():fj.superClass.ib.call(this,a)},u:function(a){return this._kq&&0!==a.ao()?this._ks.i1(a.ag())!=f:!1}});var gj=function(a){this._a=a};ve(gj,b,{i1:function(a){return this._a.i1(a)},i2:Db,i3:Db,i4:Db});var hj=function(){};ve(hj,b,{w1:function(a){this._bb=a},w2:function(){return this._bb},w4:function(a){this._bb&&this._bb.i2(a)},w3:function(a){return this._bb?this._bb.i1(a):!0}});var ij=function(){this._cg=45,this._ce=400,this._ch=400,this._cf=0};ve(ij,hj,{i1:function(a){if(this.w2()){for(var b=!0,c=a.xk(),d=mi.a3(a,c),e=Qj.d(d),f=Qj.d(d),g=0;d>g;g++)e[g]=new Ti,f[g]=new Bi;for(var h=a.xf();h.i1();h.i2()){var i=h.i8();f[c.i2(i.a2())].aa(i),a.h1(i)}for(var j=a.x9();j.i1();j.i2()){var k=j.i9();e[c.i2(k)].aa(k),a.h2(j.i9())}for(var l=0;d>l;l++){for(var m=e[l].x1();m.i1();m.i2())a.h3(m.i9());for(var n=f[l].c1();n.i1();n.i2())a.u1(n.i8());b=this.w3(a);for(var o=f[l].c1();o.i1();o.i2())a.h1(o.i8());for(var p=e[l].x1();p.i1();p.i2())a.h2(p.i9());if(!b)break}for(var q=0;d>q;q++)for(var r=e[q].x1();r.i1();r.i2())a.h3(r.i9());for(var s=0;d>s;s++)for(var t=f[s].c1();t.i1();t.i2())a.u1(t.i8());return a.xi(c),b}return!0},i2:function(a){if(!a.xb()){for(var b=a.xk(),c=mi.a3(a,b),d=Qj.d(c),e=Qj.d(c),g=Qj.d(c),h=Qj.d(c),i=0;c>i;i++)d[i]=new Ti,e[i]=new Bi;for(var j=a.xf();j.i1();j.i2()){var k=j.i8();e[b.i2(k.a2())].aa(k),a.h1(k)}for(var l=a.x9();l.i1();l.i2()){var m=l.i9();d[b.i2(m)].aa(m),a.h2(l.i9())}for(var n=0;c>n;n++){for(var q=d[n].x1();q.i1();q.i2())a.h3(q.i9());for(var r=e[n].c1();r.i1();r.i2())a.u1(r.i8());this.w4(a);var s=a.g3();g[n]=new di(s.x,s.y,s.width,s.height);var t={};if(h[n]=t,this._cf>0){var u=this._cg+p((s.width+1)/this._cf)*this._cf,v=this._cg+p((s.height+1)/this._cf)*this._cf;t.x=s.x,t.y=s.y,t.width=u,t.height=v}else t.x=s.x,t.y=s.y,t.width=s.width+this._cg,t.height=s.height+this._cg;for(var w=e[n].c1();w.i1();w.i2())a.h1(w.i8());for(var x=d[n].x1();x.i1();x.i2())a.h2(x.i9())}for(var y=0;c>y;y++)for(var z=d[y].x1();z.i1();z.i2())a.h3(z.i9());for(var A=0;c>A;A++)for(var B=e[A].c1();B.i1();B.i2())a.u1(B.i8());if(xj.a(h,f,this._ce/this._ch),this._cf<=0)for(var C=0;C<h.length;C++)this.w5(a,d[C],e[C],new ai(h[C].x,h[C].y),g[C]);else for(var D=0;D<h.length;D++){var E=o((h[D].x-g[D].x)/this._cf)*this._cf,F=o((h[D].y-g[D].y)/this._cf)*this._cf,G=g[D].x+E,H=g[D].y+F;this.w5(a,d[D],e[D],new ai(G,H),g[D])}a.xi(b)}},w5:function(a,b,c,d,e){for(var f=-e.x+d.x,g=-e.y+d.y,h=b.x1();h.i1();h.i2()){var i=a.ga(h.i9());a.s4(h.i9(),new ai(i.x+f,i.y+g))}for(var j=c.c1();j.i1();j.i2()){for(var k=j.i8(),l=new We,m=a.gp(k).c();m.i1();m.i2()){var n=m.i6();l.add(new ai(n.x+f,n.y+g))}a.s5(k,new fi(l))}}});var jj=function(){};ve(jj,hj,{i1:function(a){return this.w3(a)},i2:function(a){this.w7(a),this.w2()&&this.w4(a),this.w6(a)},w7:function(a){this.e(a),this.k(a),this.i(a)},e:function(a){for(var b=a.x9();b.i1();b.i2()){var c=a.g4(b.i9());a.s1(b.i9(),c)}},w6:function(a){this.l(a),this.j(a),this.f(a)},l:function(a){for(var b=a.x9();b.i1();b.i2()){var c=a.g4(b.i9());a.s1(b.i9(),c)}},j:function(a){for(var b=a.xf();b.i1();b.i2()){var c=a.g7(b.i8()),d=c.i6();c.i8(d),d=c.i7(),c.i9(d);for(var e=0;e<c.i1();e++){var f=c.i2(e);c.i3(e,f.x,f.y)}}},k:function(a){for(var b=a.xf();b.i1();b.i2()){var c=a.g7(b.i8()),d=c.i6();c.i8(d),d=c.i7(),c.i9(d);for(var e=0;e<c.i1();e++){var f=c.i2(e);c.i3(e,f.x,f.y)}}},f:function(a){this._ca&&(a.x1("A",this._ca),this._ca=f,this._b6=f),this._b8&&(a.x1("B",this._b8),this._b8=f,this._b9=f)},i:function(a){this._ca=a.xc("A"),this._ca&&(this._b6=new gj(this._ca),a.x1("A",this._b6)),this._b8=a.xc("B"),this._b8&&(this._b9=new gj(this._b8),a.x1("B",this._b9))}});var kj=function(){this._a=new Bi,this._c=10};ve(kj,hj,{i2:function(a){this._b=a.xl(),this.w9(a),this.w4(a),this.c(a),this.w8(a,this._b),a.xj(this._b)},i1:function(a){if(this.w2()){this._b=a.xl(),this.w9(a);var b=this.w3(a);return this.c(a),a.xj(this._b),b}return!0},w8:function(a,b){for(var c=a.xf();c.i1();c.i2()){var d=c.i8();b.i1(d)&&xj.g(a,d,b.i1(d),this._c)}},w9:function(a){for(var b=a.xk(),c=a.x9();c.i1();c.i2()){for(var d=c.i9(),e=d.af();e.i1();e.i2()){var g=e.i8(),h=g.a1(d),i=b.i1(h);if(i!==g)if(i){this._b.i1(i)||this._b.i8(i,new Bi);var j=this._b.i1(i);j.aa(g),this._a.ac(g),a.h1(g)}else b.z1(h,g)}for(var k=d.af();k.i1();k.i2()){var l=k.i8(),m=l.a1(d);b.z1(m,f)}}a.xi(b)},c:function(a){for(;!this._a.ar();a.u1(this._a.c3()));}});var lj=function(a){this._a=a};ve(lj,b,{i2:function(a){this._a.i3(a)},i1:function(a){return this._a.i4(a)}});var mj=function(){mj.superClass.constructor.call(this),this._jo=30,this._jp=new qj,this._jt=5};ve(mj,$i,{i4:function(){return!0},i3:function(a){this._ju=a,xj.c(a);for(var b=this._jp.i1(a),c=0,d=a.x9();d.i1();d.i2())c=r(c,this.e(d.i9()));c<this._jt&&(c=this._jt),this.a(b,c)},a:function(a,b){var c=a.i7(),d=2*y/c,e=0,f=Qj.a(c),g=0;for(a.i4();c>g;)f[g]=this.e(a.i9())+this._jo,e+=f[g],g++,a.i2();var h=e/c,i=e/z;b>i&&(i=b),a.i4();for(var j=0,k=0;c>k;){var l=d/h*f[k];j+=l/2;var m=u(j)*i,n=w(j)*i;j+=l/2,this._ju.s2(a.i9(),m,n),k++,a.i2()}return i},e:function(a){var b=this._ju.gj(a),c=this._ju.g9(a);return c>=b?c:b}});var nj=function(){nj.superClass.constructor.call(this),this._jm=new mj,this._jk=new fj};ve(nj,$i,{i4:function(){return!0},i3:function(a){if(!(a.x0()<2)){this._jn=a,xj.c(this._jn),xj.e(this._jn);var b=new vj(this._jn);b.a1(),b.h();var c=new Vi(this._jn);c.a();for(var d=b.x9();d.i1();d.i2()){var e=d.i9(),f=b.c2(e);if(f.ay()>1){var g=b.d1(e);Vi.h(this._jn,g.c1()),this._jm.i3(this._jn);var h=this._jn.g3();b.s7(e,h.width,h.height)}else if(1===f.ay()){var i=f.x2();b.s8(e,this._jn.gm(i)),this._jn.s2(i,0,0)}else b.s7(e,1,1);Vi.i(this._jn,this._jn.xf())}c.b();var j=this.a7(b);ti.a4(b,j);var k=b.xk(),l=b.xl();this.a2(b,l,k),this.a1(b,l),this.a3(b,j,l),this._jk.a(l,k),this._jk.i3(b),this.a5(b,j,k);for(var m=b.x9();m.i1();m.i2())for(var n=m.i9(),o=b.g4(n),p=b.c2(n).x1();p.i1();p.i2()){var q=p.i9();this._jn.s2(q,o.x+this._jn.g5(q),o.y+this._jn.g6(q))}}},a7:function(a){for(var b,c=-1,d=a.x9();d.i1();d.i2()){var e=d.i9();a.c2(e).ay()>c&&(b=e,c=a.c2(e).ay())}return b},a1:function(a,b){for(var c=function(a,c){var d=b.i3(a)-b.i3(c);return d>0?1:d>=0?0:-1},d=a.x9();d.i1();d.i2())d.i9().av(c)},a2:function(a,b,c){for(var d=Qj.a(this._jn.x0()),e=a.x9();e.i1();e.i2())for(var f=e.i9(),g=a.c2(f),h=g.x1();h.i1();h.i2())d[h.i9().al()]=f.al();this.a4(a,ti.a2(a),d,b,c)},a3:function(a,b,c){if(a.c2(b).ay()>1){for(var d=0,e=0,f=0,g=b.ap();g.i1();g.i2()){var h=g.i8(),i=c.i3(h);i-d>e&&(e=i-d,f=(d+i)/2),d=i}360-d>e&&(f=(360+d)/2),this.a6(a,b,f);for(var j=b.ap();j.i1();j.i2()){var k=j.i8(),l=c.i3(k);for(l-=f;0>l;l+=360);c.i6(k,l)}b.av(function(a,b){var d=c.i3(a)-c.i3(b);return d>0?1:d>=0?0:-1})}},a4:function(a,b,c,d,e){for(var f=b.al(),g=e.i3(b),h=b.ap();h.i1();h.i2()){for(var i=h.i8(),j=a.b(i),k=0,l=0,m=0,n=0,o=j.c1();o.i1();o.i2()){var p,q,r=o.i8();c[r.a2().al()]===f?(p=r.a2(),q=r.a3()):(p=r.a3(),q=r.a2()),m-=this._jn.g5(p),n+=this._jn.g6(p),k-=this._jn.g5(q),l+=this._jn.g6(q)}if(0!==m||0!==n){var s;for(s=180*D(n,m)/y-g;0>s;s+=360);d.i6(i,s)}if(0!==k&&0!==l){var t=180*D(l,k)/y;0>t&&(t+=360),e.i6(i.a3(),t)}this.a4(a,i.a3(),c,d,e)}},a5:function(a,b,c){for(var d=a.g4(b),e=b.ap();e.i1();e.i2()){var f=e.i8(),g=f.a3(),h=a.g4(g),i=180*D(h.y-d.y,h.x-d.x)/y;c.i1(g)&&(i+=c.i3(g)),this.a6(a,g,i),this.a5(a,g,c)}},a6:function(a,b,c){c=c/180*y;var d=a.c2(b);if(!(d.ay()<=1))for(var e=d.x1();e.i1();e.i2()){var f=e.i9(),g=this._jn.g5(f),h=this._jn.g6(f),i=u(c),j=w(c),k=g*i-j*h,l=g*j+i*h;this._jn.s2(f,k,l)}}});var oj=function(){this._a=(new Date).getTime()};ve(oj,b,{b:function(){return(new Date).getTime()-this._a}});var pj={_A:new ai(0,0),b:function(a,b,c){return pj.c(a.x,a.y,b.x,b.y,c.x,c.y)},c:function(a,b,c,d,e,f){c-=a,d-=b,e-=a,f-=b;var g=e*d-f*c;return g>=0?0>=g?0:-1:1},d:function(a,b,c){return pj.b(a,b,c)>0},f:function(a,b,c){return pj.b(a,b,c)<0},g:function(a,b,c){return 0===pj.b(a,b,c)},h:function(a){return pj.i(a)},i:function(a){var b=new Ai(a.ah()),c=new Ai;if(b.a2(),b.ar())return c;var d=b.at();for(c.ae(d);!b.ar()&&d.equals(b.am());b.at());if(b.ar())return c;d=b.at();for(var e=c.ae(d),f=b.ah();f.i1();f.i2()){var g=f.i6();if(!g.equals(d))if(d=g,2===c.ay()&&pj.g(c.am(),c.as(),g))e.c(g);else{var h;for(h=e;!pj.f(c.ai(h).d(),h.d(),g);h=c.ai(h));var i;for(i=e;!pj.d(c.aj(i).d(),i.d(),g);i=c.aj(i));for(;i!==c.aj(h);c.aw(c.aj(h)));e=c.an(g,h)}}return c},j:function(){return pj.k(H)},k:function(a){return o(E()*a)},l:function(a,b){return E()*(b-a)+a}},qj=function(){};ve(qj,b,{i1:function(a){this._b=a;var b=new Bi;b=mi.a6(a),b.az(mi.a7(a));for(var c=this.a1();!b.ar();a.x5(b.c3()));return c.x1()},a1:function(){if(this._b.x0()<3)return new Ti(this._b.x9());for(var a=this._b.xk(),b=this._b.xk(),c=this._b.xl(),d=new Wi(this._b,new dj,0,this.a3(this._b)),e=this._b.x0(),g=new Bi,h=new Bi,i=new Vi(this._b);e>3;e--){for(var j=d.g(),k=j.an();k.i1();k.i2())a.z1(k.i9(),e),b.i5(k.i9(),!1);for(var l=j.an();l.i1();l.i2())for(var m=l.i9(),n=m.ap();n.i1();n.i2()){var o=n.i8();a.i2(o.a3())===e&&(h.aa(o),b.i5(o.a2(),!0),b.i5(o.a3(),!0))}if(h.ay()<j.ad()-1){for(var p,q=j.an();q.i1();q.i2()){var r=q.i9();
if(a.i2(r)===e&&!b.i4(r))if(p){var s=this._b.xo(p,r);c.i7(s,!0),h.aa(s),p=f}else p=r}if(p)for(var t=j.an();t.i1();t.i2()){var u=t.i9();if(u!==p&&!u.aj(p)){var v=this._b.xo(p,u);c.i7(v,!0),h.aa(v);break}}if(h.ay()<j.ad()-1){for(var w,x=2147483647,y=j.an();y.i1();y.i2()){var z=y.i9();z.ad()<x&&(w=z,x=z.ad())}for(var A=j.an();A.i1();A.i2()){var B=A.i9();if(!w.aj(B)&&w!==B){var C=this._b.xo(w,B);if(c.i7(C,!0),h.aa(C),h.ay()>=j.ad()-1)break}}}}for(var D=j.an();D.i1();D.i2())d.b(D.i9());for(var E=h.c1();E.i1();E.i2()){var F=E.i8();c.i4(F)&&(d.d(F.a2()),d.d(F.a3()))}g.az(h),i.e(j)}i.b(),d.c();for(var G=g.c1();G.i1();G.i2()){var H=G.i8();H._h&&(c.i4(H)?this._b.x5(H):this._b.h1(H))}var I,J=this.a4(this._b),K=new Ti,L=J.ak(0),M=J.ak(1);I=L.a2()===M.a2()||L.a2()===M.a3()?L.a3():L.a2(),K.aa(I);for(var N=J.c1();N.i1();N.i2()){var O=N.i8();I=O.a1(I),K.aa(I)}for(var P=g.c1();P.i1();P.i2()){var Q=P.i8();c.i4(Q)||Q._h||this._b.u1(Q)}return this._b.xi(b),this._b.xj(c),this._b.xi(a),this.a2(K),K},a2:function(a){if(a.ay()<this._b.x0()){for(var b=this._b.xk(),c=a._b;c;c=c.a()){var d=c.d();b.z1(d,c)}for(var e=new Wi(this._b,new ej(b),0,a.ay(),new ej(b));!e.e();){for(var f=e.f(),g=f.an();g.i1();g.i2()){var h=g.i9();if(b.i1(h)){var i,j=b.i1(h),k=a.ai(j).d();i=f.aj(k)?a.ao(f,j):a.an(f,j),b.z1(f,i);break}}for(var l=f.an();l.i1();l.i2()){var m=l.i9();b.i1(m)||e.d(m)}}this._b.xi(b),e.c()}},a3:function(a){for(var b=0,c=a.x9();c.i1();c.i2())b=r(b,c.i9().ad());return b},a4:function(a){for(var b=[],c=0,d=a.x0();d>c;c++)b[c]=new ri;var e=new pi(b);e.a6(!1),e.a8(a);for(var f,g=-1,h=a.x9();h.i1();h.i2()){var i=h.i9(),j=b[i.al()];j._a+j._c>g&&(g=j._a+j._c,f=i)}for(var k=new Bi,l=f,m=b[l.al()]._d;m;m=b[l.al()]._d)k.ac(m),l=m.a1(l);l=f;for(var n=b[l.al()]._b;n;n=b[l.al()]._d)k.ae(n),l=n.a1(l);return k}});var rj=function(){this._v=new Ci,this._x=new Ci,this._z=new Ni(3,5),this._w=new Ni(3,5),this._y=!1,this._u=!1,this._t={}};ve(rj,b,{xm:function(){var a=new Oi(this);return a},xo:function(a,b){return this.xn(a,f,b,f,0,0)},xn:function(a,b,c,d,e,f){return new Ii(this,a,b,c,d,e,f)},x4:function(a){this.b3(a)},b3:function(a){for(var b;b=a._o[0];)this.x5(b);for(;b=a._o[1];)this.x5(b);this._v.c(a),a._g=f,this._y=!0},x5:function(a){this.a11(a)},a11:function(a){if(a._h!==this)throw"";this.a12(a,a.a2(),a.a3()),this._x.c(a),a._h=f,this._u=!0},x7:function(a){a._p=this._v._c,a._g=this,a.ac(),a._c.length<this._z._b&&this._z.a3(a,a._c.length,this._z._b),this._v.a(a),this._y=!0},x8:function(a){if(a._h)throw"";a._c.length<this._w._b&&this._w.a3(a,a._c.length,this._w._b),a._a&&a._a._h===this?this._x.b(a,a._a):this._x.a(a),a._h=this,a.a4(),this.b2(a,a.a2(),f,a.a3(),f,0,0),this._u=!0},xr:function(a,b,c){var d=a.a2(),e=a.a3();a._h?(d!==b&&(d.ar(a,0,0),a._d=b,b.ab(a,f,0,0,0)),e!==c&&(e.ar(a,1,1),a._e=c,c.ab(a,f,1,1,0))):(a._d=b,a._e=c)},x3:function(a){this.xr(a,a.a3(),a.a2())},h1:function(a){this.a11(a)},u1:function(a){this.x8(a)},h2:function(a){this.x4(a)},h3:function(a){this.x7(a)},xa:function(){return this._v._c},x0:function(){return this._v._c},xh:function(){return this._x._c},xg:function(){return this._x._c},xb:function(){return 0===this._v._c},xq:function(a){return a._g===this},xp:function(a){return a._h===this},xd:function(){return this._v._a},x9:function(){return new Si(this._v)},xf:function(){return new Si(this._x)},x2:function(a,b){var c=Qj.d(this.xh());if(a&&b)for(var d=this.x9();d.i1();d.i2())d.i9().at(a,1,c),d.i9().at(b,0,c);else if(!b&&a)for(var e=this.x9();e.i1();e.i2())e.i9().at(a,1,c);else if(b&&!a)for(var f=this.x9();f.i1();f.i2())f.i9().at(b,0,c)},xk:function(){return this._z.b(this._v)},xl:function(){return this._w.c(this._x)},xi:function(a){this._z.a5(a,this._v)},xj:function(a){this._w.a6(a,this._x)},xc:function(a){return this._t[a]},x1:function(a,b){this._t[a]=b},x6:function(a){delete this._t[a]},b2:function(a,b,c,d,e,f,g){b.ab(a,c,0,0,f),d.ab(a,e,1,1,g)},a12:function(a,b,c){b.ar(a,0,0),c.ar(a,1,1)},c:function(){for(var a=0,b=this.x9();b.i1();b.i2())b.i9()._p=a++;this._y=!1},b1:function(){for(var a=0,b=this.xf();b.i1();b.i2())b.i8()._g=a++;this._u=!1},xs:function(a){a.as(this,this._z._b),a._p=this._v._c,this._v.a(a)},xt:function(a,b,c,d,e,f,g){a.a6(this,b,d,this._w._b),a._g=this._x._c,this._x.a(a),this.b2(a,a.a2(),c,a.a3(),e,f,g)}});var sj=function(){sj.superClass.constructor.call(this)};ve(sj,rj,{gb:function(a){return this.g1(a)},g7:function(a){return this.g2(a)},g5:function(a){var b=this.g1(a);return b.i1()+b.i3()/2},g6:function(a){var b=this.g1(a);return b.i2()+b.i4()/2},g4:function(a){return new ai(this.g5(a),this.g6(a))},gi:function(a){return this.g1(a).i1()},gh:function(a){return this.g1(a).i2()},ga:function(a){var b=this.g1(a);return new ai(b.i1(),b.i2())},gj:function(a){return this.g1(a).i3()},g9:function(a){return this.g1(a).i4()},gm:function(a){return new bi(this.gj(a),this.g9(a))},s1:function(a,b){this.s2(a,b.x,b.y)},s2:function(a,b,c){var d=this.g1(a);d.i5(b-d.i3()/2,c-d.i4()/2)},s7:function(a,b,c){this.g1(a).i6(b,c)},s8:function(a,b){this.s7(a,b.width,b.height)},s3:function(a,b,c){this.g1(a).i5(b,c)},s4:function(a,b){this.s3(a,b.x,b.y)},gp:function(a){for(var b=this.g2(a),c=new We,d=0;d<b.i1();d++)c.add(b.i2(d));return new fi(c)},gf:function(a){for(var b=this.g2(a),c=new Ai,d=0;d<b.i1();d++)c.aa(b.i2(d));return c},gc:function(a){var b=new We;b.add(this.gs(a));for(var c=this.gp(a).d();c.i1();c.i2())b.add(c.i6());return b.add(this.gl(a)),new fi(b)},gd:function(a){var b=new Ai;b.aa(this.gs(a));for(var c=this.gp(a).d();c.i1();c.i2())b.aa(c.i6());return b.aa(this.gl(a)),b},m1:function(a,b){var c=this.g2(a);c.i5();var d=b.ah(),e=d.i6();this.gx(a,e);var f=b.as();for(d.i2();d.i6()!==f;d.i2()){var g=d.i6();c.i4(g.x,g.y)}this.gy(a,f)},s5:function(a,b){var c=this.g2(a);c.i5();for(var d=b.d();d.i1();d.i2()){var e=d.i6();c.i4(e.x,e.y)}},s6:function(a,b){var c=this.g2(a);c.i5();for(var d=b.ah();d.i1();d.i2()){var e=d.i6();c.i4(e.x,e.y)}},m2:function(a,b,c){this.gx(a,b),this.gy(a,c)},gn:function(a){return this.g2(a).i6()},gk:function(a){return this.g2(a).i7()},gt:function(a,b){this.g2(a).i8(b)},gz:function(a,b){this.g2(a).i9(b)},gs:function(a){var b=this.g2(a).i6();return b?new ai(this.g5(a.a2())+b.x,this.g6(a.a2())+b.y):this.g4(a.a2())},gl:function(a){var b=this.g2(a).i7();return b?new ai(this.g5(a.a3())+b.x,this.g6(a.a3())+b.y):this.g4(a.a3())},gx:function(a,b){this.g2(a).i8(new ai(b.x-this.g5(a.a2()),b.y-this.g6(a.a2())))},gy:function(a,b){this.g2(a).i9(new ai(b.x-this.g5(a.a3()),b.y-this.g6(a.a3())))},g8:function(){for(var a=new Bi,b=this.xf();b.i1();b.i2())a.aa(b.i8());return a},g3:function(){for(var a,b,c=a=H,d=b=I,e=this.x9();e.i1();e.i2()){var f=this.ga(e.i9()),g=this.gm(e.i9());c=s(f.x,c),a=s(f.y,a),d=r(f.x+g.width,d),b=r(f.y+g.height,b)}for(var h=this.xf();h.i1();h.i2())for(var i=this.gp(h.i8()).c();i.i1();i.i2()){var j=i.i6();c=s(j.x,c),a=s(j.y,a),d=r(j.x,d),b=r(j.y,b)}return{x:o(c),y:o(a),width:o(d-c),height:o(b-a)}}});var tj=function(){tj.superClass.constructor.call(this),this.a(new li,new ji)};ve(tj,sj,{a:function(a,b){this._a3=a,this._a4=b},xo:function(a,b){return this.l2(a,b,this._a4.a6())},l2:function(a,b,c){return this.l1(a,f,b,f,0,0,c)},xn:function(a,b,c,d,e,f){return this.l1(a,b,c,d,e,f,this._a4.a6())},l1:function(a,b,c,d,e,f,g){var h=new Ii(this,a,b,c,d,e,f);return h._l=g,h},xm:function(){var a=new Oi(this);return a._r=this._a3.m3(),a},g3:function(){for(var a={x:0,y:0,width:-1,height:-1},b=this.x9();b.i1();b.i2())b.i9()._r.m1(a);return a},g1:function(a){return a._r},g2:function(a){return a._l},g5:function(a){return a._r.m4()},g6:function(a){return a._r.m5()},gi:function(a){return a._r.i1()},gh:function(a){return a._r.i2()},gj:function(a){return a._r.i3()},g9:function(a){return a._r.i4()},s2:function(a,b,c){a._r.m6(b,c)},s7:function(a,b,c){a._r.i6(b,c)},s3:function(a,b,c){a._r.i5(b,c)}});var uj=function(){uj.superClass.constructor.call(this),this._ap=this.xk(),this._as=this.xl()};ve(uj,sj,{g1:function(a){var b=this._ap.i1(a);return b||(b=new Li,this._ap.z1(a,b)),b},g2:function(a){var b=this._as.i1(a);return b||(b=new Ki,this._as.i8(a,b)),b}});var vj=function(a){vj.superClass.constructor.call(this),this._ay=a,this._a0=this.xk(),this._au=this.xl()};ve(vj,uj,{c2:function(a){var b=this._a0.i1(a);return b},a2:function(a,b){this._a0.z1(a,b)},h:function(){this._az||(this._az=this.xk());for(var a=Qj.a(this._ay.x0()+1),b=1,c=this.x9();c.i1();){for(var d=this.c2(c.i9()),e=d.x1();e.i1();e.i2()){var f=e.i9();a[f.al()]=b}for(var g=new Bi,h=d.x1();h.i1();h.i2())for(var i=h.i9(),j=a[i.al()],k=i.ap();k.i1();k.i2()){var l=k.i8(),m=l.a3(),n=a[m.al()];n===j&&g.ac(l)}this._az.z1(c.i9(),g),c.i2(),b++}},d1:function(a){return this._az.i1(a)},b:function(a){return this._au.i1(a)},a3:function(a,b){this._au.i8(a,b)},a1:function(){var a=this._ay.xk(),b=Xi.a4(Qj.a(this._ay.xh())),c=mi.a5(this._ay,b,mi.a1(this._ay,b,a));this.d2(a,c),this._ay.xi(a)},c1:function(a){for(var b,c=-1,d=0,e=a.length;e>d;d++){var f=a[d];f.ay()>c&&(b=f,c=f.ay())}return b},d2:function(a,b){for(var c=this._ay.xl(),d=this._ay.xk(),e=b.length,f=0;e>f;f++)for(var g=b[f],h=g.c1();h.i1();h.i2())c.i8(h.i8(),g);var i=this.c1(b);this.a4(i,a,c,new We,d);var j={};e=b.length;for(var k=0;e>k;k++){var l=b[k];if(l.ay()>1){var m=this.xm();j[l._id]=m}}for(var n=this._ay.x9();n.i1();n.i2()){var o=n.i9();if(a.i4(o)&&!d.i1(o)){var p=this.xm();j[o._id]=p;var q=new Ti;q.aa(o),this.a2(p,q)}}var r=Qj.d(2),s=0;for(e=b.length;e>s;s++){var t=b[s];if(1===t.ay()){var u=t.c2();r[0]=u.a2(),r[1]=u.a3();for(var v=0;2>v;v++){var w=r[v];if(1===w.ad()){var x=this.xm();j[w._id]=x;var y=new Ti;y.aa(w),this.a2(x,y)}}}}for(var z=this._ay.x9();z.i1();z.i2()){var A=z.i9();if(d.i1(A))for(var B=d.i1(A),C=j[B._id],D=A.af();D.i1();D.i2()){var E=D.i8();if(c.i1(E)!==B){var F=j[c.i1(E)._id];if(!F){var G=E.a1(A),H=d.i1(G);F=H?j[H._id]:j[G._id]}var I,J=C.aj(F);J?I=this.b(J):(J=this.xo(C,F),I=new Bi),I.aa(E),this.a3(J,I)}}else if(a.i4(A))for(var K=j[A._id],L=A.af();L.i1();L.i2()){var M=L.i8(),N=M.a1(A),O=j[N._id];if(O){var P=K.aj(O);if(!P){var Q=this.xo(K,O),R=new Bi;R.aa(M),this.a3(Q,R)}}}}if(2===this._ay.x0()&&1===this._ay.xg()){var S=this._ay.xf().i8(),T=j[S.a2()._id],U=j[S.a3()._id];if(U&&T&&!U.aj(T)){var V=this.xo(T,U),W=new Bi;W.aa(S),this.a3(V,W)}}var X=Qj.a(this._ay.x0()),Y=1;e=b.length;for(var Z=0;e>Z;Z++){var $=b[Z],_=j[$._id];if(_){var ab=this.c2(_);ab||(ab=new Ti,this.a2(_,ab));for(var bb=$.c1();bb.i1();bb.i2()){var cb=bb.i8(),db=cb.a2();X[db.al()]===Y||a.i4(db)&&d.i1(db)!==$||(X[db.al()]=Y,ab.aa(db)),db=cb.a3(),X[db.al()]===Y||a.i4(db)&&d.i1(db)!==$||(X[db.al()]=Y,ab.aa(db))}}}this._ay.xj(c),this._ay.xi(d)},a4:function(a,b,c,d,e){if(!d.contains(a)){d.add(a);for(var f=[],g=a.c1();g.i1();g.i2()){var h=g.i8();f[0]=h.a2(),f[1]=h.a3();for(var i=0;2>i;i++){var j=f[i];if(b.i4(j)&&!e.i1(j)){a.ay()>1&&e.z1(j,a);for(var k=j.af();k.i1();k.i2())this.a4(c.i1(k.i8()),b,c,d,e)}}}}}});var wj=function(a,b,c){this._a={},wj.superClass.constructor.call(this);for(var d=new We,e=0,f=b.size();f>e;e++){var g=b.get(e);if(g instanceof Bf)d.add(g);else{g instanceof Cf&&g.setExpanded(!0);var h=a.getNodeSize(g);if(g instanceof Cf&&g.setExpanded(!1),h){var i=this.xm(),j=a._repulsion;c!==Rh||g instanceof Cf?c===Rh?j*=1.1:c===Sh&&(j*=.9):j*=.6,c===Wh||c===Xh?this.s7(i,h.height*j,h.width*j):this.s7(i,h.width*j,h.height*j),i.node=g,this._a[g.getId()]=i}}}for(e=0,f=d.size();f>e;e++){var k=d.get(e),l=k.getSourceAgent(),m=k.getTargetAgent(),n=this._a[l.getId()],o=this._a[m.getId()];n&&o&&n!==o&&this.xo(n,o)}};ve(wj,tj,{});var xj={_D:new fi,_E:new ai(0,0),b:function(a){if(a.i1()>0){for(var b=new We,c=a.i1()-1;c>=0;c--)b.add(a.i2(c));a.i5();for(var d=0,e=b.size();e>d;d++){var f=b.get(d);a.i4(f.x,f.y)}}var g=a.i6();a.i8(a.i7()),a.i9(g)},c:function(a){xj.d(a,!0)},d:function(a,b){if(b)for(var c=a.xf();c.i1();c.i2()){var d=c.i8();a.gt(d,xj._E),a.gz(d,xj._E),a.s5(d,xj._D)}else for(var e=a.xf();e.i1();e.i2())a.s5(e.i8(),xj._D)},e:function(a){for(var b=new ai(0,0),c=a.xf();c.i1();c.i2()){var d=c.i8();a.gt(d,b),a.gz(d,b)}},f:function(a,b,c,d){for(var e=a.gc(b).b(),f=Qj.d(e),g=0,h=a.gc(b).c();h.i1();h.i2()){var i=h.i6();(0>=g||!i.equals(f[g-1]))&&(f[g]=new ai(i.x,i.y),g++)}if(e=g,!(2>e)){var j=new We,k=xj.i(new ci(f[1].x-f[0].x,f[1].y-f[0].y));k.x*=d,k.y*=d;for(var l=xj.h(f[0],k),m=xj.h(f[1],k),n=new ei(l,m),o=1;e-1>o;o++){var p=n,q=xj.i(new ci(f[o+1].x-f[o].x,f[o+1].y-f[o].y));q.x*=d,q.y*=d;var r=xj.h(f[o],q),s=xj.h(f[o+1],q);n=new ei(r,s);var t=ei.a6(p,n);t&&j.add(new ai(t.x,t.y))}var u=new ci(f[e-1].x-f[e-2].x,f[e-1].y-f[e-2].y);u=xj.i(u),u.x*=d,u.y*=d;var v=xj.h(f[e-1],u),w=new fi(j);b.a2()===c.a2()?(a.s5(c,w),a.m2(c,l,v)):(a.s5(c,w.a()),a.m2(c,v,l))}},g:function(a,b,c,d){for(var e=d,f=c.c1();f.i1();f.i2()){var g=f.i8();xj.f(a,b,g,e),0>e&&(e-=d),e=-e}},a:function(a,b,c){return xj.j(a,b,c,1)},l:function(a,b,c){if(!a||a.length<1)return b&&(b.x=0,b.y=0,b.width=0,b.height=0),{width:0,height:0};for(var d=0,e=0,f=0;f<a.length;f++){var g=a[f];d=r(d,g.width),e=r(e,g.height)}var h,i,j=d*e*a.length,k=q(j/c),l=j/k,m=o(l/d),n=p(l/d),s=p(a.length/m),t=p(a.length/n);n*t>m*s?(h=m,i=s):(h=n,i=t);var u,v=0,w=0,x=0,y=0;if(d>e)for(var z=0;z<a.length;z++)u=a[z],u.x=w*d,u.y=v*e,x=r(x,u.x+u.width),y=r(y,u.y+u.height),++w>=h&&(v++,w=0);else for(var A=0;A<a.length;A++)u=a[A],u.x=w*d,u.y=v*e,x=r(x,u.x+u.width),y=r(y,u.y+u.height),++v>=i&&(w++,v=0);return b&&(b.x=0,b.y=0,b.width=x,b.height=y),{width:i,height:h}},j:function(a,b,c){if(!a||a.length<1)return b&&(b.x=0,b.y=0,b.width=0,b.height=0),0;for(var d,e,f=d=a[0].width,g=e=a[0].height,h=a.length,i=1;h>i;i++){var j=a[i].width;f=s(f,j),d=r(d,j);var k=a[i].height;g=s(g,k),e=r(e,k)}if(g/e>.95&&f/d>.95)return xj.l(a,b,c).width;for(var l=new Ai,m=0,n=0;h>n;n++){var p=a[n];l.aa(a[n]),m=o(m+p.width*p.height)}l.a1(function(a,b){var c=o(b.height)-o(a.height);return 0===c?o(b.width)-o(a.width):c});var t=0,u=0,v=o(c*q(m/c)),w=v,x=0,y=new Ai;do{var z,A,B=new Ai,C=z=A=0;y.aa(B);for(var D=l.ah();D.i1();D.i2()){var E=D.i6();C+E.width>w&&B.ay()>0?(A=r(A,C),B=new Ai,B.aa(E),y.aa(B),C=o(E.width)):(B.aa(E),C=o(C+E.width)),1===B.ay()&&(z=o(z+B.am().height))}A=r(A,C),c*z>A&&x!==A&&(y.af(),w=o(1.1*w),x=A)}while(y.ar());for(var F=0,G=y.ah();G.i1();G.i2()){for(var H=0,I=G.i6(),J=I.ah();J.i1();J.i2()){var K=J.i6();K.x=H,K.y=F,H+=K.width}t=r(t,H),F+=xj.k(I),u=r(u,F)}return b&&(b.x=0,b.y=0,b.width=t,b.height=u),y.ay()},k:function(a){for(var b=0,c=a.ah();c.i1();c.i2())b=r(c.i6().height,b);return b},h:function(a,b){return new ai(a.x+b.x,a.y+b.y)},i:function(a){var b=q(a.x*a.x+a.y*a.y);return new ci(-a.y/b,a.x/b)}},yj=function(a){this._a=a,this._b=!1};ve(yj,b,{a:function(){return this._b},b:function(){return this._a},c:function(){return 1===this._a},d:function(){return 2===this._a},e:function(){return 4===this._a},f:function(){return 8===this._a},g:function(){return 0===this._a}}),yj.h=function(a,b){var c=a.xc("A");return c?c.i1(b):f},yj.i=function(a,b){var c=a.xc("B");return c?c.i1(b):f},yj.j=function(a){switch(a){case 1:return yj.k;case 2:return yj.l}return f},yj.k=new yj(1),yj.l=new yj(2);var zj=function(a,b,c,d,e){this._o=0,this._l=0,this._i=0,this._d=0,this._f=0,this._b=a,this._a=1e-4,this._r=b,this._p=1,this._e=(e.gj(a)+e.g9(a))/4;var f=.45*c*q(d);this._k=pj.l(-f,f),this._h=pj.l(-f,f),this._g=pj.l(-f,f)};ve(zj,b,{});var Aj=function(){this._a=0,this._c=0,this._b=0};ve(Aj,b,{});var Bj=function(){Bj.superClass.constructor.call(this),this._dj=0,this._dh=0,this._dq=0,this._dp=0,this._dt=0,this._de=0,this._d3=0,this._dr=0,this._ed=0,this._dw=.65,this._ea=1,this._dl=80,this._dx=3,this._d8=!0,this._eb=3e5,this._ee=2,this._di=2,this._df=1e3};ve(Bj,$i,{i4:function(){return!0},i3:function(a){if(a&&(this._d5=a,this.s(a))){var b=new Aj,c=0,d=o(this._dx*this._dz.length*this._dz.length+20*this._dz.length);d=r(d,1e4);var e=this._ea*this._ea*this._dz.length,f=this._df;try{for(;this._dj>e&&d>c;c++){var g=this.b(2147483647&c);0===f--&&(this._dy.b()>this._eb&&(c=d),f=this._df),this.h(g,b),this.d(g,b),this.i(g,b),this._d8?(this.g(g,b),this.j(g,b)):(this.f(g,b),this.c(g,b));var h=q(b._a*b._a+b._c*b._c+b._b*b._b);this.ac(g,b,h),this.aa(g,b,h)}}finally{this.r()}}},s:function(a){if(!a||a.xa()<1)return!1;this._d5=a,this._dp=1,this._dy=new oj,this._dt=a.x0(),this._d2=Qj.d(this._dt),this._df=1+1e5/this._dt,this._ed=1/(2*this._di),this._de=this._ed*this._ee/(.05*this._dl),this._d3=F(this._dl,-1)*this._ed,this._dr=F(this._dl,3)*this._ed,this._dj=0,this._du=new Aj,this._dq=r(20*this._dl,10);var b=r(.1,s(this._dw*this._dl,this._dq)),c=this._dt;xj.c(a),this._dz=Qj.d(c);for(var d=a.x9();d.i1();d.i2()){var e=d.i9(),f=new zj(e,b,this._dl,this._dt,a);this._dz[--c]=f,this._dj+=f._r,this._dh+=f._r*f._r,this._du._a+=f._k,this._du._c+=f._h,this._du._b+=f._g,this._d2[e.al()]=f}return this._d8=!1,this._dz.length>0},b:function(a){var b=this._dz.length,c=b-a%b-1,d=pj.k(c+1),e=this._dz[d];return this._dz[d]=this._dz[c],this._dz[c]=e,e},f:function(a,b){for(var c,d,e=c=d=0,f=a._b.ae();f;f=f.a7()){var g,h=this._d2[f.a2().al()],i=h._k-a._k,j=h._h-a._h,k=h._g-a._g,l=i*i+j*j+k*k,m=q(l),n=m-(h._e+a._e);0>=n||(g=n*n*this._d3/m,e+=i*g,c+=j*g,d+=k*g)}for(var o=a._b.ag();o;o=o.a8()){var p,r=this._d2[o.a3().al()],s=r._k-a._k,t=r._h-a._h,u=r._g-a._g,v=s*s+t*t+u*u,w=q(v),x=w-(r._e+a._e);0>=x||(p=x*x*this._d3/w,e+=s*p,c+=t*p,d+=u*p)}b._a+=e,b._c+=c,b._b+=d},g:function(a,b){var c,d,e=c=d=0;this._dp++,a._f=this._dp;for(var f=a._b.ae();f;f=f.a7()){var g=this._d2[f.a2().al()];g._f=this._dp;var h=g._k-a._k,i=g._h-a._h,j=g._g-a._g,k=h*h+i*i+j*j,l=q(k);if(0!==l){var m=r(1e-6,l-(a._e+g._e)),n=-this._ef[f.a5()]/(m*m);n+=m*m*this._d1[f.a5()],n/=l,e+=h*n,c+=i*n,d+=j*n}}for(var o=a._b.ag();o;o=o.a8()){var p=this._d2[o.a3().al()];p._f=this._dp;var s=p._k-a._k,t=p._h-a._h,u=p._g-a._g,v=s*s+t*t+u*u,w=q(v);if(0!==w){var x=r(1e-6,w-(a._e+p._e)),y=-this._ef[o.a5()]/(x*x);y+=x*x*this._d1[o.a5()],y/=w,e+=s*y,c+=t*y,d+=u*y}}b._a+=e,b._c+=c,b._b+=d},j:function(a,b){for(var c,d,e=c=d=0,f=this._dt-1;f>=0;f--){var g=this._d2[f];if(g._f!==a._f){var h=a._k-g._k,i=a._h-g._h,j=a._g-g._g,k=h*h+i*i+j*j;if(0!==k){var l=q(k),m=r(1e-6,l-(a._e+g._e)),n=this._dr/(m*m*l);e+=h*n,c+=i*n,d+=j*n}}}b._a+=e,b._c+=c,b._b+=d},c:function(a,b){for(var c,d,e=c=d=0,f=this._dt-1;f>=0;f--){var g=this._d2[f],h=a._k-g._k,i=a._h-g._h,j=a._g-g._g,k=h*h+i*i+j*j;if(0!==k){var l,m=q(k),n=m-(a._e+g._e);l=0>=n?this._dr/(1e-8*m):this._dr/(n*n*m),e+=h*l,c+=i*l,d+=j*l}}b._a+=e,b._c+=c,b._b+=d},i:function(a,b){var c=this._du._b/this._dt-a._g;b._b+=c*this._dl*this._dt/this._dh},d:function(a,b){if(0!==this._de){var c=this._du._a/this._dt-a._k,d=this._du._c/this._dt-a._h,e=this._du._b/this._dt-a._g;b._a+=c*this._de,b._c+=d*this._de,b._b+=e*this._de}},h:function(a,b){var c=.05*(a._r+2);c>0&&(b._a=pj.l(-c,c),b._c=pj.l(-c,c),b._b=pj.l(-c,c))},ac:function(a,b,c){if(0!==c&&0!==a._a){var d=b._a*a._o+b._c*a._l+b._b*a._i,e=d/(c*a._a);this._dh-=a._r*a._r,this._dj-=a._r,a._r+=a._p*e>0?.45*e:.15*e,a._r>this._dq?a._r=this._dq:a._r<.1&&(a._r=.1),this._dj+=a._r,this._dh+=a._r*a._r,a._p=e}},aa:function(a,b,c){if(c>0){var d=a._r/c,e=b._a*d,f=b._c*d,g=b._b*d;a._k+=e,a._h+=f,a._g+=g,this._du._a+=e,this._du._c+=f,this._du._b+=g,a._a=c,a._o=b._a,a._l=b._c,a._i=b._b}},r:function(){for(var a=this._d2.length-1;a>=0;a--){var b=this._d2[a];this._d5.s2(b._b,b._k,b._h)}}});var Cj=function(a,b){this._e=a,this._f=b,this._c={}};ve(Cj,b,{r:function(){for(var a in this._c){var b=this._c[a];b.g.setExpanded(b.b)}},p:function(){for(var a=new We,b=new We,c=new We,d=0,e=this._f.size();e>d;d++){var f=this._f.get(d);if(f instanceof Bf)f.isLooped()||a.add(f);else if(f instanceof wf){if(f.getParent()instanceof Cf){f instanceof Cf||b.add(f);continue}a.add(f),f instanceof Cf&&(c.add(f),this.l(f))}}return b.each(function(b){for(var d=!0,e=0;e<c.size();e++)if(b.isDescendantOf(c.get(e))){d=!1;break}d&&a.add(b)}),a},l:function(a){if(!this._c[a.getId()]){var b=this._e.getType(a),c=Yh(b);if(c){this._c[a.getId()]={g:a,b:a.isExpanded()},a.setExpanded(!0);for(var d,e=new We,f=a.getChildren(),g=0,h=f.size();h>g;g++)if(d=f.get(g),d instanceof Cf&&(this.l(d),d.setExpanded(!1)),d instanceof Bf||e.contains(d)||e.add(d),d instanceof wf){var i=d.getEdges();if(i)for(var j=0,k=i.size();k>j;j++){var l=i.get(j);e.contains(l)||e.add(l)}}var m=new wj(this._e,e,b);try{c.i2(m);var n=Zh(b);for(var o in m._a){var p=m._a[o],q=m.g4(p);p.node.setPosition(n?n.tf(q):q)}}catch(r){}a.eachChild(function(a){a instanceof Cf&&a.setExpanded(!0)})}}}});var Dj=function(){};ve(Dj,b,{i1:function(a,b,c){var d=this.a1(a,b);return this.a2(a,b,c),d},a1:function(a,b){var c=Dj.i4(a);c.ax();for(var d=0,e=c.x1();e.i1();e.i2())b.i7(e.i9(),-1);for(var f=c.x1();f.i1();f.i2()){for(var g=f.i9(),h=-1,i=g.aq();i.i1();i.i2())h=r(h,b.i2(i.i9()));b.i7(g,h+1),d=r(d,h+1)}return d+1},a2:function(a,b,c){c.az(Dj.i3(a,b))}}),Dj.i3=function(a,b){for(var c=new Bi,d=a.xf();d.i1();d.i2()){var e=d.i8();b.i2(e.a2())>b.i2(e.a3())&&(a.x3(e),c.ac(e))}return c},Dj.i4=function(a){var b=Qj.a(a.xa());return(new si).a1(a,b),Dj.i2(a,b)},Dj.i2=function(a,b){for(var c=Qj.d(a.x0()),d=a.x9();d.i1();d.i2()){var e=d.i9(),f=e.al();c[b[f]]=e}return new Ti(c)};var Ej=function(){Ej.superClass.constructor.call(this),this.c0()};ve(Ej,Bi,{c0:function(){this._bc=1,this._bd=0}});var Fj=function(){this._m1=20,this._m2=60,this._m3=5,this._m4=0};ve(Fj,b,{i4:function(a){this._m3=a},i5:function(a){this._m4=a},i3:function(a){this._m1=a},i6:function(a){this._m2=a},i2:function(a){this._m5=a},t1:function(){return this._m2},a1:function(a,b){for(var c=Qj.d(b.length),d=0;d<b.length;d++)c[d]=b[d].x1();this.a2(a,c)},a2:function(a,b){for(var c=Qj.a(b.length),d=0,e=0;e<b.length;e++){var f=0,g=b[e];for(g.i4();g.i1();g.i2())f=r(f,a.g9(g.i9()));for(c[e]=f,g.i4();g.i1();g.i2())a.s4(g.i9(),new ai(a.gi(g.i9()),d+(c[e]-a.g9(g.i9()))/2));d+=c[e]+this.t1(),g.i4()}},i1:function(a,b,c){this._m6=a,this.t2(b,c)}});var Gj=function(){Gj.superClass.constructor.call(this)};ve(Gj,Fj,{t2:function(a){var b=this._m6;this._a=b.xc("D"),this._h=b.xc("C"),this.a1(b,a),this.tg(b,a),this.tf(a,Xi.a5(this._e),this._m5,this._l),this.tb(b,this._f[0]),this.ta(a),this.th(b,this._f[0],a),this.b(a),this.tb(b,this._f[1]),this.ta(a),this.th(b,this._f[1],a),this.b(a),this.a11(this._f[1]),this.a12(a),this.tb(b,this._f[2]),this.ta(a),this.th(b,this._f[2],a),this.b(a),this.tb(b,this._f[3]),this.ta(a),this.th(b,this._f[3],a),this.b(a),this.a11(this._f[3]),this.a12(a),this.tc(b),this.tj()},a11:function(a){for(var b=0;b<a.length;b++)a[b]=-a[b]},b:function(a){for(var b=0;b<a.length;b++){var c=a[b];c.ax()}for(var d=0;d<a.length;d++)for(var e,g=0,h=a[d].x1();h.i1();h.i2()){var i=h.i9(),j=i.al();this._l[j]=g++,this._b[j]=e,this._k[j]=f,e&&(this._k[e.al()]=i),e=i}var k=this._a;this._a=this._h,this._h=k;for(var l=this._m6.xf();l.i1();l.i2()){var m=l.i8(),n=this._m6.gn(m);this._m6.gt(m,new ai(-n.x,n.y));var o=this._m6.gk(m);this._m6.gz(m,new ai(-o.x,o.y))}var p=this._l,q=function(a,b){return!a&&b?1:a&&!b?-1:a||b?p[a.a2().al()]-p[b.a2().al()]:0},r=function(a,b){return!a&&b?1:a&&!b?-1:a||b?p[a.a3().al()]:0};this._m6.x2(q,r)},a12:function(a){for(var b=this._m6.xf();b.i1();b.i2()){var c=b.i8();this._m6.x3(c);var d=this._m6.gn(c),e=this._m6.gk(c);this._m6.gz(c,d),this._m6.gt(c,e)}for(var f=new Ai,g=0,h=0;g<a.length;g++)f.ae(a[g]);for(;h<a.length;h++)a[h]=f.au();var i=this._l,j=function(a,b){return!a&&b?1:a&&!b?-1:a||b?i[a.a2().al()]-i[b.a2().al()]:0},k=function(a,b){return!a&&b?1:a&&!b?-1:a||b?i[a.a3().al()]:0};this._m6.x2(j,k)},tg:function(a,b){var c=a.x0(),d=a.xg(),e=0;for(this._l=Qj.a(c),this._b=Qj.d(c),this._k=Qj.d(c),this._m=Qj.d(c),this._i=Qj.d(c),this._o=Qj.d(c),this._f=Qj.e(4,c),this._c=Qj.a(c),this._g=Qj.a(c),this._j=Qj.a(c),this._d=Qj.b(c),this._e=Qj.b(d);e<b.length;e++)for(var g,h=0,i=b[e].x1();i.i1();i.i2()){var j=i.i9(),k=j.al();this._l[k]=h++,this._b[k]=g,this._k[k]=f,g&&(this._k[g.al()]=j),g=j}var l=this._l,m=function(a,b){return!a&&b?1:a&&!b?-1:a||b?l[a.a2().al()]-l[b.a2().al()]:0},n=function(a,b){return!a&&b?1:a&&!b?-1:a||b?l[a.a3().al()]:0};a.x2(m,n)},tb:function(a,b){for(var c=a.x9();c.i1();c.i2()){var d=c.i9(),e=d.al();this._m[e]=d,this._i[e]=d,b[e]=H,this._o[e]=d,this._c[e]=H,this._d[e]=!1,this._j[e]=this._g[e]=0}},ta:function(a){for(var b=1;b<a.length;b++)for(var c=-1,d=a[b]._b;d;d=d.a()){var e=d.d(),f=e.al(),g=e.ak();if(0!==g){for(var h=o((g+1)/2),i=p((g+1)/2),j=1,k=e.ae(),l=!1;h>j;k=k.a7())j++;for(;i>=j&&!l;j++){var m=this._m6.g2(k),n=k.a2(),q=n.al();this._i[f]===e&&!this._e[k.a5()]&&c<this._l[q]&&(c=this._l[q],this._i[q]=e,this._m[f]=this._m[q],this._i[f]=this._m[f],l=!0,this._j[q]=m.i6().x,this._g[f]=m.i7().x),k=k.a7()}}}},th:function(a,b,c){for(var d=a.x9();d.i1();d.i2()){var e=d.i9(),f=e.al();this._m[f]===e&&this.td(a,e,b)}for(var g=0;g<c.length;g++){var h=c[g].x1();if(h.i1()){var i=c[g].x1().i9(),j=i.al();this._o[this._m[j].al()]===i&&this.tk(a,i,b)}}for(var k=a.x9();k.i1();k.i2()){var l=k.i9(),m=l.al(),n=this._c[this._o[this._m[m].al()].al()];H>n&&(b[m]+=n)}},td:function(a,b,c){var d=b.al();if(c[d]===H){c[d]=0;var e=b,f=0;do{var g=e.al();if(g!==d&&(f-=this._g[g]),this._l[g]>0){var h=this._b[g],i=this._m[this._b[g].al()],j=i.al();this.td(a,i,c),this._o[d]===b&&(this._o[d]=this._o[j]),this._o[d]===this._o[j]&&(c[d]=r(c[d],c[h.al()]+this.ti(a,h,e)-f))}f+=this._j[g],e=this._i[g]}while(e!==b);f=0,e=b;do{var k=e.al();k!==d&&(f-=this._g[k]),c[k]=c[d]+f,f+=this._j[k],e=this._i[k]}while(e!==b)}},tk:function(a,b,c){var d=b.al();if(!this._d[d]){this._d[d]=!0;var e=b;do{var f=e.al(),g=this._k[f];if(g){var h=g.al(),i=this._o[this._m[h].al()];if(i!==this._o[d]){var j=c[h]-c[d]-this.ti(a,e,g);this._c[i.al()]!==H&&(j+=this._c[i.al()]),this._c[this._o[d].al()]=s(this._c[this._o[d].al()],j)}else this.tk(a,this._m[h],c)}e=this._i[f]}while(e!==b)}},tc:function(a){for(var b=Qj.a(4),c=Qj.a(4),d=a.x9();d.i1();d.i2()){var e=d.i9().al();c[0]+=this._f[0][e],c[1]+=this._f[1][e],c[2]+=this._f[2][e],c[3]+=this._f[3][e]}c[0]/=a.xa(),c[1]/=a.xa(),c[2]/=a.xa(),c[3]/=a.xa();for(var f=a.x9();f.i1();f.i2()){var g=f.i9(),h=g.al(),i=a.g4(g);b[0]=this._f[0][h]-c[0],b[1]=this._f[1][h]-c[1],b[2]=this._f[2][h]-c[2],b[3]=this._f[3][h]-c[3],b.sort(Qj.n),a.s1(g,new ai((b[1]+b[2])/2,i.y))}},ti:function(a,b,c){var d,e=a.gj(b),f=a.gj(c);return d=e>1&&f>1?this._m1+(e+f)/2:this._m3+(e+f)/2,this._l[b.al()]<this._l[c.al()]?(this._a&&(d+=this._a.i3(c)),this._h&&(d+=this._h.i3(b))):(this._a&&(d+=this._a.i3(b)),this._h&&(d+=this._h.i3(c))),d},tj:function(){this._l=this._b=this._k=this._e=this._m=this._i=this._f=this._c=this._o=this._d=this._j=this._g=f},tf:function(a,b,c,d){for(var e=a.length,f=2;e-1>f;f++)for(var g=-1,h=0,i=0,j=a[f].x1(),k=a[f].x1();k.i1();k.i2()){var l,m=k.i9(),n=!1;if(1===m.ak()&&(l=m.ae().a2(),c.i1(l)&&c.i1(m)&&(n=!0)),i===a[f].ay()-1||n){for(var o=n?d[l.al()]:a[f-1].ay();i>=h;h++){for(var p=j.i9(),q=p.am();q.i1();q.i2()){var r=q.i8(),s=d[r.a2().al()];(g>s||s>o)&&b.i7(q.i8(),!0)}j.i2()}g=o}i++}}});var Hj=function(a,b){this._b=20,this._a=b,this._d=a,this._f={}};ve(Hj,b,{a3:function(a){this._b=a},a4:function(a,b,c,d,e){if(this.a2(a)){var f=this.b2(a);f._o=b,f._m=e,f._n=d,f._f=c}},b2:function(a){var b=this._f[a._id];return b||(b=new Ij,this._f[a._id]=b),b},a2:function(a){return!!this._f[a._id]},c:function(){for(var a=Xi.a1(Qj.a(this._d.xa())),b=Xi.a1(Qj.a(this._d.xa())),c=this._d.x9();c.i1();c.i2()){var d=c.i9();if(this.a2(d)){var e=this.b2(d);a.i6(d,this._b*(e.c()-1)),b.i6(d,this._b*(e.b()-1))}}this._d.x1("D",a),this._d.x1("C",b)},g:function(){this._d.x6("D"),this._d.x6("C")},f:function(){for(var a=this._d.x9();a.i1();a.i2()){var b=a.i9();if(this.a2(b)){var c=this._d.gi(b),d=this._d.gh(b),e=this._d.gj(b),f=this._d.g9(b),g=this.b2(b),h=g._q.ay()+g._b.ay()+g._f,i=g._d.ay()+g._g.ay()+g._o,j=g._i.ay()+g._l.ay()+g._n,k=g._h.ay()+g._k.ay()+g._m,l=this._a.a7(e,h),m=this._a.a7(e,i),n=this._a.a7(f,k),o=this._a.a7(f,j);g.a2(this._a.a8(e,h,l),this._a.a8(e,i,m),this._a.a8(f,k,n),this._a.a8(f,j,o));for(var p=g._j.c1();p.i1();p.i2()){var q=p.i8(),s=this.a1(q),t=this.b1(q),u=new Ai;s.b()===t.b()?(s.c()?(u.aa(new ai(c+g._g._bd*m+g._c,d)),u.aa(new ai(c+g._g._bd*m+g._c,d-this._b)),g._g._bd++,u.aa(new ai(c+g._g._bd*m+g._c,d-this._b)),u.aa(new ai(c+g._g._bd*m+g._c,d)),g._g._bd++,g._g._bc=r(g._g._bc,2)):s.d()?(u.aa(new ai(c+g._b._bd*l+g._p,d+f)),u.aa(new ai(c+g._b._bd*l+g._p,d+f+this._b)),g._b._bd++,u.aa(new ai(c+g._b._bd*l+g._p,d+f+this._b)),u.aa(new ai(c+g._b._bd*l+g._p,d+f)),g._b._bd++,g._b._bc=r(g._b._bc,2)):s.f()?(u.aa(new ai(c,d+g._i._bd*o+g._a)),u.aa(new ai(c-this._b,d+g._i._bd*o+g._a)),g._i._bd++,u.aa(new ai(c-this._b,d+g._i._bd*o+g._a)),u.aa(new ai(c,d+g._i._bd*o+g._a)),g._i._bd++,g._i._bc=r(g._i._bc,2)):s.e()&&(u.aa(new ai(c+e,d+g._h._bd*n+g._e)),u.aa(new ai(c+e+this._b,d+g._h._bd*n+g._e)),g._h._bd++,u.aa(new ai(c+e+this._b,d+g._h._bd*n+g._e)),u.aa(new ai(c+e,d+g._h._bd*n+g._e)),g._h._bd++,g._h._bc=r(g._h._bc,2)),this._d.m1(q,u)):s.c()||t.c()?s.e()||t.e()?(u.aa(new ai(c+e-g._d._bd*m-g._c,d)),u.aa(new ai(c+e-g._d._bd*m-g._c,d-this._b*g._d._bc)),u.aa(new ai(c+e+this._b*g._h._bc,d-this._b*g._d._bc)),u.aa(new ai(c+e+this._b*g._h._bc,d+g._h._bd*n+g._e)),u.aa(new ai(c+e,d+g._h._bd*n+g._e)),g._d._bd++,g._d._bc++,g._h._bd++,g._h._bc++,t.c()&&u.ax(),this._d.m1(q,u)):s.f()||t.f()?(u.aa(new ai(c+g._g._bd*m+g._c,d)),u.aa(new ai(c+g._g._bd*m+g._c,d-this._b*g._g._bc)),u.aa(new ai(c-this._b*g._i._bc,d-this._b*g._g._bc)),u.aa(new ai(c-this._b*g._i._bc,d+g._i._bd*o+g._a)),u.aa(new ai(c,d+g._i._bd*o+g._a)),g._g._bd++,g._g._bc++,g._i._bd++,g._i._bc++,t.c()&&u.ax(),this._d.m1(q,u)):(s.d()||t.d())&&(u.aa(new ai(c+e-g._d._bd*m-g._c,d)),u.aa(new ai(c+e-g._d._bd*m-g._c,d-this._b*g._d._bc)),u.aa(new ai(c+e+this._b*g.b(),d-this._b*g._d._bc)),u.aa(new ai(c+e+this._b*g.b(),d+f+this._b*g._q._bc)),u.aa(new ai(c+e-g._q._bd*l-g._p,d+f+this._b*g._q._bc)),u.aa(new ai(c+e-g._q._bd*l-g._p,d+f)),g._d._bd++,g._d._bc++,g._k._bc++,g._h._bc++,g._q._bc++,g._q._bd++,t.c()&&u.ax(),this._d.m1(q,u)):s.d()||t.d()?s.e()||t.e()?(u.aa(new ai(c+e-g._q._bd*l-g._p,d+f)),u.aa(new ai(c+e-g._q._bd*l-g._p,d+f+this._b*g._q._bc)),u.aa(new ai(c+e+this._b*g._k._bc,d+f+this._b*g._q._bc)),u.aa(new ai(c+e+this._b*g._k._bc,d+f-g._k._bd*n-g._e)),u.aa(new ai(c+e,d+f-g._k._bd*n-g._e)),g._q._bd++,g._q._bc++,g._k._bd++,g._k._bc++,t.d()&&u.ax(),this._d.m1(q,u)):(s.f()||t.f())&&(u.aa(new ai(c+g._b._bd*l+g._p,d+f)),u.aa(new ai(c+g._b._bd*l+g._p,d+f+this._b*g._b._bc)),u.aa(new ai(c-this._b*g._l._bc,d+f+this._b*g._b._bc)),u.aa(new ai(c-this._b*g._l._bc,d+f-g._l._bd*o-g._a)),u.aa(new ai(c,d+f-g._l._bd*o-g._a)),g._b._bd++,g._b._bc++,g._l._bd++,g._l._bc++,t.d()&&u.ax(),this._d.m1(q,u)):(u.aa(new ai(c,d+f-g._l._bd*o-g._a)),u.aa(new ai(c-this._b*g._l._bc,d+f-g._l._bd*o-g._a)),u.aa(new ai(c-this._b*g._l._bc,d+f+this._b*g.a1())),u.aa(new ai(c+e+this._b*g._k._bc,d+f+this._b*g.a1())),u.aa(new ai(c+e+this._b*g._k._bc,d+f-g._k._bd*n-g._e)),u.aa(new ai(c+e,d+f-g._k._bd*n-g._e)),g._l._bd++,g._l._bc++,g._b._bc++,g._q._bc++,g._k._bc++,g._k._bd++,t.f()&&u.ax(),this._d.m1(q,u))}}}},a5:function(a,b){for(var c=0;c<a.length;c++)for(var d=a[c],e=b[c],f=d.x1();f.i1();f.i2()){var g=f.i9();if(this.a2(g)){var h=this.b2(g);e._g=r(e._g,this._b*(h.d()-1)),e._j=r(e._j,this._b*(h.a1()-1))}}},a1:function(a){var b,c=this._d.xc("A");if(c&&(b=c.i1(a)),!b||b.g()){var d=this._d.xc("B");if(!d)return yj.j(1);var e=d.i1(a);if(!e||e.g())return yj.j(1);if(e.c())return yj.j(8);if(e.f())return yj.j(1);if(e.d())return yj.j(4);if(e.e())return yj.j(2)}return b},b1:function(a){var b,c=this._d.xc("B");if(c&&(b=c.i1(a)),!b||b.g()){var d=this._d.xc("A");if(!d)return yj.j(8);var e=d.i1(a);if(!e||e.g())return yj.j(8);if(e.c())return yj.j(8);if(e.f())return yj.j(1);if(e.d())return yj.j(4);if(e.e())return yj.j(2)}return b}});var Ij=function(){this._o=0,this._f=0,this._n=0,this._m=0,this._c=0,this._p=0,this._e=0,this._a=0,this._j=new Bi,this._g=new Ej,this._d=new Ej,this._b=new Ej,this._q=new Ej,this._h=new Ej,this._k=new Ej,this._i=new Ej,this._l=new Ej};ve(Ij,b,{a1:function(){return r(this._q._bc,this._b._bc)},d:function(){return r(this._d._bc,this._g._bc)},b:function(){return r(this._k._bc,this._h._bc)},c:function(){return r(this._l._bc,this._i._bc)
},a2:function(a,b,c,d){this._c=b,this._a=d,this._p=a,this._e=c,this._g.c0(),this._d.c0(),this._b.c0(),this._q.c0(),this._k.c0(),this._h.c0(),this._l.c0(),this._i.c0()}});var Jj=function(a,b,c,d){this._k=20,this._r=.5,this._d=a,this._c=b,this._j=c,this._m=d,this._i=a.xc("A")!=f||a.xc("B")!=f,this._t=new Mj(a,b,c,d),this._b=new Hj(a,this)};ve(Jj,b,{a6:function(a){this._k=a,this._t.a1(a),this._b.a3(a)},g1:function(){return this._k},a9:function(a){return this.c1(),a},a5:function(a){return this.a1(),a},b3:function(a){return this.c1(),a=this.c4(a),this._b.c(),a},g2:function(a){return this._b.g(),a},e2:function(a){a=this.f(a),this._b.f()},e1:function(){this._t.d(),this._n&&this._d.xi(this._n),this.a1(),this._d=f},a1:function(){this._i&&(this._q&&(this._d.x1("A",this._q),this._q=f),this._p&&(this._d.x1("B",this._p),this._p=f),this._h&&(this._d.xj(this._h),this._h=f),this._l&&(this._d.xj(this._l),this._l=f))},c1:function(){if(this._i){this._h||(this._h=this._d.xl()),this._l||(this._l=this._d.xl());for(var a=this._d.xf();a.i1();a.i2()){var b=a.i8(),c=this._j.i1(b.a2()),d=this._j.i1(b.a3());if(c&&!d){var e=this._j.i1(b.a2());this._m.i4(e)?this._l.i8(b,yj.h(this._d,e)):this._l.i8(b,yj.i(this._d,e))}else if(!c&&d){var f=this._j.i1(b.a3());this._m.i4(f)?this._h.i8(b,yj.i(this._d,f)):this._h.i8(b,yj.h(this._d,f))}else c||d||(this._m.i4(b)?(this._h.i8(b,yj.i(this._d,b)),this._l.i8(b,yj.h(this._d,b))):(this._h.i8(b,yj.h(this._d,b)),this._l.i8(b,yj.i(this._d,b))))}this._q=this._d.xc("A"),this._p=this._d.xc("B"),this._d.x1("A",this._h),this._d.x1("B",this._l)}},c4:function(a){this._n=this._d.xk(),this._a=this._d.xl(),this._g=this._d.xl();for(var b=new Bi,c=new Bi,d=new Bi,e=new Bi,f=new Bi,g=new Bi,h=new Bi,i=new Bi,j=new Bi,k=this._d.xk(),l=0;l<a.length;l++)for(var m=0,n=a[l].x1();n.i1();)k.i6(n.i9(),m),n.i2(),m++;for(var o=function(a,b){var c=k.i3(a.a3())-k.i3(b.a3());return 0>=c?c>=0?0:-1:1},p=function(a,b){var c=k.i3(a.a2())-k.i3(b.a2());return 0>=c?c>=0?0:-1:1},q=0;q<a.length;q++)for(var r=a[q],s=r._b;s;s=s.a()){var t=s.d(),u=0;t.av(o),t.au(p),b.af(),c.af(),d.af(),e.af(),f.af(),g.af(),h.af(),i.af(),j.af();for(var v=t.ap();v.i1();){var w=v.i8(),x=this.b1(w);!x||x.d()||x.g()?d.aa(w):x.e()?b.aa(w):x.f()?(c.aa(w),j.aa(w)):x.c()&&(i.aa(w),j.aa(w)),v.i2(),u++}u=0;for(var y=t.am();y.i1();){var z=y.i8(),A=this.a2(z);!A||A.c()||A.g()?e.aa(z):A.e()?b.aa(z):A.f()?(c.aa(z),j.aa(z)):A.d()&&(g.aa(z),j.aa(z)),y.i2(),u++}var B=k.i3(t);if(!j.ar())for(var C=.1/j.ay(),D=B-.4;!j.ar();D+=C){var E=j.c3();if(E.a2()===t){var F=this._d.xm();this._n.z1(F,E.a2()),this._d.s7(F,1,1),this._c.z1(F,this._c.i1(t)),k.i6(F,D),this._a.i8(E,this._d.gn(E)),this._d.gt(E,pj._A),this._d.xr(E,F,E.a3()),r.ao(F,s)}else{var G=this._d.xm();this._n.z1(G,E.a3()),this._d.s7(G,1,1),this._c.z1(G,this._c.i1(t)),k.i6(G,D),this._g.i8(E,this._d.gk(E)),this._d.gz(E,pj._A),this._d.xr(E,E.a2(),G),r.ao(G,s)}}if(!b.ar())for(var H=.1/b.ay(),I=B+.1;!b.ar();I+=H){var J=b.c3();if(J.a2()===t){var K=this._d.xm();this._n.z1(K,J.a2()),this._d.s7(K,1,1),this._c.z1(K,this._c.i1(t)),k.i6(K,I),this._a.i8(J,this._d.gn(J)),this._d.gt(J,pj._A),this._d.xr(J,K,J.a3()),s=r.an(K,s)}else{var L=this._d.xm();this._n.z1(L,J.a3()),this._d.s7(L,1,1),this._c.z1(L,this._c.i1(t)),k.i6(L,I),this._g.i8(J,this._d.gk(J)),this._d.gz(J,pj._A),this._d.xr(J,J.a2(),L),s=r.an(L,s)}}var M=Jj._z;this._b.a2(t)&&(M=this._b.b2(t));var N=M._b.ay()+g.ay()+t.ao()+f.ay()+M._q.ay();if(N>0)for(var O=this._d.g9(t)/2,P=this._d.gj(t),Q=this.a7(P,N),R=-.5*P+this.a8(this._d.gj(t),N,Q)+Q*(M._b.ay()+g.ay()),S=t.ap();S.i1();S.i2()){var T=S.i8();this.c2(T)||this._j.i1(T.a2())||(this._d.g2(T).i8(new ai(R,O)),R+=Q)}var U=this._t.a3(t),V=0,W=0,X=0,Y=0;if(U&&(V=U._e.ay(),W=U._c.ay(),X=U._b.ay(),Y=U._d.ay()),N=M._g.ay()+V+i.ay()+t.ak()+h.ay()+W+M._d.ay(),N>0){for(var Z=this._d.gj(t),$=this.a7(Z,N),_=this.a8(Z,N,$),ab=-.5*Z+_+$*(M._g.ay()+V+i.ay()),bb=-this._d.g9(t)/2,cb=t.am();cb.i1();cb.i2()){var db=cb.i8();this.d1(db)||this._j.i1(db.a3())||(this._d.g2(db).i9(new ai(ab,bb)),ab+=$)}if(U){for(var eb=-.5*Z+_+$*(M._g.ay()+i.ay()+U._e.ay()-1),fb=U._e.c1();fb.i1();fb.i2()){var gb=fb.i8();this._d.u1(gb),gb.a2()!==t||this.c2(gb)?this.d1(gb)||(this._d.g2(fb.i8()).i9(new ai(eb,bb)),eb-=$):(this._d.g2(fb.i8()).i8(new ai(eb,bb)),eb-=$),this._d.h1(gb)}eb=.5*Z-_-$*(M._d.ay()+h.ay());for(var hb=U._c.c1();hb.i1();hb.i2()){var ib=hb.i8();this._d.u1(ib),ib.a2()!==t||this.c2(ib)?this.d1(ib)||(this._d.g2(hb.i8()).i9(new ai(eb,bb)),eb-=$):(this._d.g2(hb.i8()).i8(new ai(eb,bb)),eb-=$),this._d.h1(ib)}}}this._b.a2(t)&&this._b.a4(t,V+i.ay()+t.ak()+h.ay()+W,g.ay()+t.ao()+f.ay(),X+c.ay(),Y+b.ay())}return this._d.xi(k),a},a7:function(a,b){return 1>=b?0:a/(b-1+2*this._r)},a8:function(a,b,c){return 1>=b?.5*a:.5*(a-c*(b-1))},f:function(a){var b=this.g1(),c=0;for(this._f=this._d.xk();c<a.length;c++)for(var d=a[c],e=d._b;e;){var g=e.d(),h=this._n.i1(g);if(h||this._t.b2(g))e=e.a();else{var i=new Ti,j=new Ti,k=new Ti,l=new Ti,m=new Ti,n=new Ti,o=new Bi,p=new Bi,q=new Pj(i,j,k,l,m,n,o,p);this._f.z1(g,q),o.ab(g.am()),p.ab(g.ap());for(var r=e.b();r&&this._n.i1(r.d())===g;r=r.b()){var s=r.d(),t=this.c3(s);t.f()?j.ac(s):t.c()?l.ac(s):t.d()&&n.ac(s)}for(var u=e.a();u&&this._n.i1(u.d())===g;u=u.a()){var v=u.d(),w=this.c3(v);w.e()?i.aa(v):w.c()?k.aa(v):w.d()&&m.aa(v)}e=u}}for(var x=this.d2(a),y=0,z=0;z<a.length;z++){var A=x[z];z>0&&(y+=x[z-1]._j+x[z-1]._h+x[z-1]._b),y+=A._g+A._f+A._a+A._d;for(var B=a[z].x1();B.i1();B.i2()){var C=B.i9();this._d.s3(C,this._d.gi(C),this._d.gh(C)+y)}A._c+=y,A._i+=y}for(var D=0;D<a.length;D++)for(var E=a[D],F=E.x1();F.i1();F.i2()){var G=F.i9();this._n.i1(G)&&E.av(F)}for(var H=this,I=function(a,b){return H.a3(a)?H.a3(b)?H._d.gi(a)>=H._d.gi(b)?-1:1:1:H.a3(b)?-1:H._d.gi(a)>=H._d.gi(b)?1:-1},J=function(a,b){return H.a3(a)?H.a3(b)?H._d.gi(a)>=H._d.gi(b)?1:-1:1:H.a3(b)?-1:H._d.gi(a)>=H._d.gi(b)?-1:1},K=0;K<a.length;K++)for(var L=x[K],M=a[K].x1();M.i1();M.i2()){var N=M.i9();if(!this._t.b2(N)){var O=this._f.i1(N),P=O._d,Q=O._a,R=O._b,S=O._h,T=O._f,U=O._c,V=O._g,W=O._e,X=0,Y=0,Z=0,$=0,_=N.ao(),ab=N.ak(),bb=this._d.gi(N),cb=this._d.gh(N),db=this._d.gj(N),eb=this._d.g9(N),fb=this._t.a3(N),gb=Jj._z;if(this._b.a2(N)&&(gb=this._b.b2(N)),fb){if(X=fb._d.ay(),Y=fb._b.ay(),Z=fb._e.ay(),$=fb._c.ay(),X>0)for(var hb=gb._h.ay()+P.ay()+X+gb._k.ay(),ib=this.a7(eb,hb),jb=this.a8(eb,hb,ib),kb=cb+jb+ib*(gb._h.ay()+this.a4(P)),lb=fb._d.c1();lb.i1();lb.i2()){var mb=lb.i8();this._d.u1(mb),mb.a2()===N?this.c2(mb)||this._d.gx(mb,new ai(bb+db,kb)):(this.d1(mb),this._d.gy(mb,new ai(bb+db,kb))),kb+=ib,this._d.h1(mb)}if(Y>0)for(var nb=gb._i.ay()+Q.ay()+Y+gb._l.ay(),ob=this.a7(eb,nb),pb=this.a8(eb,nb,ob),qb=cb+pb+ob*(gb._i.ay()+this.a4(Q)),rb=fb._b.c1();rb.i1();rb.i2()){var sb=rb.i8();this._d.u1(sb),sb.a2()===N?this.c2(sb)||this._d.gx(sb,new ai(bb,qb)):this.d1(sb)||this._d.gy(sb,new ai(bb,qb)),qb+=ob,this._d.h1(sb)}}if(P.ay()>0){P.a1(I);for(var tb=gb._h.ay()+P.ay()+X+gb._k.ay(),ub=this.a7(eb,tb),vb=this.a8(eb,tb,ub),wb=cb+vb+ub*gb._h.ay(),xb=!0;!P.ar();){var yb=P.x4();if(this.a3(yb)){xb&&(xb=!1,wb+=ub*X);var zb=yb.ag(),Ab=this._d.gd(zb),Bb=Ab.at();if(Ab.ac(new ai(Bb.x,L.b())),this.c2(zb)){var Cb=this._a.i1(zb);Ab.ac(new ai(Bb.x,Cb.y+this._d.g6(N))),Ab.ac(new ai(Cb.x+this._d.g5(N),Cb.y+this._d.g6(N)))}else Ab.ac(new ai(Bb.x,wb)),Ab.ac(new ai(bb+db,wb));this._d.xr(zb,N,zb.a3()),this._d.m1(zb,Ab)}else{var Db=yb.ae(),Eb=this._d.gd(Db),Fb=Eb.au();if(Eb.ae(new ai(Fb.x,L.a())),this.d1(Db)){var Gb=this._g.i1(Db);Eb.ae(new ai(Fb.x,Gb.y+this._d.g6(N))),Eb.ae(new ai(Gb.x+this._d.g5(N),Gb.y+this._d.g6(N)))}else Eb.ae(new ai(Fb.x,wb)),Eb.ae(new ai(bb+db,wb));this._d.xr(Db,Db.a2(),N),this._d.m1(Db,Eb)}this._d.x4(yb),wb+=ub}}if(Q.ay()>0){Q.a1(J);for(var Hb=gb._i.ay()+Q.ay()+Y+gb._l.ay(),Ib=this.a7(eb,Hb),Jb=this.a8(eb,Hb,Ib),Kb=cb+Jb+Ib*gb._i.ay(),Lb=!0;!Q.ar();){var Mb=Q.x4();if(this.a3(Mb)){Lb&&(Lb=!1,Kb+=Ib*Y);var Nb=Mb.ag(),Ob=this._d.gd(Nb),Pb=Ob.at();if(Ob.ac(new ai(Pb.x,L.b())),this.c2(Nb)){var Qb=this._a.i1(Nb);Ob.ac(new ai(Pb.x,Qb.y+this._d.g6(N))),Ob.ac(new ai(Qb.x+this._d.g5(N),Qb.y+this._d.g6(N)))}else Ob.ac(new ai(Pb.x,Kb)),Ob.ac(new ai(bb,Kb));this._d.xr(Nb,N,Nb.a3()),this._d.m1(Nb,Ob)}else{var Rb=Mb.ae(),Sb=this._d.gd(Rb),Tb=Sb.au();if(Sb.ae(new ai(Tb.x,L.a())),this.d1(Rb)){var Ub=this._g.i1(Rb);Sb.ae(new ai(Tb.x,Ub.y+this._d.g6(N))),Sb.ae(new ai(Ub.x+this._d.g5(N),Ub.y+this._d.g6(N)))}else Sb.ae(new ai(Tb.x,Kb)),Sb.ae(new ai(bb,Kb));this._d.xr(Rb,Rb.a2(),N),this._d.m1(Rb,Sb)}this._d.x4(Mb),Kb+=Ib}}var Vb=gb._g.ay()+gb._d.ay()+ab+S.ay()+R.ay()+Z+$;db=this._d.gj(N);var Wb=this.a7(db,Vb),Xb=this.a8(db,Vb,Wb);Vb=gb._b.ay()+gb._q.ay()+_+U.ay()+T.ay();var Yb=this.a7(db,Vb),Zb=this.a8(db,Vb,Yb);if(S.ay()>0)for(var $b,_b=Wb,ac=b,bc=this._d.gi(N)+Xb+_b*(gb._g.ay()+S.ay()-1),cc=this._d.gh(N),dc=L._c-L._g-S.ay()*ac;!S.ar();this._d.x4($b)){$b=S.x4();var ec=$b.ag(),fc=this._d.gd(ec),gc=fc.at();if(fc.ac(new ai(gc.x,L.b())),fc.ac(new ai(gc.x,dc)),this.c2(ec)){var hc=this._a.i1(ec);fc.ac(new ai(hc.x+this._d.g5(N),dc)),fc.ac(new ai(hc.x+this._d.g5(N),hc.y+this._d.g6(N)))}else fc.ac(new ai(bc,dc)),fc.ac(new ai(bc,cc)),bc-=_b;dc+=ac,this._d.xr(ec,N,ec.a3()),this._d.m1(ec,fc)}if(R.ay()>0)for(var ic,jc=Wb,kc=b,lc=this._d.gi(N)+this._d.gj(N)-Xb-jc*gb._d.ay(),mc=this._d.gh(N),nc=L._c-L._g-kc;!R.ar();this._d.x4(ic)){ic=R.x4();var oc=ic.ag(),pc=this._d.gd(oc),qc=pc.at();if(pc.ac(new ai(qc.x,L.b())),pc.ac(new ai(qc.x,nc)),this.c2(oc)){var rc=this._a.i1(oc);pc.ac(new ai(rc.x+this._d.g5(N),nc)),pc.ac(new ai(rc.x+this._d.g5(N),rc.y+this._d.g6(N)))}else pc.ac(new ai(lc,nc)),pc.ac(new ai(lc,mc)),lc-=jc;nc-=kc,this._d.xr(oc,N,oc.a3()),this._d.m1(oc,pc)}if(U.ay()>0)for(var sc,tc=Yb,uc=b,vc=this._d.gi(N)+Zb+tc*(gb._b.ay()+U.ay()-1),wc=this._d.gh(N)+this._d.g9(N),xc=wc+U.ay()*uc;!U.ar();this._d.x4(sc)){sc=U.x4();var yc=sc.ae(),zc=this._d.gd(yc),Ac=zc.au();if(zc.ae(new ai(Ac.x,L.a())),zc.ae(new ai(Ac.x,xc)),this.d1(yc)){var Bc=this._g.i1(yc);zc.ae(new ai(Bc.x+this._d.g5(N),xc)),zc.ae(new ai(Bc.x+this._d.g5(N),Bc.y+this._d.g6(N)))}else zc.ae(new ai(vc,xc)),zc.ae(new ai(vc,wc)),vc-=tc;xc-=uc,this._d.xr(yc,yc.a2(),N),this._d.m1(yc,zc)}if(T.ay()>0)for(var Cc,Dc=Yb,Ec=b,Fc=this._d.gi(N)+this._d.gj(N)-Zb-Yb*gb._q.ay(),Gc=this._d.gh(N)+this._d.g9(N),Hc=Gc+Ec;!T.ar();this._d.x4(Cc)){Cc=T.x4();var Ic=Cc.ae(),Jc=this._d.gd(Ic),Kc=Jc.au();if(Jc.ae(new ai(Kc.x,L.a())),Jc.ae(new ai(Kc.x,Hc)),this.d1(Ic)){var Lc=this._g.i1(Ic);Jc.ae(new ai(Lc.x+this._d.g5(N),Hc)),Jc.ae(new ai(Lc.x+this._d.g5(N),Lc.y+this._d.g6(N)))}else Jc.ae(new ai(Fc,Hc)),Jc.ae(new ai(Fc,Gc)),Fc-=Dc;Hc+=Ec,this._d.xr(Ic,Ic.a2(),N),this._d.m1(Ic,Jc)}for(;!W.ar();){var Mc=W.c3(),Nc=this._d.gl(Mc);L.a()+12<Nc.y&&this._d.g7(Mc).i4(Nc.x,L.a())}for(;!V.ar();){var Oc=V.c3(),Pc=this._d.gs(Oc);if(L.b()-12>Pc.y){var Qc=this._d.gf(Oc);Qc.ac(new ai(Pc.x,L.b())),this._d.s6(Oc,Qc)}}}}for(var Rc=0;Rc<a.length;Rc++)for(var Sc=a[Rc],Tc=Sc._b;Tc;Tc=Tc.a()){var Uc=Tc.d(),Vc=this._t.a3(Uc);Vc&&Vc._a!=f&&(this._d.x4(Vc._a),Sc.aw(Tc.b()))}return this._d.xi(this._f),this._d.xj(this._a),this._d.xj(this._g),a},c3:function(a){return this.a3(a)?this.b1(a.ag()):this.a2(a.ae())},b1:function(a){return this._h?this._h.i1(a):Jj.s},a2:function(a){return this._l?this._l.i1(a):Jj.u},c2:function(a){if(a){var b=this.b1(a);return b!=f&&b.a()}return!1},d1:function(a){if(a){var b=this.a2(a);return b!=f&&b.a()}return!1},a3:function(a){return 1===a.ao()},b2:function(a){return 1===a.ak()},a4:function(a){for(var b=0,c=a._b;c;c=c.a())this.b2(c.d())&&b++;return b},d2:function(a){for(var b=this._k,c=Qj.d(a.length+1),d=0;d<a.length;d++){var e=a[d],f=new Nj;c[d]=f,f._c=H,f._i=I;for(var g=e.x1();g.i1();g.i2()){var h=g.i9(),i=this._d.gb(h);f._c=s(f._c,i.i2()),f._i=r(f._i,i.i2()+i.i4())}}this._b.a5(a,c);for(var j=0;j<a.length;j++)for(var k=c[j],l=a[j].x1();l.i1();l.i2()){var m=l.i9(),n=this._f.i1(m);n&&(k._h=r(k._h,r(n._f.ay()*b,n._c.ay()*b)),k._f=r(k._f,r(n._b.ay()*b,n._h.ay()*b)))}return c}}),Jj.s=yj.j(2),Jj.u=yj.j(1),Jj._z=new Ij;var Kj=function(){this._af=0,this._b=0};ve(Kj,b,{ib:function(a){this._af=a},ia:function(a,b,c){this.a6(a,b,c),this.b2(!1);var d=this.g();if(this.o()&&d>0){for(var e=this.r(),f=0;20>f&&d>0&&this.o();f++){this.b2(!0);var g=this.g();d>g&&(this.a7(e),d=g)}this.b3(e),this.b1()}return this.c()},a6:function(a,b,c){this._b=(new Date).getTime(),this._ac=a,this._ah=b;var d=this;this._p=function(a,b){var c=d._n[a.al()]-d._n[b.al()];return c>0?1:c>=0?0:-1},this._ad=Qj.d(c);for(var e=0;e<this._ad.length;e++)this._ad[e]=new Ti;this._ab=Qj.a(this._ac.x0()),this._f=Qj.d(this._ac.x0()),this._n=Qj.a(this._ac.x0()+1);var f=this._ab;this._o=function(a,b){if(!a&&b)return 1;if(a&&!b)return-1;if(!a&&!b)return 0;var c=a,d=b,e=c._h,g=c.a2(),h=d.a2(),i=f[g.al()]-f[h.al()];if(0===i){var j=Kj.b(yj.h(e,c),e.gn(c)),k=Kj.b(yj.h(e,d),e.gn(d)),l=j-k;if(0===l){var m=f[c.a3().al()]-f[d.a3().al()];return 0===m?Kj.a(yj.i(e,c),e.gk(c))-Kj.a(yj.i(e,d),e.gk(d)):m}return l}return i},this._l=function(a,b){if(!a&&b)return 1;if(a&&!b)return-1;if(!a&&!b)return 0;var c=a,d=b,e=c._h,g=c.a3(),h=d.a3(),i=f[g.al()]-f[h.al()];if(0===i){var j=Kj.a(yj.i(e,c),e.gk(c))-Kj.a(yj.i(e,d),e.gk(d));if(0===j){var k=f[c.a2().al()]-f[d.a2().al()];return 0===k?Kj.b(yj.h(e,c),e.gn(c))-Kj.b(yj.h(e,d),e.gn(d)):k}return j}return i},this._z=function(a,b){if(!a&&b)return 1;if(a&&!b)return-1;if(!a&&!b)return 0;var c=a,d=b,e=c._h;return Kj.b(yj.h(e,c),e.gn(c))-Kj.b(yj.h(e,d),e.gn(d))},this._e=function(a,b){if(!a&&b)return 1;if(a&&!b)return-1;if(!a&&!b)return 0;var c=a,d=b,e=c._h;return Kj.a(yj.i(e,c),e.gk(c))-Kj.a(yj.i(e,d),e.gk(d))},this._ac.x2(this._e,this._z)},c:function(){this._ah=f,this._aa=f,this._f=f,this._n=f,this._p=f,this._o=f,this._l=f,this._ac=f;var a=this._ad;return this._ad=f,a},o:function(){var a=(new Date).getTime()-this._b;return a<=this._af},m:function(){for(var a=this,b=function(b,c){return p(a._n[b.a3().al()])-p(a._n[c.a3().al()])},c=this._ac.x9();c.i1();c.i2()){for(var d=c.i9().aw();d.i1();d.i2())this._n[d.i9().al()]=pj.j();c.i9().av(b)}},b2:function(a){for(var b=0;b<this._ad.length;b++)this._ad[b].af();if(a){this.m();for(var c=0,d=this._ab.length;d>c;c++)this._ab[c]=0;this._ac.x2(f,this._z)}var e=this._ac.xm();this._ah.i7(e,0);for(var g=this._ac.x9();g.i1();g.i2())0===g.i9().ak()&&g.i9()!==e&&this._ac.xo(e,g.i9());var h=new oi(this);h.a6(!0),h.a9(this._ac,e),this._ad[0].at(),this._ac.x4(e),this.d()},a1:function(){this._ac.x2(this._o,this._l);for(var a=0,b=1;b<this._ad.length;b++){var c=this.a2(this._ad[b-1],this._ad[b]);a+=c}return a},a2:function(a,b){var c=a.ah(),d=b.ah(),e=new Ai,f=new Ai,g=0;for(this._aa=Qj.d(this._ac.x0());c.i1()&&d.i1();d.i2())g+=this.a8(c.i6(),e,f,!0),g+=this.a8(d.i6(),f,e,!1),c.i2();for(;c.i1();c.i2())g+=this.a8(c.i6(),e,f,!0);for(;d.i1();d.i2())g+=this.a8(d.i6(),f,e,!1);return g},a8:function(a,b,c,d){var e=0,f=0,g=0;if(this._aa[a.al()])for(var h=this._aa[a.al()].a(),i=b._b;i!==h;i=i.a()){var j=i._c;j===a?(e++,g+=f,b.aw(i)):f++}var k=e*c.ay()+g;if(d)for(var l=a.ag();l;l=l.a8()){var m=l.a3();this._ab[m.al()]>=this._ab[a.al()]&&(this._aa[m.al()]=c.ae(m))}else for(var n=a.ae();n;n=n.a7()){var o=n.a2();this._ab[o.al()]>this._ab[a.al()]&&(this._aa[o.al()]=c.ae(o))}return k},g:function(){for(var a=this.r(),b=this.a1(),c=!0,d=0;3>d&&this.o()&&b>0;){var e=this.k();b>e?(this.a7(a),b=e):d++,c=!c}if(this.b3(a),this.b1(),b>0){for(var f=1,g=0;1===f&&b>0;g++){this.e(),this.i();var h=this.a1();b>h?(f=1,this.a7(a)):f=-1,b=h}this.b3(a),this.b1()}return b},e:function(){for(var a=this.l(),b=this.r(),c=Qj.d(this._ac.x0()),d=this._ad.length-1;d>=0;d--)for(var e=this._ad[d].ah();e.i1();e.i2()){var f=e.i6();if(1===f.ak()&&1===f.ao()){var g=a.i1(f.ag());if(g&&!c[g.al()])for(var h=this.a4(f,g),i=g.al(),j=c[i]=Qj.d(h+1),k=j.length-1;k>=0;k--)j[k]=new Ai}}for(var l=0;l<this._ad.length;l++)for(var m=this._ad[l].ah();m.i1();m.i2()){var n=m.i6();if(1===n.ak()&&1===n.ao()){var o=a.i1(n.ag());if(o){var p=o.al(),q=this.a4(n,o)-1;c[p][q].ae(n.ae())}}else for(var r=n.ae();r;r=r.a7()){var s=a.i1(r);s&&c[s.al()][this.a4(n,s)-1].ae(r)}}for(var t=this._ac.x9();t.i1();t.i2()){var u=t.i9();if(c[u.al()])for(var v=u.ag();v;v=v.a8()){var w=a.i1(v);if(w)for(var x=c[w.al()];x[0].ay()>0;){for(var y,z=0;;){y=x[z].am();var A=y.a3();if(1!==A.ak()||1!==A.ao())break;z++}var B=x[z].at().a3();z--,B=y.a2(),y=x[z].at();for(var C=y.a3();z>=0;)if(b[B.al()]!==b[C.al()]&&(this._ab[B.al()]=b[C.al()]),B=B.ae().a2(),--z>=0){var D=x[z].at();C=D.a3()}}}}this.b1(),this._ac.xj(a)},i:function(){for(var a=this.f(),b=this.r(),c=Qj.d(this._ac.x0()),d=0;d<this._ad.length;d++)for(var e=this._ad[d].ah();e.i1();e.i2()){var f=e.i6();if(1===f.ak()&&1===f.ao()){var g=a.i1(f.ae());if(g&&!c[g.al()])for(var h=this.a4(g,f),i=c[g.al()]=Qj.d(h+1),j=i.length-1;j>=0;j--)i[j]=new Ai}}for(var k=this._ad.length-1;k>=0;k--)for(var l=this._ad[k].ah();l.i1();l.i2()){var m=l.i6();if(1===m.ak()&&1===m.ao()){var n=a.i1(m.ae());n&&c[n.al()][this.a4(n,m)-1].ae(m.ag())}else for(var o=m.ag();o;o=o.a8()){var p=a.i1(o);p&&c[p.al()][this.a4(p,m)-1].ae(o)}}for(var q=this._ac.x9();q.i1();q.i2()){var r=q.i9();if(c[r.al()])for(var s=r.ae();s;s=s.a7()){var t=a.i1(s);if(t)for(var u=c[t.al()];u[0].ay()>0;){for(var v,w=0;;){v=u[w].am();var x=v.a2();if(1!==x.ak()||1!==x.ao())break;w++}var y=u[w].at().a2();w--,y=v.a3(),v=u[w].at();for(var z=v.a2();w>=0;)if(b[y.al()]!==b[z.al()]&&(this._ab[y.al()]=b[z.al()]),y=y.ag().a3(),--w>=0){var A=u[w].at();z=A.a2()}}}}this.b1(),this._ac.xj(a)},a4:function(a,b){return this._ah.i2(a)-this._ah.i2(b)},l:function(){for(var a=Xi.a6(Qj.d(this._ac.xg())),b=this._ac.x9();b.i1();b.i2()){var c=b.i9();if(c.ao()>1){for(var d=0,e=c.ag();e;e=e.a8()){var f=e.a3();1===f.ak()&&1===f.ao()&&d++}if(d>1)for(var g=c.ag();g;g=g.a8()){var h=g,i=h.a3();if(1===i.ak()&&1===i.ao()){for(;1===i.ak()&&1===i.ao();i=h.a3())a.i8(h,c),h=i.ag();a.i8(h,c)}}}}return a},f:function(){for(var a=Xi.a6(Qj.d(this._ac.xg())),b=this._ac.x9();b.i1();b.i2()){var c=b.i9();if(c.ak()>1){for(var d=0,e=c.ae();e;e=e.a7()){var f=e.a2();1===f.ak()&&1===f.ao()&&d++}if(d>1)for(var g=c.ae();g;g=g.a7()){var h=g,i=h.a2();if(1===i.ak()&&1===i.ao()){for(;1===i.ak()&&1===i.ao();i=h.a2())a.i8(h,c),h=i.ae();a.i8(h,c)}}}}return a},k:function(){for(var a=1;a<this._ad.length;a++){for(var b=this._ad[a],c=b.ah();c.i1();c.i2()){var d=c.i6();this._n[d.al()]=this.a5(d,b.ay(),d.am(),this._ad[a-1].ay()),this._n[d.al()]+=this._ab[d.al()]/(3*this._ad[a-1].ay())}this.a3(b,this._p)}return this.a1()},a5:function(a,b,c,d){var e=0;if(0===c.i7())e=d*this._ab[a.al()]/b;else{for(;c.i1();c.i2()){var f=c.i8();e+=f.a2()===a?this._ab[f.a3().al()]:this._ab[f.a2().al()]}e/=c.i7()}return e},a7:function(a){Qj.f(this._ab,a,a.length)},b3:function(a){Qj.f(a,this._ab,a.length)},r:function(){var a=Qj.a(this._ab.length);return this.a7(a),a},d:function(){for(var a=0;a<this._ad.length;a++)for(var b=0,c=this._ad[a].ah();c.i1();)this._ab[c.i6().al()]=b,c.i2(),b++},b1:function(){for(var a=0;a<this._ad.length;a++){for(var b=this._ad[a],c=b._b;c;c=c.a()){var d=c.d();this._f[this._ab[d.al()]]=d}for(var e=0,f=b._b;f;)f.c(this._f[e]),f=f.a(),e++}},a3:function(a,b){for(var c=a.ah(),d=0;d<a.ay();c.i2())this._f[d]=c.i6(),d++;Qj.s(this._f,a.ay(),b);for(var e=0,f=a._b;f;)f.c(this._f[e]),this._ab[this._f[e].al()]=e,f=f.a(),e++}}),Kj.b=function(a,b){if(!a)return 0;var c=a.a()?o(b.x):0,d=a.a()?o(b.y):0;return a.e()?1e4-d:a.f()?-1e4+d:a.c()?-2e4-c:c},Kj.a=function(a,b){if(!a)return 0;var c=a.a()?o(b.x):0,d=a.a()?o(b.y):0;return a.e()?1e4+d:a.f()?-1e4-d:a.d()?-2e4-c:c};var Lj=function(){Lj.superClass.constructor.call(this),this._i6=0,this._i3=2147483647,this._i0=60,this._iz=20,this._i2=20,this._i4=20,this.i5(!1),this._i7=new Dj,this._i1=new Kj,this._i8=new Gj};ve(Lj,$i,{j2:function(){return this._i2},i4:function(){return!0},i3:function(a){this._i6=(new Date).getTime(),xj.d(a,!1);var b=a.xk(),c=a.xk(),d=a.xl(),e=new Bi,f=new Jj(a,b,c,d);f.a6(this.j2()),this._i8.i3(this._iz),this._i8.i6(this._i0),this._i8.i4(this._i2),this._i8.i5(this._i4),this._i8.i2(c);for(var g=this._i7.i1(a,b,e),h=e.c1();h.i1();h.i2()){var i=h.i8();d.i7(i,!0);var j=a.gn(i);a.gt(i,a.gk(i)),a.gz(i,j)}this.a2(a,b,c),g=f.a9(g);var k=this.j1(a,b,g);k=f.a5(k),k=f.b3(k),this._i8.i1(a,k,b),k=f.g2(k),f.e2(k),this.b(a,c),this.w(a),this.a1(a,e),f.e1(),a.xj(d),a.xi(c),a.xi(b)},j1:function(a,b,c){if(this._i1 instanceof Kj){var d=this._i1,e=(new Date).getTime()-this._i6;d.ib(this._i3-e)}var f=this._i1.ia(a,b,c);return f},a1:function(a,b){for(var c=b.c1();c.i1();c.i2()){var d=c.i8(),e=a.gs(d),f=a.gl(d);a.x3(d);var g=a.gp(d);a.s5(d,g.a()),a.gy(d,e),a.gx(d,f)}},b:function(a,b){for(var c=a.x9();c.i1();c.i2()){var d=c.i9(),e=b.i1(d);if(e&&!a.xp(e)){for(var f=d.am().i8().a2();b.i1(f);f=d.am().i8().a2())d=f;a.u1(e);for(var g=d.ae(),h=new Ai;b.i1(g.a3());g=g.a3().ag()){var i=a.gs(g);h.aa(i),h.az(a.gf(g));var j=a.gl(g);j.equals(i)||h.aa(j)}var k=a.gs(g);h.aa(k),h.az(a.gf(g));var l=a.gl(g);l.equals(k)||h.aa(l),a.m1(e,h)}}for(var m=a.x9();m.i1();m.i2())b.i1(m.i9())&&a.x4(m.i9())},w:function(a){for(var b=a.xf();b.i1();b.i2()){var c=b.i8(),d=a.g2(c);if(d.i1()>0){var e=new We,f=a.gc(c),g=f.c(),h=g.i6();g.i2();var i=h.x,j=h.y;if(g.i1()){var k=g.i6(),l=k.x,m=k.y;for(g.i2();g.i1();g.i2()){var n=g.i6(),o=n.x,p=n.y,q=(i-o)*(m-p)/(j-p)+o;t(q-l)>=1&&(e.add(k),i=l,j=m),k=n,l=o,m=p}}e.size()<d.i1()&&a.s5(c,new fi(e))}}},a2:function(a,b,c){var d=a.g8().c1();for(d.i5();d.i1();d.i3()){var e=d.i8().a2(),f=d.i8().a3(),g=b.i2(f)-b.i2(e);if(g>1){for(var h,i,j=e;g>1;g--)h=a.xm(),a.s7(h,1,1),a.s4(h,pj._A),i=a.xo(j,h),j===e&&a.gt(i,a.gn(d.i8())),b.i7(h,b.i2(j)+1),c.z1(h,d.i8()),j=h;i=a.xo(h,f),a.gz(i,a.gk(d.i8())),a.h1(d.i8())}}}});var Mj=function(a,b,c,d){this._i=20,this._j=a,this._g=b,this._a=c,this._h=d};ve(Mj,b,{a1:function(a){this._i=a},b2:function(a){return this._e?this._e.i4(a):!1},a3:function(a){return this._f?this._f.i1(a):f},d:function(){this._j.xi(this._f),this._j.xi(this._e)}});var Nj=function(){this._c=0,this._i=0,this._g=0,this._j=0,this._f=0,this._h=0,this._d=0,this._e=0,this._a=0,this._b=0};ve(Nj,b,{a:function(){return this._c-this._g-this._f-this._a},b:function(){return this._i+this._j+this._h+this._b}});var Oj=function(){this._d=new Bi,this._b=new Bi,this._c=new Bi,this._e=new Bi};ve(Oj,b,{});var Pj=function(a,b,c,d,e,f,g,h){this._d=a,this._a=b,this._b=c,this._h=d,this._f=e,this._c=f,this._e=g,this._g=h};ve(Pj,b,{});var Qj={a:function(a,b){for(var c=[],d=0;a>d;d++)c[d]=b||0;return c},b:function(a){for(var b=[],c=0;a>c;c++)b[c]=!1;return b},c:function(a,b){if(a instanceof ai)return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y<=b.y?0:1;if(a instanceof bi)return b.width>a.width?-1:b.width<a.width?1:b.height>a.height?-1:b.height>=a.height?0:1;if(a instanceof di)return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:b.width>a.width?-1:b.width<a.width?1:b.height>a.height?-1:b.height>=a.height?0:1;throw""},d:function(a){for(var b=[],c=0;a>c;c++)b[c]=f;return b},e:function(a,b){for(var c=[],d=0;a>d;d++)c[d]=Qj.a(b);return c},f:function(a,b,c){for(var d=0;c>d;d++)b[d]=a[d]},s:function(a,b,c){var d=[];Qj.f(a,d,b),d.sort(c),Qj.f(d,a,b)},n:function(a,b){return a-b}};$h.AutoLayout=function(a){a instanceof $e?this.dm=a:this.gv=a},_h("AutoLayout",b,{_repulsion:1,_type:f,_offsetX:f,_offsetY:f,_xf:0,_yf:0,_animate:!0,_frames:f,_interval:f,_easing:f,isAnimate:function(){return this._animate},setAnimate:function(a){this._animate=a},getFrames:function(){return this._frames},setFrames:function(a){this._frames=a},getInterval:function(){return this._interval},setInterval:function(a){this._interval=a},getEasing:function(){return this._easing},setEasing:function(a){this._easing=a},getRepulsion:function(){return this._repulsion},setRepulsion:function(a){this._repulsion=a},getOffsetX:function(){return this._offsetX},setOffsetX:function(a){this._offsetX=a},getOffsetY:function(){return this._offsetY},setOffsetY:function(a){this._offsetY=a},getNodeSize:function(a){var b,c=this.gv;return a.getChildrenRect&&(b=a.getChildrenRect(),b&&oe(b,15)),!b&&c&&c.getDataUIBounds&&(b=c.getDataUIBounds(a)),b||(b=a.getRect(),oe(b,15)),b},isLayoutable:function(a){var b=this.gv;return b&&!b.isVisible(a)?!1:a instanceof Bf?a.getSourceAgent()&&a.getTargetAgent()&&!a.isLooped()?!0:!1:a instanceof wf?a.getHost()?!1:b?b.isMovable(a):!0:!1},getType:function(){return this._type},getLayoutDatas:function(){var a,b=this,c=b.gv,d=b.dm,e=!1,g=new We;return c?c.sm().size()>1?(e=!0,a=c.sm().getSelection()):a=c.dm().getDatas():d.sm().size()>1?(e=!0,a=d.sm().getSelection()):a=d.getDatas(),b._xf=b._yf=H,a.each(function(a){if(b.isLayoutable(a)&&(g.add(a),e&&a instanceof wf)){var c=a.getPosition();c.x<b._xf&&(b._xf=c.x),c.y<b._yf&&(b._yf=c.y)}}),e||(b._xf=b._offsetX==f?50:b._offsetX,b._yf=b._offsetY==f?50:b._offsetY),g},getLayoutResult:function(a){var b={};return this.layoutImpl(a,f,b),b},layout:function(a,b){return this.layoutImpl(a,b)},layoutImpl:function(a,b,c){this._type=a;var d=this,e={},f=Yh(a),g=d.getLayoutDatas(),h=new Cj(d,g);if(!f)return!1;g=h.p();var i=new wj(d,g,a);try{f.i2(i)}catch(j){return h.r(),b&&b(),!1}var k,l,m,n,o=i._a;for(k in o)l=o[k],n=i.g4(l),e[k]={x:n.x+d._xf,y:n.y+d._yf};if(a===Wh||a===Xh||a===Uh){var p,q=Zh(a),r=H,s=H,t=2*d._repulsion;for(k in e)l=o[k],m=e[k],n=q.tf(m),m.x=n.x,m.y=n.y,a===Wh||a===Xh?(p=n.x-i.g9(l)/t,r>p&&(r=p),p=n.y-i.gj(l)/t,s>p&&(s=p)):(p=n.x-i.gj(l)/t,r>p&&(r=p),p=n.y-i.g9(l)/t,s>p&&(s=p));for(k in e)l=o[k],m=e[k],m.x=m.x-r+d._xf,m.y=m.y-s+d._yf}if(!c&&d._animate){var u=d.gv,v={};for(k in e)v[k]=o[k].node.getPosition();u&&(u._autoLayouting=1),Ud({frames:d._frames,interval:d._interval,easing:d._easing,finishFunc:function(){h.r(),b&&b(),u&&(delete u._autoLayouting,u.onAutoLayoutEnded())},action:function(a){for(k in e){var b=v[k],c=e[k];o[k].node.setPosition(b.x+(c.x-b.x)*a,b.y+(c.y-b.y)*a)}}})}else{for(k in e)l=o[k],m=e[k],c?c[l.node.getId()]=m:l.node.setPosition(m);h.r(),b&&b()}return!0}}),$h.ForceLayout=function(a){this.init(a)},_h("ForceLayout",b,{ms_force:1,getLimitBounds:function(){return this._limitBounds},setLimitBounds:function(a){this._limitBounds=a,this._damper=1},getNodeSize:function(a){return this.gv?this.gv.getDataUIBounds(a):a.getRect()},addNode:function(a){var b=this,c=b._nodeMap[a._id];if(c)return c;var d=a.getPosition();c={v:a,x:d.x,y:d.y,dx:0,dy:0,fix:!b.isMovable(a),s:b.getNodeSize(a)};var e=c.s,f=q(G(e.width)+G(e.height))*b._nodeRepulsion;return c.r=1>f?100:f,b._nodeMap[a._id]=c,b._nodes.add(c),c},addEdge:function(a){if(a._sourceAgent&&a._targetAgent){var b=this,c=b.addNode(a._sourceAgent),d=b.addNode(a._targetAgent),e={s:c,t:d};d=d.s,c=c.s;var f=d.width+c.width,g=d.height+c.height;e.length=q(f*f+g*g)*b._edgeRepulsion,e.length<=0&&(e.length=100),b._edges.add(e)}},relaxEdge:function(a){var b=a.t,c=a.s,d=b.x-c.x,e=b.y-c.y,f=q(d*d+e*e),g=100*a.length,h=.25*d/g*f,i=.25*e/g*f;b.dx=b.dx-h,b.dy=b.dy-i,c.dx=c.dx+h,c.dy=c.dy+i},relaxNode:function(a,b){if(a!==b){var c=0,d=0,e=a.x-b.x,f=a.y-b.y,g=e*e+f*f;0===g?(c=E(),d=E()):36e4>g&&(c=e/g,d=f/g);var h=a.r*b.r/400;c*=h,d*=h,a.dx+=c,a.dy+=d,b.dx-=c,b.dy-=d}},moveNode:function(){var a=this,b=a._limitBounds,c=a._maxMotion,d=0,e=a._damper;a._nodes.each(function(c){if(!c.fix){var f=c.dx*e,g=c.dy*e;if(c.dx=f/2,c.dy=g/2,d=r(q(f*f+g*g),d),c.x+=r(-40,s(40,f)),c.y+=r(-40,s(40,g)),b){c.x<b.x&&(c.x=b.x,a.adjust(1,0)),c.y<b.y&&(c.y=b.y,a.adjust(0,1));var h=c.s;c.x+h.width>b.x+b.width&&(c.x=b.x+b.width-h.width,a.adjust(-1,0)),c.y+h.height>b.y+b.height&&(c.y=b.y+b.height-h.height,a.adjust(0,-1))}}}),a._maxMotion=d,a._motionRatio=d>0?c/d-1:0,a.damp()},adjust:function(a,b){var c=this._limitBounds;this._nodes.each(function(d){a>0?(!c||d.x+d.s.width+a<c.x+c.width)&&(d.x+=a):(!c||d.x+a>c.x)&&(d.x+=a),b>0?(!c||d.y+d.s.height+b<c.y+c.height)&&(d.y+=b):(!c||d.y+b>c.y)&&(d.y+=b)})}});var Rj=$h.Force3dLayout=function(a){this.init(a)};_h("Force3dLayout",b,{ms_force:1,getSize3d:function(a){return a.s3()},addNode:function(a){var b=this,c=b._nodeMap[a._id];if(c)return c;c={v:a,p:a.p3(),d:[0,0,0],fix:!b.isMovable(a),s:b.getSize3d(a)};var d=c.s,e=ge(d)*b._nodeRepulsion;return c.r=1>e?100:e,b._nodeMap[a._id]=c,b._nodes.add(c),c},addEdge:function(a){if(a._sourceAgent&&a._targetAgent){var b=this,c=b.addNode(a._sourceAgent),d=b.addNode(a._targetAgent),e={s:c,t:d};d=d.s,c=c.s,e.length=q(G(d[0]+c[0])+G(d[1]+c[1])+G(d[2]+c[2]))*b._edgeRepulsion,e.length<=0&&(e.length=100),b._edges.add(e)}},relaxEdge:function(a){var b=a.t.p,c=a.s.p,d=a.t.d,e=a.s.d,f=b[0]-c[0],g=b[1]-c[1],h=b[2]-c[2],i=q(f*f+g*g+h*h),j=100*a.length,k=.25*f/j*i,l=.25*g/j*i,m=.25*h/j*i;d[0]-=k,d[1]-=l,d[2]-=m,e[0]+=k,e[1]+=l,e[2]+=m},relaxNode:function(a,b){if(a!==b){var c=a.p,d=b.p,e=0,f=0,g=0,h=c[0]-d[0],i=c[1]-d[1],j=c[2]-d[2],k=h*h+i*i+j*j;0===k?(e=E(),f=E(),g=E()):216e6>k&&(e=h/k,f=i/k,g=j/k);var l=a.r*b.r/400,m=a.d,n=b.d;e*=l,f*=l,g*=l,m[0]+=e,m[1]+=f,m[2]+=g,n[0]-=e,n[1]-=f,n[2]-=g}},moveNode:function(){var a=this,b=a._maxMotion,c=0,d=a._damper;a._nodes.each(function(a){if(!a.fix){var b=a.p,e=a.d,f=e[0]*d,g=e[1]*d,h=e[2]*d;e[0]=f/2,e[1]=g/2,e[2]=h/2,c=r(q(f*f+g*g+h*h),c),b[0]+=r(-40,s(40,f)),b[1]+=r(-40,s(40,g)),b[2]+=r(-40,s(40,h))}}),a._maxMotion=c,a._motionRatio=c>0?b/c-1:0,a.damp()}}),Tb(i,{widgetSelectBackground:nd,widgetSortAscIcon:"sortAsc",widgetSortDescIcon:"sortDesc",widgetExpandIcon:"expand",widgetCollapseIcon:"collapse",widgetIndent:Q?29:19,widgetRowHeight:Q?29:19,widgetLineColor:jd,widgetHeaderHeight:Q?34:24,accordionViewLabelColor:zd,accordionViewTitleBackground:md,accordionViewSelectBackground:nd,accordionViewSelectWidth:3,accordionViewSeparatorWidth:1,accordionViewSeparatorColor:null,splitViewDividerSize:1,splitViewDividerBackground:md,splitViewDragOpacity:.5,propertyViewBackground:id,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,listViewRowLineVisible:!1,treeViewRowLineVisible:!1,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,tableHeaderColumnLineVisible:!0,tableHeaderLabelColor:yd,tableHeaderBackground:id,tableHeaderMoveBackground:od,tableHeaderInsertColor:nd,tabViewTabGap:1,tabViewLabelColor:zd,tabViewTabBackground:md,tabViewSelectWidth:3,tabViewSelectBackground:nd,tabViewMoveBackground:od,tabViewInsertColor:nd,toolbarBackground:id,toolbarItemPadding:Q?14:4,toolbarItemGap:2,toolbarSeparatorColor:kd},!0);var Sj={translateX:1,sortColumn:1},Tj={sortable:1,sortOrder:1,sortFunc:1},Uj={focusData:1},Vj={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Wj={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Xj=function(a,b){b.add(a),a.hasChildren()&&a.eachChild(function(a){Xj(a,b)})},Yj=function(a,b,c,d,e,f,g){var h=c.getBodyColor(b),i=c.getBorderColor(b),j=Nd(c.getIcon(b),h);if(j){var h=c.getBodyColor(b),i=c.getBorderColor(b);if($b(a,j,d+f/2,e+g/2-1,b,c,h),i){var k=Se(j,b),l=Te(j,b);Tc(a,i,d+f/2-k/2-1,e+g/2-l/2-2,k+2,l+2,2)}return f}return 0},Zj=function(a,b,c,d,e,g,h,i,j,k,l){var m=c.formatValue,o=c.getEnumMap(),p=c.getValueType();if(m&&(b=m(b)),o&&(b=o[b],p=eb),b!=f){if(p===gb)return a.fillStyle=b,a.beginPath(),a.rect(g,h,i,j),a.fill(),void 0;if(p===fb||!p&&Nb(b)){var q=Nd(b?"check":"uncheck");return $b(a,q,g+i/2,h+j/2,k,l),void 0}m||(p===hb?b=n(b):p===ib&&(b=b.toFixed(2))),Zd(a,b,d,e,g,h,i,j,c._align)}},$j=function(a,b,c,d,g){var h=e.createElement(a),i=h.style,j=b.editorRect,k=b.value,l=b.view;return i.position=_,i.margin=0,i.border=0,i.padding=0,i.left=j.x+$,i.top=j.y+$,i.width=j.width+$,i.height=j.height+$,i.outline=c?"2px inset "+c:0,b.editor=h,h.info=b,h.onchange=function(){l.endEditing()},h.onblur=function(){l.endEditing()},"input"===a?(k!=f&&(h.value=k),h.onkeydown=function(a){Hc(a)&&l.endEditing()}):"select"===a&&d.each(function(a){var b=e.createElement("option");b.innerHTML=g?g[a]:a,b.value=a,k===a&&(b.selected=!0),h.appendChild(b)}),e.body.appendChild(h),l.setCurrentEditor(h),mc(h),h},_j=i.widgetSelectBackground,ak=i.widgetSortAscIcon,bk=i.widgetSortDescIcon,ck=i.widgetExpandIcon,dk=i.widgetCollapseIcon,ek=i.widgetIndent,fk=i.widgetRowHeight,gk=i.widgetLineColor,hk=i.widgetHeaderHeight,ik=g.widget={},jk=function(a,b,c){ve(d+".widget."+a,b,c)};Tb(hd,{ms_enum:function(a){a.setEnumVN=function(a){this.setEnum(a.values,a.names)
},a.setEnum=function(a,b){if(!a||a instanceof We||(a=new We(a)),!b||b instanceof We||(b=new We(b)),this._enumValues=a,this._enumNames=b,b){this._enumMap={};for(var c=a.size(),d=0;c>d;d++)this._enumMap[a.get(d)]=b.get(d)}else delete this._enumMap;a&&!a.isEmpty()&&Mb(a.get(0))&&(this._valueType=ib),this.fp("enum",!1,!0)},a.getEnumValues=function(){return this._enumValues},a.getEnumNames=function(){return this._enumNames},a.getEnumMap=function(){return this._enumMap}},ms_element:function(a){a.addElement=function(a,b,c,d,e,f,g,h){if(a){var i=L&&a.isFront;if(i&&(this._columnLineVisible&&(g-=1),this._rowLineVisible&&(h-=1)),!(0>=g||0>=h)){var j=this._elements;this._elements||(j=this._elements={}),j[c]||(j[c]=new We),b.clearRect(e,f,g,h);var k=jc(1),l=k.style;l.left=this.tx()+e+$,l.top=this.ty()+f+$,l.width=g+$,l.height=h+$,d&&(l.background=d),k.appendChild(a),i?this._view.insertBefore(k,this._scrollBarDiv):this._view.insertBefore(k,this._canvas),a.onParentAdded&&a.onParentAdded(k),j[c].add(k)}}},a.removeElements=function(){var a=this._elements;if(a){for(var b in a)a[b].each(function(a){this._view.removeChild(a)},this);delete this._elements}},a.removeElement=function(a){if(this._elements){var b=this._elements[a];b&&(b.each(function(a){this._view.removeChild(a)},this),delete this._elements[a])}}},ms_cell:function(a){a.getValue=function(a,b){return b.getValue?b.getValue(a,b,this):Yb(a,b.getAccessType(),b.getName())},a.setValue=function(a,b,c){if(b.isNullable()||c!=f){var d=b.getValueType();d===hb&&Lb(c)?c=parseInt(c):d===ib&&Lb(c)&&(c=parseFloat(c)),b.setValue?b.setValue(a,b,c,this):Zb(a,b.getAccessType(),b.getName(),c)}},a.setCurrentEditor=function(a){this.endEditing(),this._currentEditor=a},a.endEditing=function(){var a=this._currentEditor;a&&(delete this._currentEditor,a.commitValue&&a.commitValue(a.info))},a.beginEditing=function(a){this.endEditing();var b=e.body,c=a.column||a.property;if(c.beginEditing)return c.beginEditing(a);var d=this,g=a.data,h=a.value,i=this.getSelectBackground(g),j=c.getEnumValues();if(j){var k=$j("select",a,i,j,c.getEnumMap());return k.commitValue=function(){k.parentNode===b&&(d.setValue(g,c,k.value),b.removeChild(k))},c.onEditorCreated&&c.onEditorCreated(a),k}var l=c.getValueType();if(l===fb||Nb(h))return this.setValue(g,c,!h),f;var m=$j("input",a,i);return m.commitValue=function(){m.parentNode===b&&(d.setValue(g,c,m.value),b.removeChild(m))},c.onEditorCreated&&c.onEditorCreated(a),m}},ms_tablePane:function(a){a.init=function(a){this.tv=this._tableView=a;var b=this.th=this._tableHeader=new wk(a),c=this._view=jc(1);c.appendChild(b.getView()),c.appendChild(a.getView()),b.mp(function(a){"height"===a.property&&this.iv()},this),this.iv()},a.getTableView=function(){return this.tv},a.getTableHeader=function(){return this.th},a.getDataModel=function(){return this.tv.dm()},a.getColumnModel=function(){return this.tv.getColumnModel()},a.addColumns=function(a){this.tv.addColumns(a)},a.endEditing=function(){this.tv.endEditing()},a.validateImpl=function(){var a=this.th,b=a.getHeight(),c={x:0,y:0,width:this.getWidth(),height:b};nc(a,c),c.y=b,c.height=r(0,this.getHeight()-b),nc(this.tv,c)}},ms_vs:function(a){a.isVScrollable=function(){return this._viewRect.height<this._scrollHeight},a.showVBar=function(){if(this.isVScrollable()){if(!this._vTimer){var a=this;setTimeout(function(){a.handleVTimeout()},Dd),this.iv()}this._vTimer=new Date}},a.handleVTimeout=function(){if(this._vTimer){var a=new Date;if(a.getTime()-this._vTimer.getTime()>=Dd)delete this._vTimer,this.iv();else{var b=this;setTimeout(function(){b.handleVTimeout()},Dd)}}},a.updateVBar=function(){var a=this._vBar;if(this._vTimer||!this._autoHideScrollBar){a||this._scrollBarDiv.appendChild(a=this._vBar=jc());var b=this._viewRect,c=b.height,d=this._scrollHeight,e=this.getScrollBarSize(),f=b.width-e-2,g=c*(-this.ty()/d),h=c*(c/d),i=a.style;d>c?(Ed>h&&(g=g+h/2-Ed/2,0>g&&(g=0),g+Ed>c&&(g=c-Ed),h=Ed),i.visibility="visible",i.background=this.getScrollBarColor(),i.borderRadius=e/2+$,nc(a,f,g,e,h)):i.visibility="hidden"}else a&&(a.style.visibility="hidden")}},ms_hs:function(a){a.isHScrollable=function(){return this._viewRect.width<this._scrollWidth},a.showHBar=function(){if(this.isHScrollable()){if(!this._hTimer){var a=this;setTimeout(function(){a.handleHTimeout()},Dd),this.iv()}this._hTimer=new Date}},a.handleHTimeout=function(){if(this._hTimer){var a=new Date;if(a.getTime()-this._hTimer.getTime()>=Dd)delete this._hTimer,this.iv();else{var b=this;setTimeout(function(){b.handleHTimeout()},Dd)}}},a.updateHBar=function(){var a=this._hBar;if(this._hTimer||!this._autoHideScrollBar){a||this._scrollBarDiv.appendChild(a=this._hBar=jc());var b=this._viewRect,c=b.width,d=this._scrollWidth,e=this.getScrollBarSize(),f=b.height-e-2,g=c*(-this.tx()/d),h=c*(c/d),i=a.style;d>c?(Ed>h&&(g=g+h/2-Ed/2,0>g&&(g=0),g+Ed>c&&(g=c-Ed),h=Ed),i.visibility="visible",i.background=this.getScrollBarColor(),i.borderRadius=e/2+$,nc(a,g,f,h,e)):i.visibility="hidden"}else a&&(a.style.visibility="hidden")}}}),Md("expand",{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:kd,rotation:3.14}]}),Md("collapse",{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:kd,rotation:1.57}]}),Md("sortDesc",{width:16,height:16,comps:[{type:"triangle",rect:[4,4,8,7],background:kd,rotation:3.14}]}),Md("sortAsc",{width:16,height:16,comps:[{type:"triangle",rect:[4,4,8,7],background:kd}]}),Md("check",{width:16,height:16,comps:[{type:"rect",rect:[1,1,1,14],background:kd},{type:"rect",rect:[14,1,1,14],background:kd},{type:"rect",rect:[1,1,14,1],background:kd},{type:"rect",rect:[1,14,14,1],background:kd},{type:"shape",points:[13,3,7,12,4,8],segments:[1,2,2],borderWidth:2,borderColor:ld}]}),Md("uncheck",{width:16,height:16,comps:[{type:"rect",rect:[1,1,1,14],background:kd},{type:"rect",rect:[14,1,1,14],background:kd},{type:"rect",rect:[1,1,14,1],background:kd},{type:"rect",rect:[1,14,14,1],background:kd}]}),Md("radioOn",{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:kd},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:ld,gradient:xd,gradientColor:jd,background:ld}]}),Md("radioOff",{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:kd}]}),hd.ms_list=function(a){a._viewRect=Eb,a._scrollHeight=0,a._scrollWidth=0,a.initList=function(a){this._dirtyRows=new We,this._rows=new We,this._rowMap={},this._startRowIndex=0,this._endRowIndex=0,this._view=jc(1),this._canvas=kc(this._view),this._view.appendChild(this._scrollBarDiv=jc()),this.dm(a?a:new $e)},a.getCheckIcon=function(a){var b=this.sm(),c=b.co(a);return b.sg()?Nd(c?"radioOn":"radioOff"):Nd(c?"check":"uncheck")},a.checkData=function(a){var b=this.sm(),c=b.co(a);b.sg()&&c||(this._checking=1,c?b.rs(a):b.as(a),delete this._checking)},a.getDataAt=function(a){a.target&&(a=this.lp(a));var b=o(a.y/this._rowHeight),c=this._rows;return 0>b||b>=c.size()?f:c.get(b)},a.onDataDoubleClicked=function(){},a.onDataClicked=function(){},a.adjustTranslateX=function(){return 0},a.adjustTranslateY=function(a){var b=this.getHeight()-this._scrollHeight;return b>a&&(a=b),a>0?0:n(a)},a.onPropertyChanged=function(a){Vj[a.property]?this.invalidateModel():Uj[a.property]||this.redraw(),"translateX"===a.property?this.showHBar():"translateY"===a.property&&this.showVBar()},a.getLabel=function(a){return a.toLabel()},a.getIcon=function(a){return a.getIcon()},a.getLabelFont=function(){return Ad},a.getLabelColor=function(a){if(this.isCheckMode()){if(this._focusData===a)return zd}else if(this.isSelected(a))return zd;return yd},a.getSelectBackground=function(){return _j},a.getStartRowIndex=function(){return this._startRowIndex},a.getEndRowIndex=function(){return this._endRowIndex},a.getRowDatas=function(){return this._rows},a.getRowIndex=function(a){return this._rowMap[a._id]},a.getRowSize=function(){return this._rows.size()},a.getViewRect=function(){return Sd(this._viewRect)},a.isVisible=function(a){return this._visibleFunc?this._visibleFunc(a):!0},a.getCurrentSortFunc=function(){return this._sortFunc},a.setDataModel=function(a){var b=this._dataModel,c=this._selectionModel;b!==a&&(b&&(b.umm(this.handleDataModelChange,this),b.umd(this.handleDataPropertyChange,this),b.umh(this.handleHierarchyChange,this),c||b.sm().ums(this.handleSelectionChange,this)),this._dataModel=a,a.mm(this.handleDataModelChange,this),a.md(this.handleDataPropertyChange,this),a.mh(this.handleHierarchyChange,this),c?c._setDataModel(a):a.sm().ms(this.handleSelectionChange,this),this.fp("dataModel",b,a))},a.validateModel=function(){this._rows.clear(),this._rowMap={},this.buildChildren(this._dataModel._roots);var a=this._rows=this._rows.toList(this.isVisible,this),b=0,c=this.getCurrentSortFunc(),d=a.size();for(c&&a.sort(c);d>b;b++)this._rowMap[a.get(b)._id]=b},a.buildChildren=function(a){a.each(function(a){this._rows.add(a),this.buildChildren(a._children)},this)},a.handleDataModelChange=function(){this.invalidateModel()},a.handleDataPropertyChange=function(a){"parent"===a.property?this.invalidateModel():this.invalidateData(a.data)},a.handleHierarchyChange=function(){this.invalidateModel()},a.handleSelectionChange=function(a){a.datas.each(this.invalidateData,this),this.onSelectionChanged(a)},a.onSelectionChanged=function(a){var b=this.sm();!this.isAutoMakeVisible()||1!==b.size()||"set"!==a.kind&&"append"!==a.kind||this._checking||this.makeVisible(b.ld())},a.makeVisible=function(a){a&&(this._makeVisibleData=a,this.iv())},a.scrollToIndex=function(a){var b=this,c=b._viewRect,d=c.height,e=b._rowHeight,f=e*a;a>=0&&a<b._rows.size()&&d>0&&(f+e>c.y+d?b.ty(-f+d-e):f<c.y&&b.ty(-f))},a.invalidateModel=function(){this._invalidateModel||(this._invalidateModel=1,this._redrawAll=1,delete this._dirtyMap,this.iv())},a.redraw=function(){this._redrawAll||(this._redrawAll=1,delete this._dirtyMap,this.iv())},a.invalidateData=function(a){M?this.redraw():this._redrawAll||(this._dirtyMap||(this._dirtyMap={}),this._dirtyMap[a._id]=a,this.iv())},a.getFocusData=function(){return this._focusData},a.setFocusData=function(a){var b=this._focusData;b!==a&&(this._focusData=a,this.fp("focusData",b,a),b&&this.invalidateData(b),a&&(this.invalidateData(a),this.isAutoMakeVisible()&&this.makeVisible(a)))},a.drawData=function(a,b,c){var d=this._rowHeight,e=d*c,f=this._viewRect,g=f.x,h=f.width;a.save(),a.beginPath(),a.rect(g,e,h,d),a.clip();var i,j=this.isSelected(b),k=this.isCheckMode(),l=this.drawRow(a,b,j,g,e,h,d);l&&((b===this._focusData&&k||j&&!k)&&(i=this.getSelectBackground(b)),this.addElement(l,a,c,i,g,e,h,d)),a.restore(),this._rowLineVisible&&(a.fillStyle=this._rowLineColor,a.beginPath(),a.rect(g,e+d-1,h,1),a.fill())},a._drawAllRows=function(a){var b=this._startRowIndex,c=this._viewRect,d=c.x,e=c.y,f=c.width,g=c.height;for(a.beginPath(),a.rect(d,e,f,g),a.clip(),a.clearRect(d,e,f,g),this.removeElements(),this.drawBottomPainters(a);b<this._endRowIndex;b++)this.drawData(a,this._rows.get(b),b);this.drawTopPainters(a)},a._drawDirtyRows=function(a){for(var b,c=this,d=c._rowHeight,e=c._viewRect,f=e.x,g=e.width,h=c._startRowIndex,i=c._dirtyRows;h<c._endRowIndex;h++)b=c._rows.get(h),c._dirtyMap[b._id]&&i.add({data:b,index:h});i.isEmpty()||(a.beginPath(),i.each(function(b){a.rect(f,b.index*d,g,d)}),a.clip(),i.each(function(b){a.clearRect(f,b.index*d,g,d)}),i.each(function(a){c.removeElement(a.index)}),c.drawBottomPainters(a),i.each(function(b){c.drawData(a,b.data,b.index)}),c.drawTopPainters(a),i.clear())},a.validateImpl=function(){var a=this,b=a._canvas,c=a.getWidth(),d=a.getHeight(),e=a._rowHeight,f=a._redrawAll;(c!==b.clientWidth||d!==b.clientHeight)&&($d(b,c,d),f=1),a._invalidateModel&&a.validateModel();var g=a._viewRect,h={x:-a.tx(),y:-a.ty(),width:c,height:d},i=a._rows.size(),j=lc(b),k=a._makeVisibleData;f||Wb(h,g)||(f=1),a._viewRect=h,a._scrollHeight=i*e,a._startRowIndex=o(h.y/e),a._endRowIndex=p((h.y+h.height)/e),a._startRowIndex<0&&(a._startRowIndex=0),a._endRowIndex>i&&(a._endRowIndex=i),a.updateColumnInfos&&f&&a.updateColumnInfos(),_d(j,a.tx(),a.ty(),1),f?a._drawAllRows(j):a._dirtyMap&&a._drawDirtyRows(j),a.updateVBar(),a.updateHBar(),j.restore(),delete a._redrawAll,delete a._dirtyMap,delete a._invalidateModel,k&&(a.scrollToIndex(a.getRowIndex(k)),delete a._makeVisibleData),a.tx(a.tx()),a.ty(a.ty())}},hd.ms_tree=function(a){a._rootVisible=!0,a._rootData=f,a.initTree=function(){this._expandMap={},this._levelMap={}},a.validateModel=function(){this._rows.clear(),this._levelMap={},this._rowMap={};var a=this._rootData;this._currentLevel=0,a?this._rootVisible?this.isVisible(a)&&this.buildData(a):this.buildChildren(a):this.buildChildren(),delete this._currentLevel},a.buildData=function(a){var b=a._id,c=this._rows;this._rowMap[b]=c.size(),c.add(a),this._levelMap[b]=this._currentLevel,this.isExpanded(a)&&(this._currentLevel++,this.buildChildren(a),this._currentLevel--)},a.buildChildren=function(a){var b=a?a._children:this._dataModel._roots,c=this.getCurrentSortFunc();c&&this.isChildrenSortable(a)?b.toList(this.isVisible,this).sort(c).each(this.buildData,this):b.each(function(a){this.isVisible(a)&&this.buildData(a)},this)},a.getLevel=function(a){return this._levelMap[a._id]},a.getToggleIcon=function(a){return a.hasChildren()?this.isExpanded(a)?this._expandIcon:this._collapseIcon:f},a.isCheckMode=function(){return this._checkMode!=f},a.isChildrenSortable=function(){return!0},a.handleDataModelChange=function(a){"remove"===a.kind?delete this._expandMap[a.data._id]:"clear"===a.kind&&(this._expandMap={}),this.invalidateModel()},a.toggle=function(a){this.isExpanded(a)?this.collapse(a):this.expand(a)},a.isExpanded=function(a){return 1===this._expandMap[a._id]},a.expand=function(a){this.isExpanded(a)||(this._expandMap[a._id]=1,this.invalidateModel(),this.onExpanded(a))},a.onExpanded=function(){},a.collapse=function(a){this.isExpanded(a)&&(delete this._expandMap[a._id],this.invalidateModel(),this.onCollapsed(a))},a.onCollapsed=function(){},a.expandAll=function(){this._dataModel.each(function(a){a.hasChildren()&&(this._expandMap[a._id]=1)},this),this.invalidateModel()},a.collapseAll=function(){this._expandMap={},this.invalidateModel()},a.makeVisible=function(a){if(a&&(!this._rootData||a.isDescendantOf(this._rootData))){for(var b=a._parent;b;)this.expand(b),b=b._parent;this._makeVisibleData=a,this.iv()}},a.checkData=function(a){var b,c=this._checkMode,d=this.sm(),e=d.co(a);if(!d.sg()||!e){if(this._checking=1,"default"===c)e?d.rs(a):d.as(a);else if("children"===c)b=new We(a),b.addAll(a._children);else if("descendant"===c)b=new We,Xj(a,b);else if("all"===c&&(b=new We,Xj(a,b),!e))for(var f=a._parent;f;)b.add(f),f=f._parent;b&&(e?d.rs(b):d.as(b)),delete this._checking}},a.drawTree=function(a,b,c,d,e,f,g){var h=this,i=h._indent,j=h._levelMap[b._id],k=Nd(h.getToggleIcon(b)),l=h.getLabel(b);k?(d+=i*j,$b(a,k,d+i/2,e+g/2,b,h),d+=i):d+=i*(j+1),h._checkMode&&($b(a,h.getCheckIcon(b),d+i/2,e+g/2,b,h),d+=i),d+=Yj(a,b,h,d,e,i,g),Zd(a,l,h.getLabelFont(b),h.getLabelColor(b),d,e,f,g)}},hd.ms_table=function(a){a.initTable=function(){this._columnInfos=new We;var a=this._columnModel=new $e;a.mm(this.handleColumnModelChange,this),a.md(this.handleColumnPropertyChange,this),a.mh(this.handleColumnHierarchyChange,this)},a.addColumns=function(a){var b=this._columnModel;a.forEach(function(a){if(!(a instanceof lk)){var c=Td(a.className);a=ic(c?c:lk,a)}b.add(a)})},a.onColumnClicked=function(){},a.getColumnInfos=function(){return this._columnInfos},a.getColumnInfo=function(a){for(var b,c=0,d=this._columnInfos,e=d.size();e>c;c++)if(b=d.get(c),b.column===a)return b;return f},a.getColumnAt=function(a){var b=this.getColumnInfoAt(a);return b?b.column:null},a.getColumnInfoAt=function(a){for(var b=this,c=a.target?b.lp(a):a,d=b._columnInfos,e=0;e<d.size();e++){var f=d.get(e),g=f.startX;if(c.x>=g&&c.x<g+f.column.getWidth())return f}return null},a.getToolTip=function(a){var b=this,c=b.getDataAt(a);if(c){var d=b.getColumnAt(a);if(d)return b.getValue(c,d)}return null},a.adjustTranslateX=function(a){var b=this.getWidth()-this._scrollWidth;return b>a&&(a=b),a>0?0:n(a)},a.updateColumnInfos=function(){var a=this._viewRect,b=this._columnInfos;b.clear(),this._scrollWidth=0,this._columnModel._roots.each(function(c){if(c.isVisible()){var d=this._scrollWidth+c.getWidth();this._scrollWidth<=a.x+a.width&&d>=a.x&&b.add({column:c,startX:this._scrollWidth}),this._scrollWidth=d}},this)},a.drawData=function(a,b,c){var d,e=this._rowHeight,f=e*c,g=this.isSelected(b),h=this._viewRect,i=h.x,j=h.width,k=this.isCheckMode();(b===this._focusData&&k||g&&!k)&&(d=this.getSelectBackground(b),a.fillStyle=d,a.beginPath(),a.rect(i,f,j,e),a.fill()),this._columnInfos.each(function(h){var i=h.column,j=h.startX,k=i.getWidth();if(k>0){a.save(),a.beginPath(),a.rect(j,f,k,e),a.clip();var l=this.drawCell(a,b,g,i,j,f,k,e);l&&this.addElement(l,a,c,d,j,f,k,e),this._columnLineVisible&&(a.fillStyle=this._columnLineColor,a.beginPath(),a.rect(j+k-1,f,1,e),a.fill()),a.restore()}},this),this._rowLineVisible&&(a.fillStyle=this._rowLineColor,a.beginPath(),a.rect(i,f+e-1,j,1),a.fill())},a.drawCell=function(a,b,c,d,e,f,g,h){if(d.drawCell)return d.drawCell(a,b,c,d,e,f,g,h,this);var i=this.getValue(b,d);Zj(a,i,d,this.getLabelFont(b,d,i),this.getLabelColor(b,d,i),e,f,g,h,b,this)},a.getColumnModel=function(){return this._columnModel},a.handleColumnModelChange=function(){this.redraw()},a.handleColumnPropertyChange=function(a){a.data===this._sortColumn&&Tj[a.property]?this.invalidateModel():(this.showHBar(),this.redraw())},a.handleColumnHierarchyChange=function(){this.redraw()},a.getCurrentSortFunc=function(){var a=this._sortColumn;if(a&&a.isSortable()){var b=a.getSortFunc(),c=this,d="asc"===a.getSortOrder()?1:-1;return b||(b=Rd),function(e,f){return b.call(c,c.getValue(e,a),c.getValue(f,a),e,f)*d}}return this._sortFunc},a.isCellEditable=function(a,b){return b.isEditable()&&this.isEditable()},a.checkEditing=function(a,b){for(var c=this.lp(b),d=fe(b),e=this._columnInfos,f=this._rowHeight,g=this._viewRect,h=g.x,i=g.y,j=g.width,k=g.height,l=0;l<e.size();l++){var m=e.get(l),n=m.startX,o=m.column,p=o.getWidth();if(o!==this._checkColumn&&o!==this._treeColumn&&this.isCellEditable(a,o)&&c.x>=n&&c.x<n+p){var q={x:n,y:this.getRowIndex(a)*f,width:p,height:f},r=ne(),s={x:q.x-c.x+d.x+r.left,y:q.y-c.y+d.y+r.top,width:q.width,height:q.height},t=0,u=0;return q.x<h?t=q.x-h:q.x+q.width>h+j&&(t=q.x+q.width-h-j),t&&(this.tx(this.tx()-t),s.x-=t),q.y<i?u=q.y-i:q.y+f>i+k&&(u=q.y+f-i-k),u&&(this.ty(this.ty()-u),s.y-=u),this.beginEditing({data:a,column:o,value:this.getValue(a,o),event:b,rect:q,editorRect:s,view:this}),void 0}}}};var kk=g.Tab=function(){Ub(kk,this)};we("Tab",Ze,{ms_ac:["view","closable","disabled"],_icon:f,_closable:!1,_disabled:!1,setParent:Db});var lk=g.Column=function(){Ub(lk,this)};we("Column",Ze,{ms_enum:1,ms_ac:["accessType","valueType","visible","editable","width","align","sortOrder","sortFunc","sortable","nullable"],_icon:f,_accessType:f,_valueType:f,_editable:!1,_visible:!0,_width:80,_align:T,_sortOrder:"asc",_sortFunc:f,_sortable:!0,_nullable:!0,setWidth:function(a){16>a&&(a=16);var b=this._width;this._width=a,this.fp("width",b,a)},setParent:Db});var mk=g.Property=function(){Ub(mk,this)};we("Property",Ze,{ms_enum:1,ms_ac:["accessType","valueType","editable","categoryName","align","nullable"],_accessType:f,_valueType:f,_editable:!1,_categoryName:f,_align:T,_nullable:!0,setParent:Db}),ik.AccordionView=function(){var a=this;a._titleMap={},a._titleList=new We,a._currentTitle=f,a._currentView=f,a._currentContent=f,a._view=jc(),a.iv()},jk("AccordionView",b,{ms_v:1,ms_fire:1,ms_ac:["expandIcon","collapseIcon","titleHeight","labelColor","titleBackground","selectWidth","selectBackground","orientation","separatorWidth","separatorColor"],_expandIcon:ck,_collapseIcon:dk,_titleHeight:hk,_labelColor:i.accordionViewLabelColor,_titleBackground:i.accordionViewTitleBackground,_selectBackground:i.accordionViewSelectBackground,_selectWidth:i.accordionViewSelectWidth,_orientation:"vertical",_separatorWidth:i.accordionViewSeparatorWidth,_separatorColor:i.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getLabelFont:function(){return Ad},getView:function(){return this._view},getTitles:function(){return this._titleList},getCurrentTitle:function(){return this._currentTitle},add:function(a,b,c,d){if(this._titleMap[a])throw a+" already exists";var e=this,f=jc();f.onmousedown=Ld,f.style.cursor=lb,f.addEventListener(Q?qb:mb,function(a){Ld(a)},!1),f.addEventListener(Q?sb:ob,function(b){Ld(b),ae(b)&&(e._currentTitle===a?e.collapse():e.expand(a))},!1),e._view.appendChild(f),e._titleMap[a]={content:b,div:f,canvas:kc(f),icon:d},e._titleList.add(a),c&&e.expand(a),e.iv()},remove:function(a){var b=this,c=b._titleMap[a];c&&(b._view.removeChild(c.div),delete b._titleMap[a],b._titleList.remove(a),b.iv())},clear:function(){this._titleMap={},this._titleList.clear(),this.iv()},isExpanded:function(a){return this._currentTitle===a},expand:function(a){this._titleMap[a]&&this._currentTitle!==a&&(this._currentTitle=a,this.onExpanded(a),this.iv())},onExpanded:function(){},collapse:function(){this._currentTitle&&(this.onCollapsed(this._currentTitle),delete this._currentTitle,this.iv())},onCollapsed:function(){},initCanvas:function(a,b,c){$d(a,b,c);var d=lc(a);return d.clearRect(0,0,b,c),_d(d,0,0,1),d},drawTitile:function(a,b,c,d,e){var f=this,g=4,h=Nd(c.icon),i=f.isExpanded(b),j=f._titleHeight,k=f._titleBackground,l=f._selectWidth,m=f._separatorWidth,n=f._separatorColor,o=Nd(i?f._expandIcon:f._collapseIcon);a.fillStyle=k,a.beginPath(),a.rect(0,0,d,e),a.fill(),i&&l&&(a.fillStyle=f._selectBackground,a.beginPath(),a.rect(0,0,l,e),a.fill(),g+=l),(i||f._titleList.get(f._titleList.size()-1)!==b)&&m&&(a.fillStyle=n?n:Vd(k),a.beginPath(),a.rect(0,e-m,d,m),a.fill()),h&&($b(a,h,g+Se(h)/2,j/2),g+=Se(h)+2),Zd(a,b,f.getLabelFont(b),f.getLabelColor(b),g,0,0,j),o&&$b(a,o,d-Se(o)/2-4,j/2)},validateImpl:function(){var a=this,b=a._view,c=0,d=0,e=a.getWidth(),f=a.getHeight(),g=a._titleHeight,h=a._titleList.size()*g,i=a._currentContent,j=a._currentView;delete a._currentContent,delete a._currentView,a._titleList.each(function(b){var i,j,k=a._titleMap[b],l=k.content,m=a._currentTitle===b;"vertical"===a._orientation?(nc(k.div,0,d,e,g),i=a.initCanvas(k.canvas,e,g),a.drawTitile(i,b,k,e,g),i.restore(),m?(j=r(0,f-h),l&&(a._currentContent=l,a._currentView=l.getView?l.getView():l,nc(l,0,d+g,e,j)),d+=g+j):d+=g):(nc(k.div,c,0,g,f),i=a.initCanvas(k.canvas,g,f),Nc(i,0,f),i.rotate(-A),a.drawTitile(i,b,k,f,g),i.restore(),m?(j=r(0,e-h),l&&(a._currentContent=l,a._currentView=l.getView?l.getView():l,nc(l,c+g,0,j,f)),c+=g+j):c+=g)});var k=a._currentView;i&&i!==a._currentContent&&i.endEditing&&i.endEditing(),k&&k!==j&&b.appendChild(k),j&&j!==k&&b.removeChild(j)}}),ik.SplitView=function(a,b,c,d){this._dividerDiv=jc(),this._view=jc(1),this._view.appendChild(this._dividerDiv),a&&this.setLeftView(a),b&&this.setRightView(b),c&&this.setOrientation(c),d!=f&&this.setPosition(d),new nk(this),this.iv()},jk("SplitView",b,{ms_v:1,ms_fire:1,ms_ac:["dividerSize","dividerBackground","dragOpacity","orientation","draggable"],_position:.5,_orientation:"horizontal",_draggable:!0,_dividerSize:i.splitViewDividerSize,_dividerBackground:i.splitViewDividerBackground,_dragOpacity:i.splitViewDragOpacity,ih:function(){return"horizontal"===this._orientation||"h"===this._orientation},onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(a,b){if(!isNaN(a)){b||(this._valueScope=0>a?-1:a>1?1:0);var c=this._position;this._position=a,this.fp("position",c,a)}},getLeftView:function(){return this._leftView},setLeftView:function(a){if(this._leftView!==a){var b=this._leftView,c=this._view;if(b&&b!==this._rightView){var d=b.getView?b.getView():b;d.parentNode===c&&c.removeChild(d)}if(this._leftView=a,a){var e=a.getView?a.getView():a;e.parentNode!==c&&c.insertBefore(e,this._dividerDiv)}this.fp("leftView",b,a)}},getRightView:function(){return this._rightView},setRightView:function(a){if(this._rightView!==a){var b=this._rightView,c=this._view;if(b&&b!==this._leftView){var d=b.getView?b.getView():b;d.parentNode===c&&c.removeChild(d)}if(this._rightView=a,a){var e=a.getView?a.getView():a;e.parentNode!==c&&c.insertBefore(e,this._dividerDiv)}this.fp("rightView",b,a)}},validateImpl:function(){var a=this,b=a._draggable,c=a._position,d=a._view.offsetWidth,e=a._view.offsetHeight,f=a._dividerSize,g=Q?18:8,h=a._dividerDiv,i=a._valueScope;f>=g||0===f?a._coverDiv&&(h.removeChild(a._coverDiv),delete a._coverDiv):a._coverDiv||(a._coverDiv=jc(),L&&(a._coverDiv.style.background=ab),h.appendChild(a._coverDiv));var j=a._coverDiv,k=a._leftView,l=a._rightView;if(a.ih()){if(f>d&&(f=d),1===i)var m=c,o=r(0,d-f-m);else-1===i?(o=-c,m=r(0,d-f-o)):(m=n((d-f)*c),o=r(0,d-f-m));k&&nc(k,0,0,m,e),l&&nc(l,m+f,0,o,e),nc(h,m,0,f,e),a._absPosition=m,j&&(nc(j,f/2-g/2,0,g,e),j.style.cursor=b?jb:""),h.style.cursor=b?jb:""}else{if(f>e&&(f=e),1===i)var p=c,q=r(0,e-f-p);else-1===i?(q=-c,p=r(0,e-f-q)):(p=n((e-f)*c),q=r(0,e-f-p));k&&nc(k,0,0,d,p),l&&nc(l,0,p+f,d,q),nc(h,0,p,d,f),a._absPosition=p,j&&(nc(j,0,f/2-g/2,d,g),j.style.cursor=b?kb:""),h.style.cursor=b?kb:""}h.style.background=a._dividerBackground}});var nk=function(a){this.sv=a,this.addListeners()};ve(nk,b,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(a){var b=this,c=b.sv,d=c._dividerDiv;if(c.isDraggable()&&uc(a)&&(a.target===d||a.target===c._coverDiv)){Ld(a),b.resizeDiv=jc();var e=b.resizeDiv.style,f=d.style;e.left=f.left,e.top=f.top,e.width=f.width,e.height=f.height,e.opacity=c.getDragOpacity(),e.background=c.getDividerBackground(),b.clientValue=b._lastPosition=c.ih()?fe(a).x:fe(a).y,b.getView().appendChild(b.resizeDiv),se(b,a)}},handleWindowTouchMove:function(a){if(uc(a)){var b=this,c=b.sv,d=c._dividerSize,e=b.resizeDiv.style,f=c.getWidth(),g=c.getHeight(),h=c._absPosition-b._lastPosition;c.ih()?(b.clientValue=fe(a).x,h+=b.clientValue,h>f-d&&(h=f-d),0>h&&(h=0),e.left=h+$):(b.clientValue=fe(a).y,h+=b.clientValue,h>g-d&&(h=g-d),0>h&&(h=0),e.top=h+$)}},handleWindowTouchEnd:function(){var a=this,b=a.sv,c=b._absPosition-a._lastPosition+a.clientValue,d=a.getView(),e=b._dividerSize,f=b.ih()?b.getWidth():b.getHeight(),g=b._valueScope;0>c&&(c=0),c>f-e&&(c=f-e),f!==e&&(1===g?b.setPosition(c,1):-1===g?b.setPosition(c-f+e,1):b.setPosition(c/(f-e),1)),d.removeChild(a.resizeDiv),delete a.resizeDiv,delete a.clientValue},handle_mousedown:function(a){ae(a)&&this.handle_touchstart(a)},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)}}),ik.TabView=function(){this._tabInfos=new We;var a=this._view=jc(1),b=this._titleDiv=jc(1),c=this._tabModel=new $e,d=this.invalidate;this._canvas=kc(b),a.appendChild(b),a.appendChild(this._contentDiv=jc(1)),c.sm().setSelectionMode("single"),c.mm(d,this),c.md(d,this),c.mh(d,this),c.sm().ms(d,this),new ok(this),this.iv()},jk("TabView",b,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition","labelColor","tabBackground","selectWidth","selectBackground","moveBackground","insertColor"],_tabPosition:V,_tabHeight:hk,_tabGap:i.tabViewTabGap,_labelColor:i.tabViewLabelColor,_tabBackground:i.tabViewTabBackground,_selectWidth:i.tabViewSelectWidth,_selectBackground:i.tabViewSelectBackground,_moveBackground:i.tabViewMoveBackground,_insertColor:i.tabViewInsertColor,_movable:!0,getTabModel:function(){return this._tabModel},add:function(a,b,c){var d=new kk,e=this._tabModel;return d.setName(a),d.setView(b),e.add(d),c&&e.sm().ss(d),d},getLabel:function(a){return a.toLabel()},getLabelFont:function(){return Ad},onPropertyChanged:function(){this.iv()},setMovingTabInfo:function(a){this._movingTabInfo=a,this.iv()},getTabInfos:function(){return this._tabInfos},getTabInfoAt:function(a){for(var b=0,c=this._tabInfos,d=this.lp(a).x;b<c.size();b++){var e=c.get(b);if(e.startX<=d&&d<=e.endX)return e}return f},getCurrentTab:function(){return this._currentTab},getCurrentView:function(){return this._currentView},getTabView:function(a){if(a){var b=a.getView();if(b)return b.getView?b.getView():b}return f},hideTabView:function(a,b){b.parentNode===this._contentDiv&&this._contentDiv.removeChild(b)},showTabView:function(a,b){b.parentNode!==this._contentDiv&&this._contentDiv.appendChild(b)},updateTabView:function(){var a=this._currentTab,b=this._currentView,c=this._tabModel.sm().ld(),d=this.getTabView(c);d!==b&&(b&&(a.getView().endEditing&&a.getView().endEditing(),this.hideTabView(a,b)),d&&this.showTabView(c,d)),this._currentTab=c,this._currentView=d},getTabWidth:function(a){var b=4,c=Nd(a.getIcon());c&&(b+=Se(c,a)+4);var d=this.getLabel(a);return d&&(b+=_b(this.getLabelFont(a),d).width+4),a.isClosable()&&(b+=10),b},drawTab:function(a,b,c,d,e,f,g,h){var i=this,j=c+4,k=i._selectWidth,l=Nd(b.getIcon()),m=b.isDisabled(),n=i.getLabelColor(b);if(m&&(a.globalAlpha=.5),a.fillStyle=g,a.beginPath(),a.rect(c,d,e,f),a.fill(),b===i._currentTab&&k&&(a.fillStyle=i._selectBackground,a.beginPath(),a.rect(c,h?d+f-k:d,e,k),a.fill(),d+=h?-1:1),l&&($b(a,l,j+Se(l,b)/2,d+f/2,b,i),j+=Se(l,b)+4),Zd(a,i.getLabel(b),i.getLabelFont(b),n,j,d,e,f),b.isClosable()){a.strokeStyle=n,a.lineWidth=1,a.beginPath(),a.moveTo(c+e-10,d+4),a.lineTo(c+e-4,d+10),a.moveTo(c+e-4,d+4),a.lineTo(c+e-10,d+10),a.stroke();var o={x:c+e-12,y:d,width:12,height:12}}return m&&(a.globalAlpha=1),o},validateImpl:function(){var a=this;a.updateTabView();var b,c=a._canvas,d=a._titleDiv,e=a.getWidth(),f=a.getHeight(),g=a._tabHeight,h=a._tabInfos,i=a._tabGap,j=a._tabPosition===V,k=a._movingTabInfo;j?(nc(d,0,0,e,g),b={x:0,y:g,width:e,height:r(0,f-g)}):(nc(d,0,f-g,e,g),b={x:0,y:0,width:e,height:r(0,f-g)}),$d(c,e,g),nc(a._contentDiv,b),a._currentView&&(b.y=0,nc(a._currentTab.getView(),b));var l=lc(c),m=0;if(l.clearRect(0,0,e,g),_d(l,a.tx(),0,1),h.clear(),a._tabModel._roots.each(function(b){var c,d=a.getTabWidth(b);k&&k.tab===b||(c=a.drawTab(l,b,m,0,d,g,a._tabBackground,j),c&&!j&&(c.y=f-g)),h.add({closeRect:c,tab:b,startX:m,endX:m+d,width:d}),m+=d+i}),a._sumWidth=r(0,m-i),k){var n=k.position;a.drawTab(l,k.tab,k.startX,0,k.width,g,a._moveBackground,j),bc(l,a._insertColor,n,0,g)}l.restore(),a.tx(a.tx())}});var ok=function(a){this.tv=a,this.addListeners()};ve(ok,b,{ms_listener:1,getView:function(){return this.tv._titleDiv},handle_mousewheel:function(a){this.hanelScroll(a,10*(a.wheelDelta/40))},handle_DOMMouseScroll:function(a){this.hanelScroll(a,10*-a.detail)},hanelScroll:function(a,b){Ld(a);var c=this.tv;c.isScrollable()&&c.tx(this.tv.tx()+b)},isClickable:function(a){var b=this.tv,c=this.tabInfo=b.getTabInfoAt(a);return b.isScrollable()?!0:c&&(!c.tab.isDisabled()||b.isMovable())},handle_mousemove:function(a){pc?this.tabInfo2=this.tv.getTabInfoAt(a):this.getView().style.cursor=this.isClickable(a)?lb:""},handle_mousedown:function(a){this.handle_mousemove(a),this.handle_touchstart(a)},handle_touchstart:function(a){var b=this.tv;Ld(a),this.isClickable(a)&&(this.x=fe(a).x,this.lp=b.lp(a),this.tx=b.tx(),se(this,a))},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this.tv,c=this.tabInfo,d=fe(a).x-this.x;if(!this.translating&&!this.moving&&t(d)>2&&(b.isScrollable()&&!ee(a)?this.translating=1:c&&b.isMovable()&&(this.moving=1)),this.translating)b.tx(this.tx+d);else if(this.moving){var e=this.lp.x+d,f=b._tabGap/2;b._tabInfos.each(function(a){var g=a.endX,h=e-a.startX<g-e;e>=a.startX&&g>=e&&b.setMovingTabInfo({tab:c.tab,startX:c.startX+d,width:c.width,front:h,insertTab:a.tab,position:h?r(0,a.startX-f):s(b._sumWidth,g+f)})},this)}},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(){var a=this.tv,b=a.getTabModel(),c=this.tabInfo;if(this.moving){var d=a._movingTabInfo;if(d&&d.insertTab!==d.tab){var e=d.tab,g=b._roots,h=g.remove(e),i=g.indexOf(d.insertTab);i>=0&&(d.front||i++,i<=g.size()&&(g.add(e,i),b.fireHierarchyChange(e,h,i)))
}a.setMovingTabInfo(f),delete this.moving}else if(!this.translating&&c){e=c.tab;var j=this.tabInfo2;j&&j.tab!==e||(!e.isDisabled()&&je(c.closeRect,this.lp)?b.remove(e):e.isDisabled()||a._currentTab===e||b.sm().ss(e))}delete this.translating,delete this.tabInfo,delete this.tabInfo2,delete this.x,delete this.lp,delete this.tx}}),ik.PropertyView=function(a){var b=this;b._view=jc(1),b._canvas=kc(b._view),b._view.appendChild(b._scrollBarDiv=jc()),b._rows=new We,b._categories=new We,b._categoryMap={};var c=b._propertyModel=new $e,d=b.invalidateModel;c.mm(d,b),c.md(d,b),c.mh(d,b),b.dm(a?a:new $e),new pk(b)},jk("PropertyView",b,{ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,ms_painter:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_element:1,ms_cell:1,ms_ac:["editable","categorizable","indent","sortFunc","visibleFunc","expandIcon","collapseIcon","scrollBarColor","scrollBarSize","autoHideScrollBar","selectRowIndex","selectBackground","background","rowHeight","rowLineVisible","rowLineColor","columnLineVisible","columnLineColor"],_viewRect:Eb,_scrollHeight:0,_columnLineX:0,_selectRowIndex:-1,_editable:!0,_categorizable:!0,_indent:ek,_background:i.propertyViewBackground,_expandIcon:ck,_collapseIcon:dk,_scrollBarColor:Bd,_scrollBarSize:Cd,_autoHideScrollBar:wd,_selectBackground:_j,_rowHeight:fk,_rowLineVisible:i.propertyViewRowLineVisible,_rowLineColor:gk,_columnPosition:.5,_columnLineVisible:i.propertyViewColumnLineVisible,_columnLineColor:gk,getRows:function(){return this._rows},getColumnPosition:function(){return this._columnPosition},setColumnPosition:function(a){0>a&&(a=0),a>1&&(a=1);var b=this._columnPosition;this._columnPosition=a,this.fp("columnPosition",b,a)},getPropertyName:function(a){return a.toLabel()},getLabelFont:function(){return Ad},getLabelColor:function(a,b,c){return c===this._selectRowIndex?zd:yd},getPropertyFont:function(){return Ad},getPropertyColor:function(a,b){return b===this._selectRowIndex?zd:yd},getCategoryFont:function(){return Ad},getCategoryColor:function(){return yd},adjustTranslateX:function(){return 0},adjustTranslateY:function(a){var b=this.getHeight()-this._scrollHeight;return b>a&&(a=b),a>0?0:o(a)},isExpanded:function(a){if(!a)return!0;var b=this._categoryMap[a];return b?b.isExpanded:!0},toggle:function(a){this.isExpanded(a)?this.collapse(a):this.expand(a)},expand:function(a){if(a){var b=this._categoryMap[a];b&&!b.isExpanded&&(b.isExpanded=!0,this.onExpanded(a),this.invalidateModel())}},onExpanded:function(){},collapse:function(a){if(a){var b=this._categoryMap[a];b&&b.isExpanded&&(b.isExpanded=!1,this.onCollapsed(a),this.invalidateModel())}},onCollapsed:function(){},getCategoryName:function(a){if(!this.isCategorizable())return Z;var b=a.getCategoryName();return b?b:Z},getPropertyModel:function(){return this._propertyModel},setDataModel:function(a){var b=this,c=b._dataModel;c!==a&&(c&&(c.umd(b.handlePropertyChange,b),b._selectionModel||c.sm().ums(b.invalidateModel,b)),b._dataModel=a,a.md(b.handlePropertyChange,b),b._selectionModel?b._selectionModel._setDataModel(a):a.sm().ms(b.invalidateModel,b),b.fp("dataModel",c,a))},isVisible:function(a){return this._visibleFunc?this._visibleFunc(a):!0},onPropertyChanged:function(a){Wj[a.property]?this.invalidateModel():this.iv(),"translateY"===a.property&&this.showVBar()},getCurrentData:function(){return this._currentData},updateCurrentData:function(){this._currentData=this.sm().ld()},getRawProperties:function(){return this._currentData?this._propertyModel._roots:Xe},handlePropertyChange:function(a){this._currentData===a.data&&this.iv()},invalidateModel:function(){this._invalidateModel||(this.setSelectRowIndex(-1),this._invalidateModel=1,this.iv())},redraw:function(){this.iv()},validateModel:function(){var a=this,b=a._rows,c=a._categories,d={},e=new We,f=a._currentData;a.updateCurrentData(),f!==a._currentData&&a.endEditing(),b.clear(),c.clear(),a.getRawProperties().each(function(b){if(a.isVisible(b)){e.add(b);var f=a.getCategoryName(b);d[f]||(c.add(f),d[f]={isExpanded:a.isExpanded(f),properties:new We})}}),a._sortFunc&&e.sort(a._sortFunc),a._categoryMap=d,c.each(function(c){c!==Z&&b.add(c);var f=d[c];f.isExpanded&&e.each(function(d){a.getCategoryName(d)===c&&(f.properties.add(d),b.add({property:d,data:a._currentData}))},a)})},validateImpl:function(){var a=this;a.removeElements(),a._invalidateModel&&(a.validateModel(),delete a._invalidateModel);var b=a._canvas,c=a.getWidth(),d=a.getHeight(),e=-a.ty(),g=a._rowHeight,h=a._indent,i=c-h,j=a._rows,k=j.size(),l=a._columnLineX=h+i*a._columnPosition,m=a._scrollHeight=k*g;$d(b,c,d),a._viewRect={x:0,y:e,width:c,height:d},a._startRowIndex=o(e/g),a._endRowIndex=p((e+d)/g),a._startRowIndex<0&&(a._startRowIndex=0),a._endRowIndex>k&&(a._endRowIndex=k);var n,q=lc(b),r=a._background;_d(q,0,-e,1),q.beginPath(),q.rect(0,e,c,d),q.clip(),q.clearRect(0,e,c,d),a.drawBottomPainters(q),r&&(q.fillStyle=r,q.beginPath(),q.rect(0,0,h,m),q.fill());for(var s=a._startRowIndex;s<a._endRowIndex;s++){var t=j.get(s),e=g*s;if(Lb(t))r&&(q.fillStyle=r,q.beginPath(),q.rect(h,e,i,g),q.fill()),n=Nd(a.isExpanded(t)?a._expandIcon:a._collapseIcon),n&&$b(q,n,h/2,e+g/2),q.save(),q.beginPath(),q.rect(h,e,i,g),q.clip(),a.drawCategoryName(q,t,s,h,e,i,g),q.restore();else{var u=t.property,v=t.data,n=Nd(u.getIcon()),w=a._selectRowIndex===s?a._selectBackground:f;n&&$b(q,n,h/2,e+g/2,u,this),w&&(q.fillStyle=w,q.beginPath(),q.rect(h,e,i,g),q.fill()),q.save(),q.beginPath(),q.rect(h,e,l-h,g),q.clip(),a.drawPropertyName(q,u,s,h,e,l-h,g),q.restore();var x=l+1,y=c-l-1;q.save(),q.beginPath(),q.rect(x,e,y,g),q.clip(),a.addElement(a.drawPropertyValue(q,u,a.getValue(v,u),s,x,e,y,g,v),q,s,w,x,e,y,g),q.restore()}a._rowLineVisible&&(q.fillStyle=a._rowLineColor,q.beginPath(),q.rect(h,e+g-1,i,1),q.fill())}a._columnLineVisible&&(q.fillStyle=a._columnLineColor,q.beginPath(),q.rect(l,0,1,m),q.fill(),q.beginPath(),q.rect(c-1,0,1,m),q.fill()),a.drawTopPainters(q),a.updateVBar(),q.restore(),a.ty(a.ty())},drawCategoryName:function(a,b,c,d,e,f,g){Zd(a,b,this.getCategoryFont(b),this.getCategoryColor(b),d,e,f,g)},drawPropertyName:function(a,b,c,d,e,f,g){return b.drawPropertyName?(b.drawPropertyName(a,b,c,d,e,f,g,this),void 0):(Zd(a,this.getPropertyName(b),this.getPropertyFont(b,c),this.getPropertyColor(b,c),d,e,f,g),void 0)},drawPropertyValue:function(a,b,c,d,e,f,g,h,i){return b.drawPropertyValue?b.drawPropertyValue(a,b,c,d,e,f,g,h,i,this):(Zj(a,c,b,this.getLabelFont(b,c,d),this.getLabelColor(b,c,d),e,f,g,h,i,this),void 0)},isPropertyEditable:function(a){return a.isEditable()&&this.isEditable()},onCategoryClicked:function(){},onPropertyValueClicked:function(){},onPropertyNameClicked:function(){},addProperties:function(a){var b=this._propertyModel;a.forEach(function(a){if(!(a instanceof mk)){var c=Td(a.className);a=ic(c?c:mk,a)}b.add(a)})},getRowIndexAt:function(a){var b=this,c=o(b.lp(a).y/b._rowHeight);return c>=0&&c<b._rows.size()?c:-1}});var pk=function(a){this.pv=a,this.addListeners()};ve(pk,b,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(a){this.getView().style.cursor=a},clear:function(){delete this.state,delete this.cp,delete this.tx,delete this.position,this.setCursor("")},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this.pv;Ld(a),b.setFocus(),this.cp=fe(a),this.tx=b.getTranslateY(),this.position=b.getColumnPosition()},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){if(this.cp&&!this.state){var b=this.pv,c=fe(a),d=b.lp(a),e=d.x,f=d.y,g=b._indent,h=b.getRowIndexAt(a),i=b._columnLineX;if(h>=0){var j=b._rowHeight,k=j*h,l=b._rows.get(h),m=l.property;if(Lb(l))Nd(b.isExpanded(l)?b._expandIcon:b._collapseIcon)&&e>=0&&g>=e&&f>=k&&k+j>=f?b.toggle(l):ce(a)&&b.toggle(l),b.onCategoryClicked(l,a);else if(e>i){if(b.isPropertyEditable(m)){var n=ne(),o={x:i+1,y:k,width:b.getWidth()-i-1,height:j},p={x:o.x-e+c.x+n.left,y:o.y-f+c.y+n.top,width:o.width,height:o.height};b.beginEditing({data:l.data,property:m,value:b.getValue(l.data,m),event:a,rect:o,editorRect:p,view:b})}b.onPropertyValueClicked(l,a)}else b.onPropertyNameClicked(l,a)}b.setSelectRowIndex(h)}this.clear()},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this.pv,c=this.tx,d=this.cp,e=fe(a),f=this.state;if("p"===f)b.setTranslateY(c+e.y-d.y);else if("c"===f){var g=b.getWidth()-b._indent;if(g>16){var h=this.position-(d.x-e.x)/g,i=16/g;i>h&&(h=i),h>1-i&&(h=1-i),b.setColumnPosition(h)}}else"s"===f&&b.setTranslateY(c+(d.y-e.y)*b._scrollHeight/b._viewRect.height)},handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(a){if(!pc){var b=this.pv,c=t(b.lp(a).x-b._columnLineX)<=(Q?8:3);this.cp?this.state||(c?(this.state="c",se(this)):t(fe(a).y-this.cp.y)>=2&&(this.state=this.isV(a)?"s":"p",se(this))):(c?this.setCursor(jb):this.setCursor(""),this.isV(a)&&b.showVBar())}},isV:function(a){var b=this.pv,c=b._viewRect;return b.isVScrollable()&&c.x+c.width-b.lp(a).x<Fd},handle_mousewheel:function(a){this.handleScroll(a,a.wheelDelta/40)},handle_DOMMouseScroll:function(a){2===a.axis&&this.handleScroll(a,-a.detail)},handleScroll:function(a,b){var c=this.pv;Ld(a),c.endEditing(),c.translate(0,b*c.getRowHeight())},handle_keydown:function(a){var b=this.pv,c=b._rows.size(),d=b._selectRowIndex+(Dc(a)?-1:1);(Dc(a)||Fc(a))&&(0>d&&(d=0),d>=c&&(d=c-1),b.setSelectRowIndex(d))}}),ik.ListView=function(a){this.initList(a),new qk(this)},jk("ListView",b,{ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,ms_painter:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,ms_list:1,ms_dm:1,ms_element:1,ms_ac:["rowHeight","indent","rowLineVisible","rowLineColor","sortFunc","visibleFunc","scrollBarColor","scrollBarSize","autoHideScrollBar","autoMakeVisible"],_checkMode:!1,_indent:ek,_rowHeight:fk,_rowLineVisible:i.listViewRowLineVisible,_rowLineColor:gk,_scrollBarColor:Bd,_scrollBarSize:Cd,_autoMakeVisible:vd,_autoHideScrollBar:wd,isCheckMode:function(){return this._checkMode},setCheckMode:function(a){var b=this._checkMode;this._checkMode=a,this.fp("checkMode",b,a)},drawRow:function(a,b,c,d,e,f,g){var h=0,i=this._indent,j=this._checkMode;(j&&b===this._focusData||c&&!j)&&(a.fillStyle=this.getSelectBackground(b),a.beginPath(),a.rect(d,e,f,g),a.fill()),j&&($b(a,this.getCheckIcon(b),h+i/2,e+g/2,b,this),h+=i),h+=Yj(a,b,this,h,e,i,g),Zd(a,this.getLabel(b),this.getLabelFont(b),this.getLabelColor(b),h,e,0,g)}});var qk=function(a){this.list=a,this.addListeners()};ve(qk,b,{ms_listener:1,getView:function(){return this.list._view},clear:function(){delete this.state,delete this.cp,delete this.tx,delete this.ty},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this.list;if(Ld(a),b.setFocus(),this.cp=fe(a),this.tx=b.tx(),this.ty=b.ty(),!ae(a)){var c=b.getDataAt(a);c&&this.handleSelectMode(a,c),this.clear()}},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){var b=this.list;if(this.cp&&!this.state){var c=b.getDataAt(a);c&&(b.isCheckMode()?this.handleCheckMode(a,c):this.handleSelectMode(a,c),ce(a)?b.onDataDoubleClicked(c,a):b.onDataClicked(c,a))}this.clear()},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this.list,c=this.tx,d=this.ty,e=this.cp,f=fe(a);"p"===this.state?b.setTranslate(c+f.x-e.x,d+f.y-e.y):"v"===this.state?b.ty(d+(e.y-f.y)*b._scrollHeight/b._viewRect.height):"h"===this.state&&this.list.tx(c+(e.x-f.x)*b._scrollWidth/b._viewRect.width)},handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(a){if(!pc&&ae(a)){var b=this.isV(a),c=this.isH(a);if(this.cp){if(!this.state){if(ge(fe(a),this.cp)<2)return;this.state=b?"v":c?"h":"p",se(this)}}else b&&this.list.showVBar(),c&&this.list.showHBar()}},isV:function(a){var b=this.list,c=b._viewRect;return b.isVScrollable()&&c.x+c.width-b.lp(a).x<Fd},isH:function(a){var b=this.list,c=b._viewRect;return b.isHScrollable()&&c.y+c.height-b.lp(a).y<Fd},handle_mousewheel:function(a){this.handleScroll(a,a.wheelDelta/40,a.wheelDelta!==a.wheelDeltaX)},handle_DOMMouseScroll:function(a){this.handleScroll(a,-a.detail,1)},handleScroll:function(a,b,c){var d=this.list;Ld(a),d.endEditing&&d.endEditing(),c&&d.isVScrollable()?d.translate(0,b*d.getRowHeight()):d.isHScrollable()&&d.translate(10*b,0)},handle_keydown:function(a){var b,c=this.list,d=c.sm(),e=c._rows,f=e.size();if(vc(a))c.selectAll();else if(wc(a))c.handleDelete&&c.handleDelete(a);else if(Gc(a))c.isCheckMode()&&(b=c.getFocusData(),b&&c.checkData(b));else if(Dc(a)||Fc(a)){var g=c.isCheckMode();if(b=g?c.getFocusData():d.ld()){var h=c.getRowIndex(b);h>=0&&(Dc(a)?0!==h&&(b=e.get(h-1),g?c.setFocusData(b):d.ss(b)):h!==f-1&&(b=e.get(h+1),g?c.setFocusData(b):d.ss(b)))}else f>0&&(b=e.get(0),g?c.setFocusData(b):d.ss(b))}},handleCheckMode:function(a,b){var c=this.list,d=c.lp(a).x;return d>=0&&d<=c._indent?(c.checkData(b),void 0):(c.setFocusData(b),void 0)},handleSelectMode:function(a,b){var c=this.list,d=c.sm(),e=d.ld();if(ee(a))c.isSelected(b)?d.rs(b):d.as(b);else if(de(a))if(e)for(var f=c.getRowIndex(e),g=c.getRowIndex(b);f!==g;)f+=g>f?1:-1,d.as(c._rows.get(f));else d.ss(b);else(ae(a)||!d.contains(b))&&d.ss(b)}}),ik.TreeView=function(a){this.initTree(),this.initList(a),new rk(this)},jk("TreeView",b,{ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,ms_painter:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,ms_list:1,ms_dm:1,ms_tree:1,ms_element:1,ms_ac:["rootVisible","checkMode","rootData","sortFunc","visibleFunc","scrollBarColor","scrollBarSize","autoHideScrollBar","indent","rowHeight","rowLineVisible","rowLineColor","expandIcon","collapseIcon","autoMakeVisible"],_checkMode:f,_indent:ek,_rowHeight:fk,_rowLineVisible:i.treeViewRowLineVisible,_rowLineColor:gk,_scrollBarColor:Bd,_scrollBarSize:Cd,_autoHideScrollBar:wd,_expandIcon:ck,_collapseIcon:dk,_autoMakeVisible:vd,drawRow:function(a,b,c,d,e,f,g){var h=this.isCheckMode();(h&&b===this._focusData||c&&!h)&&(a.fillStyle=this.getSelectBackground(b),a.beginPath(),a.rect(d,e,f,g),a.fill()),this.drawTree(a,b,c,0,e,f,g)}});var rk=function(a){Ub(rk,this,[a])};ve(rk,qk,{toggle:function(a,b,c,d){var e=this.list,f=e.lp(a).x;if(Nd(e.getToggleIcon(b))){var g=c*d;if(f>=g&&g+c>=f)return e.toggle(b),!0}return ce(a)?(e.toggle(b),!0):!1},handleCheckMode:function(a,b){var c=this.list,d=c.lp(a).x,e=c._levelMap[b._id],f=c._indent,g=f*(e+1);if(!this.toggle(a,b,f,e)){if(d>=g&&g+f>=d)return c.checkData(b),void 0;c.setFocusData(b)}},handleSelectMode:function(a,b){var c=this.list;this.toggle(a,b,c._indent,c.getLevel(b))||rk.superClass.handleSelectMode.call(this,a,b)},handle_keydown:function(a){if(Cc(a)||Ec(a)){var b=this.list,c=b._rows,d=b.isCheckMode(),e=b.sm(),f=d?b.getFocusData():e.ld();f?f.hasChildren()&&(Cc(a)?b.collapse(f):b.expand(f)):c.size()>0&&(f=c.get(0),d?b.setFocusData(f):e.ss(f))}else rk.superClass.handle_keydown.call(this,a)}});var sk=ik.TableView=function(a){this.initTable(),this.initList(a),new tk(this)};jk("TableView",b,{ms_v:1,ms_fire:1,ms_sm:1,ms_painter:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,ms_list:1,ms_dm:1,ms_tip:1,ms_table:1,ms_element:1,ms_cell:1,ms_ac:["sortMode","editable","rowHeight","rowLineVisible","rowLineColor","columnLineVisible","columnLineColor","sortColumn","sortFunc","visibleFunc","scrollBarColor","scrollBarSize","autoHideScrollBar","autoMakeVisible"],_sortMode:"tristate",_editable:!0,_rowHeight:fk,_rowLineVisible:i.tableViewRowLineVisible,_rowLineColor:gk,_columnLineVisible:i.tableViewColumnLineVisible,_columnLineColor:gk,_scrollBarColor:Bd,_scrollBarSize:Cd,_autoHideScrollBar:wd,_autoMakeVisible:vd,getCheckColumn:function(){if(!this._checkColumn){var a=this._checkColumn=new lk;a.setEditable(!0),a.setWidth(40),a.getValue=this.getCheckColumValue,a.drawCell=this.drawCheckColumnCell}return this._checkColumn},isCheckMode:function(){return this._columnModel.contains(this._checkColumn)},setCheckMode:function(a){if(a!==this.isCheckMode()){var b=this._columnModel,c=this.getCheckColumn();a?b.add(c,0):b.remove(c),this.fp("checkMode",!a,a)}},getCheckColumValue:function(a,b,c){return c.isSelected(a)},drawCheckColumnCell:function(a,b,c,d,e,f,g,h,i){$b(a,i.getCheckIcon(b),e+g/2,f+h/2,b,i)}});var tk=function(a){Ub(tk,this,[a])};ve(tk,qk,{handleCheckMode:function(a,b){var c=this.list,d=c._checkColumn;if(c.isCellEditable(b,d)){var e=c.getColumnInfo(d),f=c.lp(a).x;if(e&&f>=e.startX&&f<e.startX+d.getWidth())return c.checkData(b),void 0}c.setFocusData(b),c.checkEditing(b,a)},handleSelectMode:function(a,b){tk.superClass.handleSelectMode.apply(this,arguments),this.list.checkEditing(b,a)}});var uk=ik.TreeTableView=function(a){this.initTree(),this.initTable(),this.initList(a);var b=this._treeColumn=new lk;b.setDisplayName("Name"),b.setEditable(!0),b.setWidth(180),b.getValue=this.getTreeColumValue,b.drawCell=this.drawTreeColumnCell,this._columnModel.add(b),new vk(this)};jk("TreeTableView",b,{ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,ms_painter:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,ms_list:1,ms_dm:1,ms_tip:1,ms_table:1,ms_tree:1,ms_element:1,ms_cell:1,ms_ac:["sortMode","editable","indent","checkMode","rootData","sortFunc","visibleFunc","sortColumn","expandIcon","collapseIcon","scrollBarColor","scrollBarSize","autoHideScrollBar","autoMakeVisible","rowLineColor","rowHeight","rowLineVisible","columnLineVisible","columnLineColor"],_sortMode:"tristate",_checkMode:f,_editable:!0,_indent:ek,_rowHeight:fk,_rowLineVisible:i.treeTableViewRowLineVisible,_rowLineColor:gk,_columnLineVisible:i.treeTableViewColumnLineVisible,_columnLineColor:gk,_expandIcon:ck,_collapseIcon:dk,_scrollBarColor:Bd,_scrollBarSize:Cd,_autoHideScrollBar:wd,_autoMakeVisible:vd,getTreeColumn:function(){return this._treeColumn},drawTreeColumnCell:function(a,b,c,d,e,f,g,h,i){i.drawTree(a,b,c,e,f,g,h)},getTreeColumValue:function(a,b,c){return c.getLabel(a)}});var vk=function(a){Ub(vk,this,[a])};ve(vk,qk,{handleCheckMode:function(a,b){var c=this.list,d=c._treeColumn,e=c.getColumnInfo(d),f=c.lp(a).x;if(e){var g=c._indent,h=e.startX+g*c.getLevel(b);if(Nd(c.getToggleIcon(b))&&f>=h&&h+g>=f)return c.toggle(b),void 0;if(c.isCellEditable(b,d)&&(h+=g,f>=h&&h+g>=f))return c.checkData(b),void 0}c.setFocusData(b),c.checkEditing(b,a)},handleSelectMode:function(a,b){var c=this.list,d=c.lp(a).x;if(Nd(c.getToggleIcon(b))){var e=c.getColumnInfo(c._treeColumn);if(e){var f=c._indent,g=e.startX+f*c.getLevel(b);if(d>=g&&g+f>=d)return c.toggle(b),void 0}}vk.superClass.handleSelectMode.apply(this,arguments),c.checkEditing(b,a)}});var wk=ik.TableHeader=function(a){this.tv=this._tableView=a,this._columnInfos=new We;var b=this._view=jc(1),c=this._columnModel=a.getColumnModel(),d=this.iv;this._canvas=kc(b),b.style.background=i.tableHeaderBackground||"",b.style.height=this._height+$,c.mm(d,this),c.md(d,this),c.mh(d,this),a.mp(function(a){Sj[a.property]&&this.iv()},this),new xk(this),this.iv()};jk("TableHeader",b,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","height","sortDescIcon","sortAscIcon","labelColor","moveBackground","insertColor","columnLineVisible","columnLineColor","resizable","movable"],_checkIcon:"uncheck",_movable:!0,_resizable:!0,_height:hk,_columnLineColor:gk,_columnLineVisible:i.tableHeaderColumnLineVisible,_sortDescIcon:bk,_sortAscIcon:ak,_labelColor:i.tableHeaderLabelColor,_moveBackground:i.tableHeaderMoveBackground,_insertColor:i.tableHeaderInsertColor,getCheckIcon:function(){return this._checkIcon},getColumnInfos:function(){return this._columnInfos},getTableView:function(){return this.tv},getLabel:function(a){return a.toLabel()},getLabelFont:function(){return Ad},onPropertyChanged:function(){this.iv()},setMovingColumnInfo:function(a){this._movingColumnInfo=a,this.iv()},getLogicalPoint:function(a){return qe(a,this._view,this.tv.tx())},validateImpl:function(){var a=this._canvas,b=this.getWidth(),c=this.getHeight(),d=this.tv,e=this._columnInfos,f=this._movingColumnInfo,g=-d.tx(),h=0;(b!==a.clientWidth||c!==a.clientHeight)&&$d(a,b,c),e.clear(),this._columnModel._roots.each(function(a){if(a.isVisible()){var c=h+a.getWidth();g+b>=h&&c>=g&&e.add({column:a,startX:h}),h=c}},this);var i=lc(a);if(_d(i,-g,0,1),i.beginPath(),i.rect(g,0,b,c),i.clip(),i.clearRect(g,0,b,c),e.each(function(a){var b=a.column,d=a.startX,e=b.getWidth();e>0&&(i.save(),i.beginPath(),i.rect(d,0,e,c),i.clip(),f&&f.column===b||this.drawColumn(i,b,d,0,e,c),this._columnLineVisible&&(i.fillStyle=this._columnLineColor,i.beginPath(),i.rect(d+e-1,0,1,c),i.fill()),i.restore())},this),f){var j=f.column,h=f.startX,k=f.position,l=j.getWidth();i.save(),i.beginPath(),i.rect(h,0,l,c),i.clip(),i.fillStyle=this._moveBackground,i.fill(),this.drawColumn(i,j,h,0,l,c),i.restore(),bc(i,this._insertColor,k,0,c)}i.restore()},isCheckHeader:function(a){return this.tv._checkColumn===a&&"multiple"===this.tv.sm().getSelectionMode()},getLabelAlign:function(a){return a._align},drawColumn:function(a,b,c,d,e,f){var g=this.getLabelAlign(b);if(this.isCheckHeader(b)){var h=Nd(this._checkIcon);$b(a,h,c+e/2,d+f/2,b,this)}else Zd(a,this.getLabel(b),this.getLabelFont(b),this.getLabelColor(b),c,d,e,f,g);if(b.isSortable()&&this.tv.getSortColumn()===b&&(h=Nd("asc"===b.getSortOrder()?this._sortAscIcon:this._sortDescIcon))){var i=Se(h,b)/2+2;$b(a,h,g===U?c+i:c+e-i,d+f/2,b,this.tv)}}});var xk=function(a){this.th=a,this.tv=a._tableView,this.addListeners()};ve(xk,b,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(a){this.getView().style.cursor=a},handle_mousemove:function(a){if(!pc){delete this.columnInfo,this.setCursor("");for(var b=this.th,c=b._columnInfos,d=b.lp(a).x,e=c.size()-1;e>=0;e--){var f=c.get(e),g=f.column,h=f.startX+g.getWidth();if(b.isResizable()&&t(h-d)<=(Q?10:3))return this.columnInfo=f,this.setCursor(jb),void 0;(g.isSortable()||b.isMovable())&&d>=f.startX&&h>=d&&g.getWidth()>0&&(this.columnInfo=f,this.setCursor(lb))}}},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){Ld(a),this.tv.endEditing(),this.handle_mousemove(a),this.columnInfo&&(this.x=fe(a).x,this.lx=this.th.lp(a).x,this.w=this.columnInfo.column.getWidth(),se(this,a))},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this.th,c=this.getView().style.cursor,d=this.columnInfo,e=fe(a).x-this.x;if(this.resizing||this.moving||(c===jb?this.resizing=1:b.isMovable()&&c===lb&&t(e)>2&&(this.moving=1)),this.resizing)d.column.setWidth(this.w+e);else if(this.moving){var f=this.lx+e;b._columnInfos.each(function(a){var c=a.startX,g=c+a.column.getWidth();if(f>=c&&g>=f){var h={column:d.column,startX:d.startX+e,front:g-f>f-c,insertColumn:a.column};return h.position=h.front?c:g,b.setMovingColumnInfo(h),void 0}},this)}},handleCheckHeader:function(a,b){var c=this.tv,d=this.th,e=d._checkIcon;if(d.isCheckHeader(a)){var f=Nd(e),g=this.lx,h=a.getWidth(),i=Se(f,a);if(g>=b+h/2-i&&b+h/2+i>=g){d.setCheckIcon("check"===e?"uncheck":"check");var j=c.sm(),k=c._rows;return"check"===e?j.rs(k):j.ss(k),!0}}return!1},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(a){var b=this.tv,c=this.th,d=this.columnInfo;if(this.moving){var e=c._movingColumnInfo;if(e&&e.insertColumn!==e.column){var g=e.column,h=b.getColumnModel()._roots,i=h.remove(g),j=h.indexOf(e.insertColumn);j>=0&&(e.front||j++,j<=h.size()&&(h.add(g,j),b.getColumnModel().fireHierarchyChange(g,i,j)))}c.setMovingColumnInfo(f),delete this.moving}else if(!this.resizing&&d&&(g=d.column,!this.handleCheckHeader(g,d.startX))){if(g.isSortable()){var k=b.getSortMode(),l=g.getSortOrder();"tristate"===k?b.getSortColumn()===g?("desc"===l&&b.setSortColumn(f),g.setSortOrder("asc"===l?"desc":"asc")):b.setSortColumn(g):"bistate"===k&&(b.getSortColumn()===g?g.setSortOrder("asc"===l?"desc":"asc"):b.setSortColumn(g))}b.onColumnClicked(g,a)}delete this.columnInfo,delete this.resizing,delete this.x,delete this.lx,delete this.w}}),ik.TablePane=function(a){this.init(new sk(a))},jk("TablePane",b,{ms_v:1,ms_tablePane:1}),ik.TreeTablePane=function(a){this.init(new uk(a))},jk("TreeTablePane",b,{ms_v:1,ms_tablePane:1}),ik.Toolbar=function(a){var b=this._view=jc(1),c=b.style;c.background=i.toolbarBackground||"",c.height=hk+$,this._canvas=kc(b),this._itemInfos=new We,this._elements=new We,this.setItems(a),new yk(this)},jk("Toolbar",b,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_ac:["items","itemGap","itemPadding","separatorColor","currentItem","stickToRight"],_itemGap:i.toolbarItemGap,_itemPadding:i.toolbarItemPadding,_separatorColor:i.toolbarSeparatorColor,_stickToRight:!1,getToolTip:function(a){var b=this.getItemInfoAt(a);return b?b.item.toolTip:null},getLabelFont:function(){return Ad},getLabelColor:function(a){return a.selected&&"check"!==a.type?zd:yd},getSelectBackground:function(){return _j},onPropertyChanged:function(){this.iv()},redraw:function(){this.iv()},getItemInfos:function(){return this._tabInfos},getItemInfoAt:function(a){var b=0,c=this._itemInfos,d=this.lp(a),e=d.x,g=d.y;if(g>=0&&g<=this.getHeight())for(;b<c.size();b++){var h=c.get(b);if(h.startX<=e&&e<=h.endX)return h}return f},drawItem:function(a,b,c,d,e){var f=b.disabled;f&&(a.globalAlpha=.5);var g=this.drawItemImpl(a,b,c,d,e);return f&&(a.globalAlpha=1),this._currentItem===b&&Tc(a,this._separatorColor,c,0,g,d),g},drawItemImpl:function(a,b,c,d,e){var f,g=this,h=d/2,i=b.type,j=b.label,k=g.getLabelFont(b),l=g.getLabelColor(b),m=j?_b(k,j).width:0,n=b.selected,o=0,p=g._itemPadding,q=2*p,r=b.element;if("separator"===b)return bc(a,g._separatorColor,c,d/4,h),1;if("check"===i)return f=Nd(n?"check":"uncheck"),o=Se(f,b),$b(a,f,c+p+o/2,h),Zd(a,j,k,l,c+p+o,0,0,d),o+m+q;if(r){Zd(a,j,k,l,c+p,0,0,d),e||g._elements.add(r),r.parentNode!==g._view&&g._view.appendChild(r);var s=r.getBoundingClientRect(),t=s.width,u=r.style;return u.position=_,u.margin=0,u.left=g.tx()+c+p+m+1+$,u.top=(d-s.height)/2+$,m+t+1+q}f=Nd(b.icon),f&&(o=Se(f,b));var v=o+m+q;return n&&(a.fillStyle=g.getSelectBackground(b),a.beginPath(),a.rect(c,0,v,d),a.fill()),f&&$b(a,f,c+p+o/2,h),Zd(a,j,k,l,c+p+o,0,0,d),v},validateImpl:function(){var a=this,b=a._canvas,c=a.getWidth(),d=a.getHeight(),e=a._itemInfos,f=a._items;$d(b,c,d);var g=lc(b),h=a._itemGap,i=h;g.clearRect(0,0,c,d),_d(g,a.tx(),0,1);var j=a._elements;a._elements=new We,e.clear(),f.forEach(function(b){var c=a.drawItem(g,b,i,d);e.add({item:b,startX:i,endX:i+c,width:c}),i+=c+h}),j.each(function(b){a._elements.contains(b)||a._view.removeChild(b)}),a._sumWidth=r(0,i),g.restore(),a._stickToRight?(a._translateX=0,g=lc(b),i=c-a._sumWidth+h,g.clearRect(0,0,c,d),_d(g,0,0,1),e.clear(),f.forEach(function(b){var c=a.drawItem(g,b,i,d,!0);e.add({item:b,startX:i,endX:i+c,width:c}),i+=c+h}),g.restore()):a.tx(a.tx())},handleClick:function(a){var b=a.type,c=a.action,d=a.groupId,e=a.selected;a.disabled||("check"===b||"toggle"===b?(a.selected=!e,c&&a.action(a)):d!=f?e||(a.selected=!0,this._items.forEach(function(b){b.groupId===d&&a!==b&&(b.selected=!1)},this),c&&a.action(a)):c&&a.action(a)),this.iv()}});var yk=function(a){this.tb=a,this.addListeners()};ve(yk,b,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(a){this.hanelScroll(a,10*(a.wheelDelta/40))},handle_DOMMouseScroll:function(a){this.hanelScroll(a,10*-a.detail)},hanelScroll:function(a,b){Ld(a);var c=this.tb;c.isScrollable()&&!c._stickToRight&&c.tx(c.tx()+b)},handle_mousemove:function(a){pc?this.info2=this.tb.getItemInfoAt(a):this.setItem(a)},handle_mouseout:function(a){this.handle_mousemove(a)},handle_mousedown:function(a){this.handle_mousemove(a),this.handle_touchstart(a)},handle_touchstart:function(a){var b=this.tb,c=a.target;(c===this.getView()||c===b._canvas)&&(Ld(a),b.setFocus(),this.setItem(a),(b.isScrollable()||this.info&&!this.info.item.disabled)&&(this.x=fe(a).x,this.tx=b.tx(),se(this,a)))},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this.tb;if(!b._stickToRight){var c=fe(a).x-this.x;!this.translating&&t(c)>2&&b.isScrollable()&&(this.translating=1),this.translating&&b.tx(this.tx+c)}},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(){var a=this,b=a.tb,c=a.info,d=a.info2;if(!a.translating&&c){var e=c.item;d&&d.item!==e||b.handleClick(e)}delete a.translating,delete a.x,delete a.tx,delete a.info2,a.setItem(),Q&&!b._stickToRight&&Pd(function(){b.tx(b.tx()+1),Pd(function(){b.tx(b.tx()-1)})})},setItem:function(a){var b=this.tb;this.info=a?b.getItemInfoAt(a):f,b.setCurrentItem(this.info?this.info.item:f)}}),ik.BorderPane=function(){this._view=jc(1),this.iv()},jk("BorderPane",b,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._left},setLeftView:function(a,b){this._setContent("leftView",a),null!=b&&this.setLeftWidth(b)},getRightView:function(){return this._right},setRightView:function(a,b){this._setContent("rightView",a),null!=b&&this.setRightWidth(b)},getTopView:function(){return this._top},setTopView:function(a,b){this._setContent("topView",a),null!=b&&this.setTopHeight(b)},getBottomView:function(){return this._bottom},setBottomView:function(a,b){this._setContent("bottomView",a),null!=b&&this.setBottomHeight(b)},getCenterView:function(){return this._center},setCenterView:function(a){this._setContent("centerView",a)},_setContent:function(a,b){var c="_"+a,d=this._view,e=this[c];e!==b&&(e&&(e.getView?d.removeChild(e.getView()):d.removeChild(e)),this[c]=b,b&&(b.getView?d.appendChild(b.getView()):d.appendChild(b)),this.fp(a,e,b))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var a=this._view,b=this._topView,c=this._bottomView,d=this._leftView,e=this._rightView,g=this._centerView,h=a.offsetWidth,i=a.offsetHeight,j=0,k=0,l=h,m=i,n=0,o=0,p=0,q=0;b&&(n=this._topHeight!=f?this._topHeight:b.getView?b.getView().offsetHeight:b.offsetHeight,k=n),c&&(o=this._bottomHeight!=f?this._bottomHeight:c.getView?c.getView().offsetHeight:c.offsetHeight,m=i-o),d&&(p=this._leftWidth!=f?this._leftWidth:d.getView?d.getView().offsetWidth:d.offsetWidth,j=p),e&&(q=this._rightWidth!=f?this._rightWidth:e.getView?e.getView().offsetWidth:e.offsetWidth,l=h-q);var s=r(0,l-j),t=r(0,m-k);b&&nc(b,0,0,h,n),c&&nc(c,0,m,h,o),d&&nc(d,0,k,p,t),e&&nc(e,l,k,q,t),g&&nc(g,j,k,s,t)}})}}(this,Object);